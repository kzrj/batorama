(this.webpackJsonpdm=this.webpackJsonpdm||[]).push([[0],{203:function(e,t,a){e.exports=a(382)},25:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthTypes",(function(){return i})),a.d(t,"INITIAL_STATE",(function(){return d})),a.d(t,"AuthSelectors",(function(){return h})),a.d(t,"setRamaToSee",(function(){return b})),a.d(t,"loginRequest",(function(){return p})),a.d(t,"loginSuccess",(function(){return E})),a.d(t,"loginFailure",(function(){return v})),a.d(t,"signUpRequest",(function(){return g})),a.d(t,"signUpSuccess",(function(){return f})),a.d(t,"signUpFailure",(function(){return _})),a.d(t,"logoutRequest",(function(){return y})),a.d(t,"logoutSuccess",(function(){return k})),a.d(t,"logoutFailure",(function(){return N})),a.d(t,"resetAuthErrors",(function(){return S})),a.d(t,"toggleModal",(function(){return T})),a.d(t,"checkTokenRequest",(function(){return w})),a.d(t,"checkTokenSuccess",(function(){return O})),a.d(t,"checkTokenFail",(function(){return R})),a.d(t,"checkAuthSuccess",(function(){return j})),a.d(t,"reducer",(function(){return C}));var n,l=a(12),c=a(137),r=a(185),s=a.n(r),o=Object(c.createActions)({loginRequest:["data"],loginSuccess:["user"],loginFailure:["error"],signupRequest:["data"],signupSuccess:["user"],signupFailure:["error"],logoutRequest:null,logoutSuccess:null,logoutFailure:["error"],checkTokenRequest:["payload"],checkTokenSuccess:["payload"],checkTokenFail:["error"],resetAuthErrors:null,restorePasswordRequest:["data"],restorePasswordSuccess:null,restorePasswordFailure:["error"],toggleModal:["isAuthModalOpen"],checkAuthRequest:["payload"],checkAuthSuccess:["payload"],checkAuthFail:null,setRamaToSee:["rama"]}),m=o.Types,u=o.Creators,i=m;t.default=u;var d=s()({fetching:!1,user:null,error:"",isLoggedIn:!1,isLoggingIn:!1,ramaToSee:{}}),h={getUser:function(e){return e.user}},b=function(e,t){var a=t.rama;return e.merge({ramaToSee:a})},p=function(e,t){t.data;return e.merge({fetching:!0,user:null,isLoggingIn:!0,isLoggedIn:!1,ramaToSee:{}})},E=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggedIn:!0,isLoggingIn:!1})},v=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},g=function(e,t){t.data;return e.merge({fetching:!0,user:{},isLoggingIn:!0,isLoggedIn:!1})},f=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggingIn:!1,isLoggedIn:!0})},_=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggingIn:!1,isLoggedIn:!1})},y=function(e){return e.merge({fetching:!0,isLoggingIn:!0})},k=function(e){return e.merge({fetching:!1,error:null,user:null,isLoggingIn:!1,isLoggedIn:!1})},N=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,isLoggingIn:!1})},S=function(e){return e.merge({fetching:!1,error:null})},T=function(e,t){var a=t.isAuthModalOpen;return e.merge({isAuthModalOpen:a,error:null})},w=function(e,t){t.payload;return e.merge({fetching:!0})},O=function(e,t){var a=t.payload;return e.merge({fetching:!1,error:null,user:a.user,isLoggedIn:!0,isLoggingIn:!1})},R=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},j=function(e,t){var a=t.payload;return e.merge({user:a,isLoggedIn:!0,isLogginIn:!1})},C=Object(c.createReducer)(d,(n={},Object(l.a)(n,m.SET_RAMA_TO_SEE,b),Object(l.a)(n,m.LOGIN_REQUEST,p),Object(l.a)(n,m.LOGIN_SUCCESS,E),Object(l.a)(n,m.LOGIN_FAILURE,v),Object(l.a)(n,m.SIGNUP_REQUEST,g),Object(l.a)(n,m.SIGNUP_SUCCESS,f),Object(l.a)(n,m.SIGNUP_FAILURE,_),Object(l.a)(n,m.CHECK_TOKEN_REQUEST,w),Object(l.a)(n,m.CHECK_TOKEN_FAIL,R),Object(l.a)(n,m.CHECK_TOKEN_SUCCESS,O),Object(l.a)(n,m.LOGOUT_REQUEST,y),Object(l.a)(n,m.LOGOUT_SUCCESS,k),Object(l.a)(n,m.LOGOUT_FAILURE,N),Object(l.a)(n,m.TOGGLE_MODAL,T),Object(l.a)(n,m.RESET_AUTH_ERRORS,S),Object(l.a)(n,m.CHECK_AUTH_SUCCESS,j),n))},382:function(e,t,a){"use strict";a.r(t);var n=a(12),l=a(0),c=a.n(l),r=a(20),s=a.n(r),o=a(67),m=a(30),u=a(21),i=a(27),d=a(184),h=a(192),b=a(36),p=a.n(b),E=a(29),v=a(10),g=a.n(v),f="".concat("http://77.222.54.200","/api"),_={JWT_AUTH:"".concat(f,"/jwt/api-token-auth/"),JWT_CHECK_TOKEN:"".concat(f,"/jwt/api-token-verify/"),STOCK:"".concat(f,"/common/stock/"),SHIFTS:"".concat(f,"/common/shifts/"),SALES:"".concat(f,"/common/sales/"),RESAWS:"".concat(f,"/common/resaw/"),DAILY_REP:"".concat(f,"/common/daily_report/"),SALE_CALC_DATA:"".concat(f,"/common/sales/calc_data/"),INCOME_TIMBERS:"".concat(f,"/common/income_timbers/"),QUOTAS:"".concat(f,"/common/quotas/"),RAMSHIK_SHIFT_LIST:"".concat(f,"/ramshik/shifts/list/"),RAMSHIK_PAYOUTS:"".concat(f,"/ramshik/payouts/"),EMPLOYEE_PAYOUT_INIT_DATA:"".concat(f,"/manager/ramshik_payments/init_data/"),EMPLOYEE_PAYOUT:"".concat(f,"/manager/ramshik_payments/ramshik_payout/"),EMPLOYEE_CREATE:"".concat(f,"/manager/ramshiki/create/"),manager_ramshiki_delete:function(e){return"".concat(f,"/manager/ramshiki/").concat(e,"/")},MANAGER_SHIFT_LIST:"".concat(f,"/manager/shift_list/"),MANAGER_STOCK:"".concat(f,"/manager/stock/"),MANAGER_STOCK_SET_LUMBER_PRICE:"".concat(f,"/manager/stock/set_price/"),MANAGER_SALE_LIST:"".concat(f,"/manager/sale_list/"),MANAGER_RAWSTOCK_INCOME_INIT_DATA:"".concat(f,"/manager/rawstock/timber/create_income/init_data/"),MANAGER_RAWSTOCK_INCOME_CREATE:"".concat(f,"/manager/rawstock/timber/create_income/"),manager_rawstock_income_delete:function(e){return"".concat(f,"/manager/rawstock/timber/income_timbers/").concat(e,"/")},MANAGER_SHIFT_CREATE_DATA:"".concat(f,"/manager/shifts/create/init_data/"),MANAGER_SHIFT_CREATE:"".concat(f,"/manager/shifts/create/"),manager_shift_delete:function(e){return"".concat(f,"/manager/shifts/").concat(e,"/")},MANAGER_SALE_INIT_DATA:"".concat(f,"/manager/sales/create/init_data/"),MANAGER_SALE_CREATE:"".concat(f,"/manager/sales/create/"),manager_delete_sale:function(e){return"".concat(f,"/manager/sales/").concat(e,"/")},MANAGER_CASH_RECORDS_LIST:"".concat(f,"/manager/cash_records/list/"),MANAGER_CASH_RECORDS_CREATE:"".concat(f,"/manager/cash_records/create_expense/"),manager_delete_expense:function(e){return"".concat(f,"/manager/cash_records/").concat(e,"/")},MANAGER_RESAW_CREATE:"".concat(f,"/manager/resaws/create/"),manager_delete_resaw:function(e){return"".concat(f,"/manager/resaws/").concat(e,"/")},CAPO_BOSS_PAYOUT_MANAGER_CREATE:"".concat(f,"/boss_capo/cash_records/payout_to_manager/"),boss_delete_manager_payout:function(e){return"".concat(f,"/boss_capo/cash_records/").concat(e,"/")}},y=function(){return{logIn:function(e){var t=e.username,a=e.password;return g.a.post(_.JWT_AUTH,{username:t,password:a}).then((function(e){if(e.status<200||e.status>=300)throw new Error(e);return{token:e.data.token,user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])})).then((function(e){return localStorage.setItem("token",e.token),e.user}))},checkToken:function(e){return g.a.post(_.JWT_CHECK_TOKEN,{token:e}).then((function(e){return{user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])}))},logOut:function(){localStorage.removeItem("token")},signUp:function(e){var t=e.email,a=e.phone;return g.a.post(_.SIGNUP,{email:t,phone:a}).then((function(e){return e.data})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]])}))},checkAuth:function(e){var t=localStorage.getItem("token");if(!t)throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return g.a.post(_.JWT_CHECK_TOKEN,{token:t}).then((function(t){var a=t.data.user,n=a.group;if(-1===e.indexOf(n))throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return a})).catch((function(e){throw new Error(e.message)}))}}},k=a(25),N=p.a.mark(w),S=p.a.mark(O),T=p.a.mark(R);function w(e,t){var a,n;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=t.data,l.next=3,Object(E.c)(k.default.resetAuthErrors());case 3:return l.prev=3,l.next=6,Object(E.b)(e.logIn,a);case 6:return n=l.sent,l.next=9,Object(E.c)(k.default.loginSuccess(n));case 9:return l.next=11,Object(E.c)(k.default.toggleModal(!1));case 11:l.next=17;break;case 13:return l.prev=13,l.t0=l.catch(3),l.next=17,Object(E.c)(k.default.loginFailure(l.t0.message));case 17:case"end":return l.stop()}}),N,null,[[3,13]])}function O(e,t){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.b)(e.logOut);case 3:return t.next=5,Object(E.c)(k.default.logoutSuccess());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(E.c)(k.default.logoutFailure(t.t0.message));case 11:case"end":return t.stop()}}),S,null,[[0,7]])}function R(e,t){var a,n;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=t.payload,l.prev=1,l.next=4,Object(E.b)(e.checkToken,a);case 4:return n=l.sent,l.next=7,Object(E.c)(k.default.checkTokenSuccess(n));case 7:l.next=13;break;case 9:return l.prev=9,l.t0=l.catch(1),l.next=13,Object(E.c)(k.default.checkTokenFail(l.t0.message));case 13:case"end":return l.stop()}}),T,null,[[1,9]])}var j=p.a.mark(x),C=y();function x(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.d)(k.AuthTypes.LOGIN_REQUEST,w,C),Object(E.d)(k.AuthTypes.LOGOUT_REQUEST,O,C),Object(E.d)(k.AuthTypes.CHECK_TOKEN_REQUEST,R,C)]);case 2:case"end":return e.stop()}}),j)}var A=a(436),I=Object(i.combineReducers)({auth:a(25).reducer,form:A.a}),D=a(191),L=a(14),V=a(15),F=a(5),q=a(17),M=a(16),Q=a(429),W=a(77),J=a(433),P=a(432),H=a(428),U=a(386),G=a(387),z=a(389),B=(a(383),a(437),function(e){var t=e.label,a=e.placeholder,n=e.input,l=e.multiline,r=e.meta,s=r.touched,o=r.invalid,m=r.error,u=e.labelClass,i=Object(W.a)(e,["label","placeholder","input","multiline","meta","labelClass"]);return c.a.createElement(H.a,Object.assign({fullWidth:!0,label:t,placeholder:a,error:s&&o,helperText:s&&m},n,i,{multiline:l,InputLabelProps:{className:u}}))});function K(e){var t=e.parentSubmit,a=e.pristine,n=(e.reset,e.submitting),l=e.handleSubmit;e.eventFetching,e.eventError,e.message;return c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},c.a.createElement("form",{onSubmit:l(t),className:""},c.a.createElement(J.a,{component:B,label:"\u041b\u043e\u0433\u0438\u043d",name:"username",margin:"dense"}),c.a.createElement(J.a,{component:B,label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",margin:"dense",type:"password"}),c.a.createElement("button",{className:"btn btn-m mt-2 font-900 shadow-s bg-highlight text-wrap",type:"submit",disabled:a||n},"\u0412\u043e\u0439\u0442\u0438"))))}function Y(e){var t=e.startDate,a=e.endDate,n=e.setData,l=e.showResults;return c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement(H.a,{label:"\u0414\u0430\u0442\u0430 \u0441",type:"date",name:"startDate",className:"mr-2",value:t,onChange:n,InputLabelProps:{className:"",shrink:!0}}),c.a.createElement(H.a,{label:"\u0414\u0430\u0442\u0430 \u0434\u043e",type:"date",name:"endDate",className:"mr-2",value:a,onChange:n,InputLabelProps:{className:"",shrink:!0}}),c.a.createElement("button",{className:"btn btn-xs bg-highlight",onClick:l},"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"))}function X(e){var t=e.date,a=e.setData,n=e.showResults;return c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement(H.a,{type:"date",name:"date",className:"mr-2",value:t,onChange:a,InputLabelProps:{className:"",shrink:!0}}),c.a.createElement("button",{className:"btn btn-xs bg-highlight",onClick:n},"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"))}function Z(e){var t=Object(m.g)();return c.a.createElement("div",{className:"card-style mx-5 my-3 pt-2",onClick:function(){t.push(e.to)},style:{background:"white",width:"300px",color:"white","font-weight":"bold","font-size":"1em","text-align":"center","word-break":"break-word","border-radius":"15px","line-height":"12px"}},c.a.createElement("h5",null,e.title))}function $(e){var t=e.user,a=e.ramaToSee,n=!1;return t.is_manager&&t.rama_id===a.id&&(n=!0),c.a.createElement("div",{className:" "},c.a.createElement("div",{className:"my-4"},c.a.createElement("h3",{className:"text-center"},"\u0421\u043a\u043b\u0430\u0434"),c.a.createElement(Z,{title:"\u0421\u043a\u043b\u0430\u0434. \u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043e\u0441\u0442\u0430\u0442\u043a\u0438",to:"/manager/stock/"})),t.can_see_rama_raw_stock.includes(a.id)&&c.a.createElement("div",{className:"my-4"},c.a.createElement("h3",{className:"text-center"},"\u041a\u0440\u0443\u0433\u043b\u044b\u0439 \u043b\u0435\u0441 \u0438 \u043f\u043b\u0430\u043d"),n&&c.a.createElement(Z,{title:"\u041f\u0440\u0438\u0445\u043e\u0434 \u043a\u0440\u0443\u0433\u043b\u043e\u0433\u043e \u043b\u0435\u0441\u0430",to:"/manager/rawstock/create_income/"}),c.a.createElement(Z,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0433\u0440\u0443\u0437\u043e\u043a \u043a\u0440\u0443\u0433\u043b\u043e\u0433\u043e \u043b\u0435\u0441\u0430",to:"/manager/rawstock/income_timbers/"}),c.a.createElement(Z,{title:"\u041f\u043b\u0430\u043d",to:"/manager/quotas/overview/"})),t.can_see_rama_shift.includes(a.id)&&c.a.createElement("div",{className:"my-4"},c.a.createElement("h3",{className:"text-center"},"\u0421\u043c\u0435\u043d\u044b"),c.a.createElement(Z,{title:"\u0421\u043c\u0435\u043d\u044b \u0441\u043f\u0438\u0441\u043e\u043a",to:"/manager/shift_list/"}),n&&c.a.createElement(Z,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043c\u0435\u043d\u0443",to:"/manager/shift/create_shift/"})),t.can_see_rama_resaws.includes(a.id)&&c.a.createElement("div",{className:"my-4"},c.a.createElement(Z,{title:"\u041f\u0435\u0440\u0435\u043f\u0438\u043b",to:"/manager/resaws/create/"})),t.can_see_rama_sales.includes(a.id)&&c.a.createElement("div",{className:"my-4"},c.a.createElement("h3",{className:"text-center"},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"),n&&c.a.createElement(Z,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443",to:"/manager/sales/create_sale/"}),c.a.createElement(Z,{title:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430",to:"/manager/sales/calc/"}),c.a.createElement(Z,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/manager/sale_list/"})),t.can_see_rama_cash.includes(a.id)&&c.a.createElement("div",{className:"my-4"},c.a.createElement("h3",{className:"text-center"},"\u041e\u0442\u0447\u0435\u0442\u044b \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),n&&[c.a.createElement(Z,{title:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",to:"/manager/expenses/"}),c.a.createElement(Z,{title:"\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u043c\u0449\u0438\u043a\u043e\u0432",to:"/manager/ramshik_payments/"})],c.a.createElement(Z,{title:"\u0418\u0442\u043e\u0433\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c",to:"/manager/daily_report/"})))}function ee(e){var t=e.user,a=e.setRamaToSee,n=e.ramaToSee;return t.is_ramshik?c.a.createElement(m.a,{to:"/ramshik/main"}):t.can_see_rama_stock?n.id?c.a.createElement($,{user:t,ramaToSee:n}):c.a.createElement("div",{className:"my-3"},t.can_see_rama_stock.map((function(e){return c.a.createElement("div",{className:"card card-style",onClick:function(){return a(e)}},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"text-center"},e.name)))}))):void 0}K=Object(P.a)({form:"loginForm",validate:function(e){var t={};return["username","password"].forEach((function(a){e[a]||(t[a]="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")})),t}})(K);var te=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.login=n.login.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){}},{key:"login",value:function(){this.props.login(this.props.form.values)}},{key:"render",value:function(){var e=this.props.state.auth,t=e.isLoggedIn,a=e.fetching,n=e.user,l=e.ramaToSee;return a?c.a.createElement(Q.a,null):t?c.a.createElement(ee,{user:n,logout:this.props.logout,setRamaToSee:this.props.setRamaToSee,ramaToSee:l}):c.a.createElement(K,{parentSubmit:this.login})}}]),a}(l.Component),ae=Object(u.b)((function(e){return{routing:e.routing,state:e,form:e.form.loginForm}}),(function(e){return{login:function(t){return e(k.default.loginRequest(t))},logout:function(t){return e(k.default.logoutRequest(t))},checkToken:function(t){return e(k.default.checkTokenRequest(t))},setRamaToSee:function(t){return e(k.default.setRamaToSee(t))}}}))(te);function ne(e){var t=Object(m.g)();return c.a.createElement("div",{className:"d-flex justify-content-between align-items-baseline px-3 py-2"},c.a.createElement("h4",{onClick:function(){t.push("/")}},e.ramaToSee.name),e.ramaToSee.name?c.a.createElement("h6",{onClick:function(){e.setRamaToSee({}),t.push("/")}},"\u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u0438\u043b\u043e\u0440\u0430\u043c"):c.a.createElement("h4",null,"\u041f\u0438\u043b\u043e\u0440\u0430\u043c\u044b"),c.a.createElement("button",{className:"btn btn-xs bg-red1-light",style:{lineHeight:"13px"},onClick:function(){e.logout(),t.push("/")}},c.a.createElement("span",{className:"py-0 my-0"},c.a.createElement("span",{className:"d-block"},e.user.nickname),"\u0432\u044b\u0439\u0442\u0438")))}var le=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={modalOpen:!1},n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.checkToken(e)}},{key:"render",value:function(){var e=this.props.auth,t=(e.isLoggedIn,e.fetching,e.user),a=e.ramaToSee;return t?c.a.createElement("div",{className:"header"},c.a.createElement(ne,{logout:this.props.logout,user:t,ramaToSee:a,setRamaToSee:this.props.setRamaToSee})):"net login"}}]),a}(l.Component),ce=Object(u.b)((function(e){return{state:e,auth:e.auth,routing:e.routing}}),(function(e){return{checkToken:function(t){return e(k.default.checkTokenRequest(t))},logout:function(){return e(k.default.logoutRequest())},setRamaToSee:function(t){return e(k.default.setRamaToSee(t))}}}))(le),re=a(8),se=a(89),oe=function(e){if(e&&"undefined"!==typeof e.response){var t={status:e.response.status,statusText:e.response.statusText,message:null,response:e.response};if("message"in e.response.data)t.message=JSON.stringify(e.response.data.message);else{var a="";for(var n in e.response.data)a+="".concat(n,": ").concat(e.response.data[n],". ");t.message=a}return t}return{status:"Connection Error",statusText:"An error occurred while sending your data!",message:"An error occurred while sending your data!"}},me=function(e){var t=new URLSearchParams;return null!=e&&Object.keys(e).forEach((function(a){null===e[a]||e[a]instanceof Array||t.append(a,e[a]),null!==e[a]&&e[a]instanceof Array&&(delete t[a],e[a].map((function(e){return""!==e&&t.append(a,e),null})))})),t};function ue(e){var t=e.lastOperations;return c.a.createElement("div",{className:"card card-style mt-0"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),t.length>0?c.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"16px"}},c.a.createElement("thead",{className:""},c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),c.a.createElement("th",null,"\u0422\u0438\u043f"),c.a.createElement("th",null,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",{className:"text-nowrap"},e.created_at),c.a.createElement("td",null,"withdraw_employee"===e.record_type?"\u041e\u0431\u043d\u0430\u043b \u0440\u0430\u043c\u0449\u0438\u043a\u0443":"\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u043c\u0449\u0438\u043a\u0443 \u0441\u043e \u0441\u043c\u0435\u043d\u044b"),c.a.createElement("td",null,e.employee),c.a.createElement("td",{className:"withdraw_employee"===e.record_type?"color-red1-light font-16":"color-green1-light font-16"},"withdraw_employee"===e.record_type?"-"+e.amount:"+"+e.amount))})))):c.a.createElement("div",null,"\u041d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438")))}function ie(e){var t=e.newCash,a=e.newName,n=e.createRamshik,r=e.setData,s=Object(l.useState)(!1),o=Object(se.a)(s,2),m=o[0],u=o[1];return m?c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"  my-1"},c.a.createElement(H.a,{type:"text",name:"newName",value:a,onChange:r,label:"\u0418\u043c\u044f",fullWidth:!0,className:"mb-2"}),c.a.createElement(H.a,{type:"number",name:"newCash",value:t,onChange:r,label:"\u0411\u0430\u043b\u0430\u043d\u0441",fullWidth:!0})),c.a.createElement("div",{className:"d-flex justify-content-between mt-3"},c.a.createElement("button",{className:"btn btn-s bg-highlight",onClick:function(){return u(!1),n()}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),c.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return u(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430")))):c.a.createElement("div",{className:"d-flex justify-content-center my-3"},c.a.createElement("button",{className:"btn btn-l bg-highlight",onClick:u},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0440\u0430\u043c\u0449\u0438\u043a\u0430"))}var de=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={employees:[],activeEmployee:null,amount:0,last_payouts:[],message:null,error:null,newName:"",newCash:0},n.payout=n.payout.bind(Object(F.a)(n)),n.deleteRamshik=n.deleteRamshik.bind(Object(F.a)(n)),n.createRamshik=n.createRamshik.bind(Object(F.a)(n)),n.setData=n.setData.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.EMPLOYEE_PAYOUT_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState(Object(re.a)(Object(re.a)({},e.state),{},{employees:a.employees,last_payouts:a.last_payouts}))}))}},{key:"payout",value:function(){var e=this,t=this.state,a=t.activeEmployee,n=t.amount,l=localStorage.getItem("token"),c=new FormData;c.append("employee",a.id),c.append("amount",n),g()({method:"post",url:_.EMPLOYEE_PAYOUT,data:c,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(l)}}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{message:t.data.message,employees:t.data.employees,activeEmployee:null,last_payouts:t.data.last_payouts}))})).catch((function(t){var a=new Error(t);throw a.data=oe(t),e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"}),a}))}},{key:"setData",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"createRamshik",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"post",url:_.EMPLOYEE_CREATE,data:{nickname:this.state.newName,cash:this.state.newCash},headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(t){e.setState({employees:t.data.employees,activeEmployee:null})}))}},{key:"deleteRamshik",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"delete",url:_.manager_ramshiki_delete(this.state.activeEmployee.id),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(t){e.setState({employees:t.data.employees,activeEmployee:null})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.employees,n=t.activeEmployee,l=t.amount,r=t.message,s=t.last_payouts;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u043c\u0449\u0438\u043a\u043e\u0432"),c.a.createElement("div",{className:""},a.length>0&&c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0440\u0430\u043c\u0449\u0438\u043a"),c.a.createElement("th",null,"\u0431\u0430\u043b\u0430\u043d\u0441")),c.a.createElement("tbody",null,a.map((function(t){return c.a.createElement("tr",{className:n&&n.id===t.id&&"bg-green1-light",onClick:function(){return e.setState(Object(re.a)(Object(re.a)({},e.state),{},{activeEmployee:t,message:null}))}},c.a.createElement("td",null,t.nickname),c.a.createElement("td",null,t.cash," \u0440"))})))),n&&c.a.createElement("div",{className:"w-100"},c.a.createElement("span",{className:"font-16 mr-3"},n.nickname),c.a.createElement("span",{className:"font-16 font-600"},n.cash," \u0440"),c.a.createElement("div",{className:"d-flex justify-content-start mt-2 mb-4"},c.a.createElement(H.a,{type:"number",className:"mr-3",value:l,onChange:function(t){return e.setState(Object(re.a)(Object(re.a)({},e.state),{},{amount:t.target.value}))}}),c.a.createElement("button",{className:"d-block btn btn-s bg-green2-light",onClick:this.payout},"\u0412\u044b\u0434\u0430\u0442\u044c")),c.a.createElement("button",{className:"d-block btn btn-s bg-red1-light mt-2",onClick:this.deleteRamshik},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0430\u043c\u0449\u0438\u043a\u0430")),r&&c.a.createElement("p",{className:"color-dark text-center"},r)))),c.a.createElement(ie,{newName:this.state.newName,newCash:this.state.newCash,setData:this.setData,createRamshik:this.createRamshik}),c.a.createElement(ue,{lastOperations:s}))}}]),a}(l.Component),he=a(43),be=a(142),pe=a.n(be),Ee=function(e,t){return pe.a.xor(e,[t])},ve=function(e,t){var a=null;return e.map((function(e){e.id==t&&(a=e)})),a},ge=function(e,t){for(var a=!1,n=-1,l=0;l<e.length;l++)if(e[l].id===t.id){a=!0,n=l;break}return a?(e.splice(n,1),e):[].concat(Object(he.a)(e),[t])};function fe(e,t){var a=ve(e,t.id),n=e.indexOf(a);return e=[].concat(Object(he.a)(e.slice(0,n)),[t],Object(he.a)(e.slice(n+1)))}function _e(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=n+"-"+a+"-"+t}function ye(e){var t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}function ke(e){var t=e.record;return c.a.createElement("tr",null,c.a.createElement("td",{style:{lineHeight:"15px"}},"larch"===t.wood_species?c.a.createElement("span",{className:"d-block color-brown1-light"},"\u043b\u0438\u0441\u0442\u0432"):c.a.createElement("span",{className:"d-block color-green1-light"},"\u0441\u043e\u0441\u043d\u0430"),t.lumber.includes("\u0434\u043e\u0441\u043a\u0430")?c.a.createElement("span",{className:"font-italic"},t.lumber):c.a.createElement("span",{className:""},t.lumber)),c.a.createElement("td",null,t.quantity,c.a.createElement("span",{className:"font-10"}," \u0448\u0442")),c.a.createElement("td",null,t.volume,c.a.createElement("span",{className:"font-10"}," \u043c3")),c.a.createElement("td",null,t.rate,c.a.createElement("span",{className:"font-10"}," \u0440")),c.a.createElement("td",null,t.total_cash,c.a.createElement("span",{className:"font-10"}," \u0440")))}function Ne(e){var t=e.shift,a=e.user,n=e.deleteShift;return c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content mb-1"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("p",{className:"color-black mb-0 font-16"},"\u0414\u0430\u0442\u0430: ",t.date," ",t.shift_type),a.is_manager&&c.a.createElement("button",{className:"btn btn-s bg-red1-light mr-2 text-uppercase",onClick:function(){return n(t.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c")),c.a.createElement("p",{className:"mb-0 color-black"},"\u0420\u0430\u0431\u043e\u0442\u0430\u043b\u0438:",t.employees.map((function(e){return c.a.createElement("span",{className:"mx-1"},e)}))),c.a.createElement("p",{className:"color-black mb-0 font-13 d-flex justify-content-between",style:{lineHeight:"15px"}},c.a.createElement("span",null,c.a.createElement("span",{className:"d-block mb-1"},"\u041e\u0431\u044a\u0435\u043c: ",c.a.createElement("span",{className:"d-block font-600 font-14"},t.volume," m3")),c.a.createElement("span",null,"\u041e\u0431\u044a\u0435\u043c \u0431\u0435\u0437 \u0437\u0430\u0431\u043e\u0440\u043a\u0438: ",c.a.createElement("span",{className:"d-block font-600 font-14"},t.volume_without_zabor," m3"))),c.a.createElement("span",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: ",c.a.createElement("span",{className:"d-block font-600 font-14"},t.back_calc_cash," \u0440")),c.a.createElement("span",null,"\u041d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e: ",c.a.createElement("span",{className:"d-block font-600 font-14"},t.back_calc_cash_per_employee," \u0440")))),c.a.createElement("div",{className:"content mt-0"},c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0441\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.lumber_records.map((function(e){return c.a.createElement(ke,{record:e})}))))))}function Se(e){var t=e.shiftList,a=e.user,n=e.deleteShift;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("h4",{className:"my-3 text-center"},"\u0421\u043c\u0435\u043d\u044b  (",t.length,")"),t.length>0&&t.map((function(e){return c.a.createElement(Ne,{shift:e,user:a,deleteShift:n})})))}var Te=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={shiftList:[],startDate:"",endDate:"",message:null,error:null},n.setData=n.setData.bind(Object(F.a)(n)),n.showResults=n.showResults.bind(Object(F.a)(n)),n.deleteShift=n.deleteShift.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=new Date,n=new Date;n.setDate(a.getDate()-1);var l=ye(n),c=ye(a),r=me({rama:this.props.ramaToSee.id,date_before:c,date_after:l});g()({method:"get",url:_.SHIFTS,headers:{Authorization:"JWT ".concat(t)},params:r}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{shiftList:t.data.results,startDate:l,endDate:c}))}))}},{key:"setData",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"showResults",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id,date_before:this.state.endDate,date_after:this.state.startDate});g()({method:"get",url:_.SHIFTS,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{shiftList:t.data.results}))}))}},{key:"deleteShift",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.manager_shift_delete(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(e){t.setState({shiftList:e.data.shifts})}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement(Y,{startDate:this.state.startDate,endDate:this.state.endDate,setData:this.setData,showResults:this.showResults}))),c.a.createElement(Se,{shiftList:this.state.shiftList,user:this.props.user,deleteShift:this.deleteShift}))}}]),a}(l.Component),we=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(Te),Oe=a(430);function Re(e){var t=e.lumber,a=e.showNull,n=e.changeMarketCost,l=e.user,r=!0;0!=t.current_stock_quantity||a||(r=!1);var s="pine"===t.wood_species?"\u0441\u043e\u0441\u043d\u0430":"\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430",o="\u0441\u043e\u0441\u043d\u0430"===s?"color-green1-light":"color-brown1-light";return r&&c.a.createElement("tr",null,c.a.createElement("td",null,t.name,c.a.createElement("span",{className:"d-block font-italic font-500 "+o},s)),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.current_stock_volume.toFixed(4)),c.a.createElement("span",{className:"d-block"},"\u043c3")),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.current_stock_quantity),"\u0448\u0442"),c.a.createElement("td",null,l.is_boss&&c.a.createElement(H.a,{type:"number",className:"",value:t.market_cost>0&&t.market_cost,onChange:function(e){return n(e,t.id)}}),l.is_kladman&&c.a.createElement("span",{className:"font-16"},t.market_cost)),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.stock_total_cash.toFixed(0)),"\u0440"))}var je=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={lumbers:[],showNull:!1,message:null,error:null},n.changeMarketCost=n.changeMarketCost.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id});g()({method:"get",url:_.STOCK,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState({lumbers:t.data.results})}))}},{key:"changeMarketCost",value:function(e,t){var a=this.state.lumbers,n=ve(a,t),l=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_STOCK_SET_LUMBER_PRICE,data:{lumber:t,market_cost:parseInt(e.target.value)||0},headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(l)}}).then((function(e){n=e.data})),n.market_cost=parseInt(e.target.value)||0,n.stock_total_cash=n.market_cost*n.current_stock_volume,a=fe(a,n),this.setState({lumbers:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,n=t.showNull,l=0,r=0;return a.map((function(e){l+=e.current_stock_volume,r+=e.stock_total_cash})),c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h4",{className:"mb-2"},"\u0421\u043a\u043b\u0430\u0434"),c.a.createElement("div",{className:"my-0"},c.a.createElement("label",null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0443\u043b\u0435\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"),c.a.createElement(Oe.a,{checked:this.state.showNull,onChange:function(){return e.setState({showNull:!e.state.showNull})},name:"showNull"}))),c.a.createElement("div",{className:"d-flex justify-content-start"},a.length>0&&c.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"17px"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u043f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0442\u043e\u0438\u043c\u043ec\u0442\u044c \u043e\u0431\u0449\u0430\u044f")),c.a.createElement("tbody",null,a.map((function(t){return c.a.createElement(Re,{lumber:t,showNull:n,changeMarketCost:e.changeMarketCost,user:e.props.user})})),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},"\u0418\u0442\u043e\u0433\u043e")),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},l.toFixed(3)),c.a.createElement("span",{className:"d-block"},"\u043c3")),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},r.toFixed(0)),c.a.createElement("span",{className:"d-block"},"\u0440\u0443\u0431\u043b\u0435\u0439")))))))))}}]),a}(l.Component),Ce=Object(u.b)((function(e){return{user:e.auth.user,ramaToSee:e.auth.ramaToSee}}),(function(e){return{dispatch:e}}))(je);function xe(e){var t=e.timber_record,a=e.calcType,n=e.calcRowAndTotal,l=(e.key,c.a.createElement("tr",null,c.a.createElement("td",{style:{lineHeight:"15px"}},t.diameter,"\u0421\u043e\u0441\u043d\u0430"===t.wood_species?c.a.createElement("span",{className:"font-12 font-italic color-green1-light d-block"},t.wood_species):c.a.createElement("span",{className:"font-12 font-italic color-brown1-light d-block"},t.wood_species)),c.a.createElement("td",{className:""},c.a.createElement("input",{style:{color:"#6c6c6c"},type:"number",className:"w-75",onChange:function(e){return n(e,t)},value:t.quantity>0&&t.quantity})),c.a.createElement("td",{className:""},t.total_volume?t.total_volume.toFixed(4):0," m3")));return"mixed"===a&&"\u041b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"===t.wood_species|"\u0421\u043e\u0441\u043d\u0430"===t.wood_species||"pine"===a&&"\u0421\u043e\u0441\u043d\u0430"===t.wood_species||"larch"===a&&"\u041b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"===t.wood_species?l:null}function Ae(e){var t=e.timbers,a=e.calcRowAndTotal,n=e.totalQnty,l=e.totalVolume,r=e.calcType;return c.a.createElement("table",{className:"table table-sm mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"D"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c")),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement(xe,{timber_record:e,calcRowAndTotal:a,calcType:r,key:t})})),c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"2"},c.a.createElement("span",{className:"font-17"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",n)),c.a.createElement("td",null,c.a.createElement("span",{className:"font-17"},"\u041e\u0431\u044a\u0435\u043c: ",l?l.toFixed(5):0)))))}function Ie(e){var t=e.timbers;return c.a.createElement("table",{className:"table table-sm mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"D"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c")),c.a.createElement("tbody",null,t.map((function(e,t){return e.quantity>0&&c.a.createElement("tr",null,c.a.createElement("td",{style:{lineHeight:"15px"}},e.diameter,"\u0421\u043e\u0441\u043d\u0430"===e.wood_species?c.a.createElement("span",{className:"font-12 font-italic color-green1-light d-block"},e.wood_species):c.a.createElement("span",{className:"font-12 font-italic color-brown1-light d-block"},e.wood_species)),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.total_volume?e.total_volume.toFixed(5):0," m3"))}))))}function De(e){var t=e.incomeTimber,a=e.saveData,n=e.back,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u041e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",t.totalQnty," \u0448\u0442"),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c: ",t.totalVolume.toFixed(5)," m3"),c.a.createElement(Ie,{timbers:t.raw_timber_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:n,className:"btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Le(e){var t=e.createdIncome,a=e.message,n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u0438\u0445\u043e\u0434 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.created_at),c.a.createElement("p",{className:n},"\u041e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",t.quantity," \u0448\u0442"),c.a.createElement("p",{className:n},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",t.volume," \u043c3"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ie,{timbers:t.timber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}var Ve=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={timbers:[],initTimbers:[],calcType:"pine",totalQnty:0,totalVolume:0,dataToSave:null,createdIncome:null},n.calcRowAndTotal=n.calcRowAndTotal.bind(Object(F.a)(n)),n.preSave=n.preSave.bind(Object(F.a)(n)),n.switchCalc=n.switchCalc.bind(Object(F.a)(n)),n.saveData=n.saveData.bind(Object(F.a)(n)),n.back=n.back.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_RAWSTOCK_INCOME_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({timbers:a.timbers,initTimbers:a.timbers})}))}},{key:"calcRowAndTotal",value:function(e,t){var a=this.state.timbers;t.quantity=parseInt(e.target.value),t.quantity>0&&(t.total_volume=parseFloat(t.quantity*t.volume)),a=fe(a,t);var n=0,l=0;a.map((function(e){n+=parseInt(e.quantity?e.quantity:0),e.quantity>0&&(l+=parseFloat(e.total_volume?e.total_volume:0))})),this.setState(Object(re.a)(Object(re.a)({},this.state),{},{timbers:a,totalQnty:n,totalVolume:l,message:null}))}},{key:"preSave",value:function(){var e=this.state,t={raw_timber_records:e.timbers,totalQnty:e.totalQnty,totalVolume:e.totalVolume};this.setState(Object(re.a)(Object(re.a)({},this.state),{},{dataToSave:t}))}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_RAWSTOCK_INCOME_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b.",createdIncome:t.data.income_timber})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState(Object(re.a)(Object(re.a)({},this.state),{},{timbers:this.state.initTimbers,totalQnty:0,note:"",dataToSave:null}))}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"switchCalc",value:function(e){this.setState({timbers:this.state.timbers,totalQnty:0,calcType:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.timbers,n=t.totalQnty,l=t.totalVolume,r=t.calcType,s=t.createdIncome,o=t.dataToSave,m=t.message;return c.a.createElement("div",null,s?c.a.createElement(Le,{createdIncome:s,message:m}):o?c.a.createElement(De,{incomeTimber:o,saveData:this.saveData,back:this.back}):a.length>0&&c.a.createElement("div",{className:"card card-style mb-1 mt-2"},c.a.createElement("div",{className:"content mb-1"},c.a.createElement("h3",null,"\u041f\u0440\u0438\u0445\u043e\u0434 \u043a\u0440\u0443\u0433\u043b\u043e\u0433\u043e"),c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement("button",{className:"mixed"===r?"btn btn-s bg-highlight mx-2":" mx-2 btn btn-s border",onClick:function(){return e.switchCalc("mixed")}},"\u041f\u0435\u0440\u0435\u0441\u043e\u0440\u0442"),c.a.createElement("button",{className:"larch"===r?"btn btn-s bg-highlight mx-2":" mx-2 btn btn-s border",onClick:function(){return e.switchCalc("larch")}},"\u0432\u0441\u0435 \u043b\u0438\u0441\u0442\u0432\u044f\u043a"),c.a.createElement("button",{className:"pine"===r?"btn btn-s bg-highlight mx-2":" mx-2 btn btn-s border",onClick:function(){return e.switchCalc("pine")}},"\u0432\u0441\u0435 \u0441\u043e\u0441\u043d\u0430")),c.a.createElement(Ae,{timbers:a,calcRowAndTotal:this.calcRowAndTotal,totalQnty:n,calcType:r,totalVolume:l})),n>0&&c.a.createElement("div",{className:"content mt-0"},c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0414\u0430\u043b\u0435\u0435"))))}}]),a}(l.Component);function Fe(e){var t=e.list,a=e.deleteIncome,n=e.user;return t.length>0&&c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},"\u0432\u0441\u0435\u0433\u043e")),t.map((function(e){return c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},c.a.createElement("p",{className:"mb-1 color-black font-15"},"\u0414\u0430\u0442\u0430: ",e.created_at),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("p",{className:"mb-1 color-black font-15"},e.who),n.is_boss&&c.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return a(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),c.a.createElement("p",{className:"mb-2 color-black font-15 d-flex justify-content-between"},c.a.createElement("span",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",e.quantity," \u0448\u0442"),c.a.createElement("span",null,"\u041e\u0431\u044a\u0435\u043c: ",e.volume," m3")),c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0414\u0438\u0430\u043c\u0435\u0442\u0440/\u043f\u043e\u0440\u043e\u0434\u0430"),c.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("th",null,"\u041e\u0431\u044a\u0435\u043c")),c.a.createElement("tbody",null,e.timber_records.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.timber),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume," \u043c3"))}))))))})))}var qe=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={incomeTimberList:[],startDate:"",endDate:"",message:null,error:null},n.setData=n.setData.bind(Object(F.a)(n)),n.showResults=n.showResults.bind(Object(F.a)(n)),n.deleteIncome=n.deleteIncome.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=new Date,n=new Date;n.setDate(a.getDate()-1);var l=ye(n),c=ye(a),r=me({rama:this.props.ramaToSee.id,created_at_before:c,created_at_after:l});g()({method:"get",url:_.INCOME_TIMBERS,headers:{Authorization:"JWT ".concat(t)},params:r}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{incomeTimberList:t.data.results,startDate:l,endDate:c}))}))}},{key:"setData",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"showResults",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id,created_at_before:this.state.endDate,created_at_after:this.state.startDate});g()({method:"get",url:_.INCOME_TIMBERS,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{incomeTimberList:t.data.results}))}))}},{key:"deleteIncome",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.manager_rawstock_income_delete(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(e){t.setState({incomeTimberList:e.data.income_timbers})}))}},{key:"render",value:function(){var e=this.state.incomeTimberList;return c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement(Y,{startDate:this.state.startDate,endDate:this.state.endDate,setData:this.setData,showResults:this.showResults}))),c.a.createElement(Fe,{list:e,user:this.props.user,deleteIncome:this.deleteIncome}))}}]),a}(l.Component),Me=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(qe);function Qe(e){var t=e.data,a=e.wood;return c.a.createElement("div",null,c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,a),c.a.createElement("th",null,"\u041f\u043b\u0430\u043d"),c.a.createElement("th",null,"\u041e\u0442\u0433\u0440\u0443\u0436\u0435\u043d\u043e"),c.a.createElement("th",null,"\u0411\u0430\u043b\u0430\u043d\u0441")),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"\u0411\u0440\u0443\u0441"),c.a.createElement("td",null,t.total_volume_quota_brus," m3"),c.a.createElement("td",null,t.total_volume_sold_brus," m3"),c.a.createElement("td",null,t.brus_balance&&t.brus_balance.toFixed(4)," m3")),c.a.createElement("tr",null,c.a.createElement("td",null,"\u0414\u043e\u0441\u043a\u0430(\u0431\u0435\u0437 \u0434\u044e\u0439\u043c\u043e\u0432\u043a\u0438)"),c.a.createElement("td",null,t.total_volume_quota_doska," m3"),c.a.createElement("td",null,t.total_volume_sold_doska," m3"),c.a.createElement("td",null,t.doska_balance&&t.doska_balance.toFixed(4)," m3")))))}function We(e){var t=e.records,a=e.deletePayout,n=e.user;return c.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"13px"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),c.a.createElement("th",null,"\u0422\u0438\u043f"),c.a.createElement("th",null,"\u041a\u0442\u043e \u0441\u043e\u0437\u0434\u0430\u043b"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",{className:"text-nowrap"},e.created_at),c.a.createElement("td",null,e.record_type),c.a.createElement("td",null,e.who),c.a.createElement("td",{className:"\u0412\u044b\u0432\u043e\u0434 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043e\u0442 \u043a\u043b\u0430\u0434\u043c\u044d\u043d\u0430/\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"===e.record_type?"color-red1-light font-16":"color-green1-light font-16"},e.amount," \u0440"),n.is_boss&&c.a.createElement("td",null,c.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return a(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}))))}var Je=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={pine_data:null,larch_data:null,manager_balance:null,cash_records:[],amount:0,message:null,error:null},n.payoutToManager=n.payoutToManager.bind(Object(F.a)(n)),n.deletePayout=n.deletePayout.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id});g()({method:"get",url:_.QUOTAS,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){e.setState({pine_data:t.data.pine_data,larch_data:t.data.larch_data,manager_balance:t.data.manager_balance,cash_records:t.data.cash_records})}))}},{key:"payoutToManager",value:function(){var e=this,t=this.state.amount,a=localStorage.getItem("token"),n=new FormData;n.append("rama",this.props.ramaToSee.id),n.append("amount",t),g()({method:"post",url:_.CAPO_BOSS_PAYOUT_MANAGER_CREATE,data:n,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{manager_balance:t.data.manager_balance,cash_records:t.data.cash_records,amount:0}))})).catch((function(t){var a=new Error(t);throw a.data=oe(t),e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"}),a}))}},{key:"deletePayout",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.boss_delete_manager_payout(e),headers:{Authorization:"JWT ".concat(a)}}).then((function(e){t.setState(Object(re.a)(Object(re.a)({},t.state),{},{manager_balance:e.data.manager_balance,cash_records:e.data.cash_records,amount:0}))}))}},{key:"render",value:function(){var e=this,t=this.props.user;return c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content mb-0"},c.a.createElement("h4",{className:"mb-2"},"\u041f\u043b\u0430\u043d \u043f\u0438\u043b\u043e\u0440\u0430\u043c\u044b")),this.state.pine_data&&c.a.createElement("div",{className:"content my-0"},c.a.createElement(Qe,{data:this.state.pine_data,wood:"\u0421\u043e\u0441\u043d\u0430"})),this.state.larch_data&&c.a.createElement("div",{className:"content my-0"},c.a.createElement(Qe,{data:this.state.larch_data,wood:"\u041b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"}))),c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h5",{className:"text-center"},"\u0414\u043e\u043b\u0436\u043d\u044b \u043c\u0430\u043d\u0430\u0433\u0435\u0440\u0443:",c.a.createElement("span",{className:"font-400"}," ",this.state.manager_balance," \u0440\u0443\u0431\u043b\u0435\u0439")),t.is_boss&&c.a.createElement("div",{className:"d-flex justify-content-around mt-4"},c.a.createElement(H.a,{type:"number",variant:"outlined",value:this.state.amount,onChange:function(t){return e.setState({amount:t.target.value})}}),c.a.createElement("button",{className:"btn btn-s bg-highlight",onClick:this.payoutToManager},"\u0412\u044b\u0434\u0430\u0442\u044c \u0430\u0432\u0430\u043d\u0441")))),c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},c.a.createElement("h5",null,"\u0420\u0430\u0441\u0447\u0435\u0442\u044b"),c.a.createElement(We,{records:this.state.cash_records,user:t,deletePayout:this.deletePayout}))))}}]),a}(l.Component),Pe=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(Je);function He(e){var t=e.lumber,a=e.calcType,n=e.calcRowAndTotal,l=e.key,r=c.a.createElement("tr",{key:l},c.a.createElement("td",null,t.name,"pine"===t.wood_species?c.a.createElement("span",{className:"d-block color-brown1-light"},"\u0441\u043e\u0441\u043d\u0430"):c.a.createElement("span",{className:"d-block color-green2-light"},"\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430")),c.a.createElement("td",{className:"w-25"},c.a.createElement("input",{style:{color:"#6c6c6c"},type:"number",className:"w-75",onChange:function(e){return n(e,t)},value:t.quantity>0&&t.quantity})),c.a.createElement("td",null,t.volume_total>0&&t.volume_total.toFixed(4)+" \u043c3"),c.a.createElement("td",null,t.employee_rate," \u0440\u0443\u0431"),c.a.createElement("td",null,t.cash>0&&t.cash.toFixed(0)+" \u0440\u0443\u0431"));return"mixed"===a&&"doska"!==t.lumber_type&"larch"===t.wood_species|"pine"===t.wood_species||"sorted"===a?r:null}function Ue(e){var t=e.lumbers,a=e.calcRowAndTotal,n=e.totalVolume,l=e.totalCash,r=e.calcType;return c.a.createElement("table",{className:"table table-sm table-responsive text-center",style:{lineHeight:"17px",color:"#6c6c6c"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0418\u0437\u0434\u0435\u043b\u0438\u0435"),c.a.createElement("th",null,"\u041a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u041e\u0431\u044c\u0435\u043c"),c.a.createElement("th",null,"\u0421\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e,t){return c.a.createElement(He,{lumber:e,calcType:r,calcRowAndTotal:a,key:t})})),c.a.createElement("tr",null,c.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),c.a.createElement("td",{className:"w-25"},"-"),c.a.createElement("td",null,c.a.createElement("span",{className:"font-17 font-600"},n>0&&n.toFixed(4)+" \u043c3")),c.a.createElement("td",null,"-"),c.a.createElement("td",null,c.a.createElement("span",{className:"font-17 font-600"},l>0&&l.toFixed(0)+" \u0440\u0443\u0431")))))}function Ge(e){var t=e.lumbers;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0441\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.name?e.name:e.lumber),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume_total?e.volume_total.toFixed(4)+"\u043c3":e.volume.toFixed(4)+"\u043c3"),c.a.createElement("td",null,e.rate||e.employee_rate," \u0440\u0443\u0431"),c.a.createElement("td",null,(e.total_cash||e.cash).toFixed(0)," \u0440\u0443\u0431"))}))))}function ze(e){var t=e.shift,a=e.saveData,n=e.back,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:l},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443: ",t.employee_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430: ",t.cash_per_employee.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ge,{lumbers:t.raw_records}),t.employeesData&&t.employeesData.length>0&&c.a.createElement("div",null,c.a.createElement("h5",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b?"),t.employeesData.map((function(e){return c.a.createElement("p",{className:"mb-0"},e.nickname)})))),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:n,className:"btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Be(e){var t=e.shift,a=e.message,n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0421\u043c\u0435\u043d\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(2),"  (",t.back_calc_volume.toFixed(2),") \u043c3"),c.a.createElement("p",{className:n},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443: ",t.employee_cash.toFixed(1)," (",t.back_calc_cash.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430: ",t.cash_per_employee.toFixed(1),"(",t.back_calc_cash_per_employee.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ge,{lumbers:t.lumber_records}),t.employees&&t.employees.length>0&&c.a.createElement("div",null,c.a.createElement("h5",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b?"),t.employees.map((function(e){return c.a.createElement("p",{className:"mb-0"},e)})))),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function Ke(e){var t=e.totalCash,a=e.employees,n=e.activeEmployees,l=e.addEmployee;return c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b? ",n.length>0&&"("+n.length+")"),c.a.createElement("div",{className:"d-flex justify-content-between my-2 flex-wrap"},a.map((function(e){return c.a.createElement("div",{className:n.includes(e)?"bg-green2-light mx-1 my-1 rounded-xs px-2 py-2 ":"bg-dark1-dark mx-1 my-1 rounded-xs px-2 py-2 ",onClick:function(){return l(e)}},e.nickname)}))),n.length>0&&c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex justify-content-start"},n.map((function(e){return c.a.createElement("div",{className:"mx-2"},c.a.createElement("span",{className:"d-block font-16"},e.nickname),t>0&&c.a.createElement("span",{className:"font-17 font-600"}," ",(t/n.length).toFixed(0)," \u0440\u0443\u0431"))})))))}var Ye=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={lumbers:[],initLumbers:[],totalVolume:0,totaCash:0,createdShift:null,employees:[],activeEmployees:[],dataToSave:null,calcType:"mixed",message:null,error:null},n.calcRow=n.calcRow.bind(Object(F.a)(n)),n.calcRowAndTotal=n.calcRowAndTotal.bind(Object(F.a)(n)),n.calcTotalVolume=n.calcTotalVolume.bind(Object(F.a)(n)),n.calcTotalCash=n.calcTotalCash.bind(Object(F.a)(n)),n.addEmployee=n.addEmployee.bind(Object(F.a)(n)),n.saveData=n.saveData.bind(Object(F.a)(n)),n.preSave=n.preSave.bind(Object(F.a)(n)),n.back=n.back.bind(Object(F.a)(n)),n.switchCalc=n.switchCalc.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_SHIFT_CREATE_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({lumbers:a.lumbers,initLumbers:a.lumbers,employees:a.employees})}))}},{key:"calcRow",value:function(e,t,a){var n=e.employee_rate;return Object(re.a)(Object(re.a)({},e),{},{lumber:e.id,quantity:t,volume_total:t*e.volume,cash:t*e.volume*n,employee_rate:n})}},{key:"calcTotalVolume",value:function(e){var t=0;return e.map((function(e){300!==e.employee_rate&&(t+=e.volume_total)})),t}},{key:"calcTotalCash",value:function(e){var t=0;return e.map((function(e){t+=e.cash})),t}},{key:"calcRowAndTotal",value:function(e,t){var a=this,n=this.state.lumbers,l=this.calcRow(t,e.target.value,!1);n=fe(n,l);var c=this.calcTotalVolume(n);c>=10?(n.map((function(e,t){n[t]=a.calcRow(e,e.quantity,!0)})),c=this.calcTotalVolume(n)):(n.map((function(e,t){n[t]=a.calcRow(e,e.quantity,!1)})),c=this.calcTotalVolume(n));var r=this.calcTotalCash(n);this.setState(Object(re.a)(Object(re.a)({},this.state),{},{lumbers:n,totalVolume:c,totalCash:r,message:null}))}},{key:"addEmployee",value:function(e){var t=this.state.activeEmployees;t=ge(t,e),this.setState(Object(re.a)(Object(re.a)({},this.state),{},{activeEmployees:t}))}},{key:"preSave",value:function(){var e=this.state,t=e.lumbers,a=e.totalCash,n=e.totalVolume,l=e.activeEmployees,c=[];l.map((function(e){return c=Ee(c,e.id)}));var r=[];t.map((function(e){e.cash>0&&e.quantity>0&&(r=Ee(r,e))}));var s={shift_type:"day",date:null,raw_records:r,employees:c,employee_cash:a,volume:n,employeesData:l,cash_per_employee:a/c.length};this.setState(Object(re.a)(Object(re.a)({},this.state),{},{dataToSave:s}))}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_SHIFT_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b.",createdShift:t.data})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState(Object(re.a)(Object(re.a)({},this.state),{},{activeEmployees:[],lumbers:this.state.initLumbers,totalVolume:0,totalCash:0,note:"",dataToSave:null}))}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"switchCalc",value:function(e){this.setState({lumbers:this.state.initLumbers,totalCash:0,totalVolume:0,calcType:e,activeEmployees:[]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,n=t.totalVolume,l=t.totalCash,r=t.employees,s=t.activeEmployees,o=t.message,m=t.createdShift,u=t.dataToSave,i=t.calcType;return c.a.createElement("div",null,m?c.a.createElement(Be,{shift:m,message:o}):u?c.a.createElement(ze,{shift:u,saveData:this.saveData,back:this.back}):c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style mb-1 mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h2",null,"\u0421\u043c\u0435\u043d\u0430 "),c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement("button",{className:"mixed"===i?"btn btn-s bg-highlight":"btn btn-s border",onClick:function(){return e.switchCalc("mixed")}},"\u0434\u043e\u0441\u043a\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u0448\u043a\u0443"),c.a.createElement("button",{className:"sorted"===i?"btn btn-s bg-highlight":"btn btn-s border",onClick:function(){return e.switchCalc("sorted")}},"\u0434\u043e\u0441\u043a\u0430 \u043f\u043e \u0441\u043e\u0440\u0442\u0430\u043c")),a.length>0&&c.a.createElement(Ue,{calcType:this.state.calcType,lumbers:a,calcRowAndTotal:this.calcRowAndTotal,totalCash:l,totalVolume:n}))),c.a.createElement("div",{className:"card card-style mb-3"},c.a.createElement(Ke,{totalCash:l,employees:r,activeEmployees:s,addEmployee:this.addEmployee})),s.length>0&&l>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0414\u0430\u043b\u0435\u0435")))}}]),a}(l.Component),Xe=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(Ye),Ze=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={shiftList:[],message:null,error:null},n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");0===this.state.shiftList.length&&g()({method:"get",url:_.RAMSHIK_SHIFT_LIST,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{shiftList:t.data.results}))}))}},{key:"render",value:function(){return c.a.createElement(Se,{shiftList:this.state.shiftList})}}]),a}(l.Component);function $e(){var e=Object(m.g)();return c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"text-center",onClick:function(){e.push("/ramshik/shift/list/")}},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043c\u0435\u043d")))}var et=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={last_payouts:[],ramshik:null,message:null,error:null},n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.RAMSHIK_PAYOUTS,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState(Object(re.a)(Object(re.a)({},e.state),{},{ramshik:a.ramshik,last_payouts:a.last_payouts}))}))}},{key:"render",value:function(){var e=this.state,t=e.ramshik,a=(e.message,e.last_payouts);return c.a.createElement("div",{className:"mt-2"},c.a.createElement($e,null),c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"text-center"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 ",t&&t.cash+" \u0440\u0443\u0431"))),c.a.createElement(ue,{lastOperations:a}))}}]),a}(l.Component);function tt(e){var t=e.lumber,a=e.calcRowQnty,n=e.calcRowVolume,l=e.calcRowCash,r=e.label;return c.a.createElement("div",{className:"my-2"},c.a.createElement("h5",null,r,":"),c.a.createElement("div",{className:"d-flex justify-content-start "},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",onChange:function(e){return a(e,t.id)},value:t.quantity>0&&t.quantity}),c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041e\u0431\u044a\u0435\u043c",type:"number",onChange:function(e){return n(e,t.id)},value:t.volume_total>0&&t.volume_total})),c.a.createElement("div",{className:"d-flex justify-content-start mt-2"},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",type:"number",onChange:function(e){return l(e,t.id)},value:t.price>0&&t.price}),c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",disabled:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",value:t.total_cash>0&&t.total_cash})))}function at(e){var t,a=e.lumber,r=e.setLumberID,s=e.calcRowQnty,o=e.calcRowCash,m=e.pineBrus,u=e.pineDoska,i=e.turnCalc,d=e.delLumber,h=e.calcRoundRowQnty,b=e.calcRowVolume,p=e.calcRoundRowVolume,E=e.calcChinaRowQnty,v=e.calcChinaRowVolume,g=Object(l.useRef)(null);return c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white rounded-m border",ref:g},c.a.createElement(z.a,{htmlFor:"grouped-native-select",className:"font-19 font-600 color-black"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",a.id+1),c.a.createElement(G.a,(t={native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:a.lumber,onChange:function(e){return r(e,a.id)},name:"lumber","data-id":a.id},Object(n.a)(t,"defaultValue",null),Object(n.a)(t,"onClick",(function(){return g.current.scrollIntoView()})),t),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),a.lumber>0&&c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{className:"exact"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"exact")}},"\u0441\u0447\u0435\u0442 \u0422"),c.a.createElement("button",{className:"round"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"round")}},"\u0441\u0447\u0435\u0442 \u041e"),a.china_volume>0&&c.a.createElement("button",{className:"china"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"china")}},"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442")),"exact"===a.calcType&&c.a.createElement(tt,{lumber:a,label:"\u0441\u0447\u0435\u0442 \u0422",calcRowQnty:s,calcRowVolume:b,calcRowCash:o}),"round"===a.calcType&&c.a.createElement(tt,{lumber:a,label:"\u0421\u0447\u0435\u0442 \u041e",calcRowQnty:h,calcRowVolume:p,calcRowCash:o}),"china"===a.calcType&&c.a.createElement(tt,{lumber:a,label:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:E,calcRowVolume:v,calcRowCash:o})),a.lumber>0&&c.a.createElement("button",{className:"btn btn-sm bg-red2-light mt-2 ",onClick:function(){return d(a.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"))}var nt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={pineBrus:[],pineDoska:[],lumbers:[],lumberToSale:null,lumbersToSale:[],totalCash:0,totalVolume:0},n.addLumberToSale=n.addLumberToSale.bind(Object(F.a)(n)),n.setLumberID=n.setLumberID.bind(Object(F.a)(n)),n.turnCalc=n.turnCalc.bind(Object(F.a)(n)),n.calcRowQnty=n.calcRowQnty.bind(Object(F.a)(n)),n.calcRowVolume=n.calcRowVolume.bind(Object(F.a)(n)),n.calcRowCash=n.calcRowCash.bind(Object(F.a)(n)),n.calcRoundRowQnty=n.calcRoundRowQnty.bind(Object(F.a)(n)),n.calcRoundRowVolume=n.calcRoundRowVolume.bind(Object(F.a)(n)),n.calcChinaRowQnty=n.calcChinaRowQnty.bind(Object(F.a)(n)),n.calcChinaRowVolume=n.calcChinaRowVolume.bind(Object(F.a)(n)),n.calcTotal=n.calcTotal.bind(Object(F.a)(n)),n.delLumber=n.delLumber.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.SALE_CALC_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,pineDoska:a.pine_doska_lumbers,lumbers:a.lumbers})}))}},{key:"addLumberToSale",value:function(){this.setState(Object(re.a)(Object(re.a)({},this.state),{},{lumbersToSale:[].concat(Object(he.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,n=a.lumbersToSale,l=a.lumbers,c=ve(l,e.target.value);n=fe(n,c=Object(re.a)(Object(re.a)({},c),{},{id:t,calcType:"exact"})),this.setState({lumbersToSale:n})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.volume*n.quantity).toFixed(4),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.volume).toFixed(4),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.price=e.target.value?parseInt(e.target.value):0,n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRoundRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.round_volume*n.quantity).toFixed(4),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRoundRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.round_volume).toFixed(0),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcChinaRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.china_volume*n.quantity).toFixed(4),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcChinaRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.china_volume).toFixed(0),n.total_cash=(n.volume_total*n.price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"turnCalc",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,e);"round"===t&&(n.volume_total=(n.quantity*n.round_volume).toFixed(3)),"exact"===t&&(n.volume_total=(n.quantity*n.volume).toFixed(4)),"china"===t&&(n.volume_total=(n.quantity*n.china_volume).toFixed(4),n.price=0),n.calcType=t,n.total_cash=n.volume_total*n.price,a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"delLumber",value:function(e){var t=this.state.lumbersToSale,a=ve(t,e);t=ge(t,a);var n=this.calcTotal(t),l=n.totalCash,c=n.totalVolume;this.setState({lumbersToSale:t,totalCash:l,totalVolume:c})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,n=t.totalVolume,l=t.totalCash;return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"content"},c.a.createElement("h3",null,"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"),a.length>0&&a.map((function(t){return t&&c.a.createElement(at,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowVolume:e.calcRowVolume,calcRoundRowQnty:e.calcRoundRowQnty,calcRoundRowVolume:e.calcRoundRowVolume,calcChinaRowQnty:e.calcChinaRowQnty,calcChinaRowVolume:e.calcChinaRowVolume,turnCalc:e.turnCalc,delLumber:e.delLumber,pineBrus:e.state.pineBrus,pineDoska:e.state.pineDoska})})),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),l>0&&c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content d-flex justify-content-between mb-2 "},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",n," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",l," \u0440\u0443\u0431\u043b\u0435\u0439")))))}}]),a}(l.Component),lt=a(435),ct=a(438);function rt(e){var t=e.lumber,a=e.calcRowQnty,n=e.calcRowVolume,l=e.calcRowCash,r=e.setRamaPrice,s=e.label;return c.a.createElement("div",{className:""},c.a.createElement("h5",null,s,":"),c.a.createElement("div",{className:"d-flex justify-content-start "},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",onChange:function(e){return a(e,t.id)},value:t.quantity>0&&t.quantity}),c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041e\u0431\u044a\u0435\u043c",type:"number",onChange:function(e){return n(e,t.id)},value:t.volume_total>0&&t.volume_total})),c.a.createElement("div",{className:"d-flex justify-content-start mt-2"},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",type:"number",onChange:function(e){return l(e,t.id)},value:t.selling_price>0&&t.selling_price}),c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",disabled:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",value:t.selling_total_cash>0&&t.selling_total_cash})),c.a.createElement("div",{className:"d-flex justify-content-start mt-3"},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",disabled:!0,label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3 \u043e\u043f\u0442",type:"number",onChange:function(e){return r(e,t.id)},value:t.rama_price>0&&t.rama_price})))}function st(e){var t,a=e.lumber,r=e.setLumberID,s=e.calcRowQnty,o=e.calcRowCash,m=e.pineBrus,u=e.pineDoska,i=e.turnCalc,d=e.delLumber,h=e.larchBrus,b=e.calcRoundRowQnty,p=e.calcRowVolume,E=e.calcRoundRowVolume,v=e.calcChinaRowQnty,g=e.calcChinaRowVolume,f=e.setRamaPrice,_=e.stockType,y=e.larchDoska,k=Object(l.useRef)(null);return c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white rounded-m border",ref:k},c.a.createElement(z.a,{htmlFor:"grouped-native-select",className:"font-19 font-600 color-black"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",a.id+1),c.a.createElement(G.a,(t={native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:a.lumber,onChange:function(e){return r(e,a.id)},name:"lumber","data-id":a.id},Object(n.a)(t,"defaultValue",null),Object(n.a)(t,"onClick",(function(){return k.current.scrollIntoView()})),t),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},h.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),"mixed"===_&&c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),"sorted"===_&&[c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0441\u043d\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},y.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))]),a.lumber>0&&c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{className:"exact"===a.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"exact")}},"\u0441\u0447\u0435\u0442 \u0422"),c.a.createElement("button",{className:"round"===a.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"round")}},"\u0441\u0447\u0435\u0442 \u041e"),a.china_volume>0&&c.a.createElement("button",{className:"china"===a.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"china")}},"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442")),"exact"===a.calc_type&&c.a.createElement(rt,{lumber:a,label:"\u0421\u0447\u0435\u0442 \u0422",calcRowQnty:s,calcRowVolume:p,calcRowCash:o,setRamaPrice:f}),"round"===a.calc_type&&c.a.createElement(rt,{lumber:a,label:"\u0421\u0447\u0435\u0442 \u041e",calcRowQnty:b,calcRowVolume:E,calcRowCash:o,setRamaPrice:f}),"china"===a.calc_type&&c.a.createElement(rt,{lumber:a,label:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:v,calcRowVolume:g,calcRowCash:o,setRamaPrice:f})),a.lumber>0&&c.a.createElement("button",{className:"btn btn-sm bg-red2-light mt-2 ",onClick:function(){return d(a.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"))}function ot(e){var t=e.loader,a=e.setAddParams,l=e.seller,r=e.bonus_kladman_label,s=e.sellers,o=e.client,m=e.delivery_fee,u=(e.china_vira,e.setChinaVira,e.preSave);return c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex justify-content-between mb-1 "},c.a.createElement(H.a,{className:"pr-2 pt-2",variant:"standard",label:"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"client",onChange:a,value:o&&o}),c.a.createElement(U.a,{className:"pb-4"},c.a.createElement(z.a,null,"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446"),c.a.createElement(G.a,Object(n.a)({native:!0,defaultValue:"",className:"color-dark1-light",value:l,onChange:a,name:"seller"},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),s&&s.length>0&&s.map((function(e){return c.a.createElement("option",{value:e.id},e.nickname," ")}))))),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement(ct.a,{control:c.a.createElement(lt.a,{checked:t,onChange:a,color:"blue2",name:"loader"}),label:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a"}),c.a.createElement(ct.a,{control:c.a.createElement(lt.a,{checked:r,onChange:a,color:"blue2",name:"bonus_kladman_label"}),label:"\u0421\u043a\u043b\u0430\u0434 \u0431\u043e\u043d\u0443\u0441"})),c.a.createElement("div",{className:"d-flex justify-content-between mb-1 "},c.a.createElement(H.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",type:"number",name:"delivery_fee",onChange:a,value:m>0&&m})),c.a.createElement("button",{onClick:u,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-2"},"\u0414\u0430\u043b\u0435\u0435"))}function mt(e){var t=e.lumber_records;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume_total," \u043c3"),c.a.createElement("td",null,e.selling_price," \u0440\u0443\u0431"),c.a.createElement("td",null,e.selling_total_cash," \u0440\u0443\u0431"))}))))}function ut(e){var t=e.sale,a=e.message,n="mb-1 font-15 font-400 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:n},"\u041a\u043b\u0438\u0435\u043d\u0442: ",t.client),c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:n},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430: ",t.seller_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0430: ",t.loader_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430: ",t.kladman_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: ",t.delivery_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:"mb-1 font-17 font-500 color-black"},"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",t.selling_total_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement(mt,{lumber_records:t.lumber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function it(e){var t=e.sale,a=e.saveData,n=e.back,l=e.sellers,r="mb-1 font-15 font-400 color-black",s=null;return l&&(s=ve(l,t.seller)),c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:r},"\u041a\u043b\u0438\u0435\u043d\u0442: ",t.client),c.a.createElement("p",{className:r},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:r},"\u0413\u0440\u0443\u0437\u0447\u0438\u043a: ",t.loader?"\u0434\u0430":"\u043d\u0435\u0442"," "),c.a.createElement("p",{className:r},"\u0411\u043e\u043d\u0443\u0441 \u0441\u043a\u043b\u0430\u0434\u0443: ",t.bonus_kladman?"\u0434\u0430":"\u043d\u0435\u0442"),c.a.createElement("p",{className:r},"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446: ",s?s.nickname:"\u043d\u0435\u0442"),c.a.createElement("p",{className:r},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",t.deliveryFee?t.deliveryFee+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:"mb-1 font-17 font-500 color-black"},"\u0421\u0443\u043c\u043c\u0430: ",t.sale_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement(mt,{lumber_records:t.raw_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:n,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l mt-2"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}var dt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumbers:[],sellers:[],seller:null,bonus_kladman:null,bonus_kladman_label:!1,loader:!1,client:"",china_vira:0,delivery_fee:0,lumbersToSale:[],createdSale:null,dataToSave:null,message:null,error:null,totalCash:0,totalVolume:0},n.addLumberToSale=n.addLumberToSale.bind(Object(F.a)(n)),n.setLumberID=n.setLumberID.bind(Object(F.a)(n)),n.turnCalc=n.turnCalc.bind(Object(F.a)(n)),n.calcRowQnty=n.calcRowQnty.bind(Object(F.a)(n)),n.calcRowVolume=n.calcRowVolume.bind(Object(F.a)(n)),n.calcRowCash=n.calcRowCash.bind(Object(F.a)(n)),n.calcRoundRowQnty=n.calcRoundRowQnty.bind(Object(F.a)(n)),n.calcRoundRowVolume=n.calcRoundRowVolume.bind(Object(F.a)(n)),n.calcChinaRowQnty=n.calcChinaRowQnty.bind(Object(F.a)(n)),n.calcChinaRowVolume=n.calcChinaRowVolume.bind(Object(F.a)(n)),n.setRamaPrice=n.setRamaPrice.bind(Object(F.a)(n)),n.setAddParams=n.setAddParams.bind(Object(F.a)(n)),n.setChinaVira=n.setChinaVira.bind(Object(F.a)(n)),n.calcTotal=n.calcTotal.bind(Object(F.a)(n)),n.delLumber=n.delLumber.bind(Object(F.a)(n)),n.saveData=n.saveData.bind(Object(F.a)(n)),n.preSave=n.preSave.bind(Object(F.a)(n)),n.back=n.back.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=me({stock_type:this.props.user.rama_type});g()({method:"get",url:_.MANAGER_SALE_INIT_DATA,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,larchBrus:a.larch_brus_lumbers,pineDoska:a.pine_doska_lumbers,larchDoska:a.larch_doska_lumbers,lumbers:a.lumbers,sellers:a.sellers,bonus_kladman:a.kladman_id})}))}},{key:"addLumberToSale",value:function(){this.setState(Object(re.a)(Object(re.a)({},this.state),{},{lumbersToSale:[].concat(Object(he.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,n=a.lumbersToSale,l=a.lumbers,c=ve(l,e.target.value);n=fe(n,c=Object(re.a)(Object(re.a)({},c),{},{id:t})),this.setState({lumbersToSale:n})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.volume*n.quantity).toFixed(4),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.volume).toFixed(4),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.selling_price=e.target.value?parseInt(e.target.value):0,n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRoundRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.round_volume*n.quantity).toFixed(4),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcRoundRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.round_volume).toFixed(0),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcChinaRowQnty",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.quantity=e.target.value?parseInt(e.target.value):0,n.volume_total=(n.china_volume*n.quantity).toFixed(4),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcChinaRowVolume",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.volume_total=e.target.value?parseFloat(e.target.value):0,n.quantity=(n.volume_total/n.china_volume).toFixed(0),n.selling_total_cash=(n.volume_total*n.selling_price).toFixed(0),a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"setRamaPrice",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,t);n.rama_price=e.target.value?parseFloat(e.target.value):0,a=fe(a,n),this.setState({lumbersToSale:a})}},{key:"turnCalc",value:function(e,t){var a=this.state.lumbersToSale,n=ve(a,e);"round"===t&&(n.volume_total=(n.quantity*n.round_volume).toFixed(3)),"exact"===t&&(n.volume_total=(n.quantity*n.volume).toFixed(4)),"china"===t&&(n.volume_total=(n.quantity*n.china_volume).toFixed(4),n.selling_price=0),n.calc_type=t,n.selling_total_cash=n.volume_total*n.selling_price,a=fe(a,n);var l=this.calcTotal(a),c=l.totalCash,r=l.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:r})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.selling_total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"delLumber",value:function(e){var t=this.state.lumbersToSale,a=ve(t,e);t=ge(t,a);var n=this.calcTotal(t),l=n.totalCash,c=n.totalVolume;this.setState({lumbersToSale:t,totalCash:l,totalVolume:c})}},{key:"setAddParams",value:function(e){"loader"===e.target.name||"bonus_kladman_label"===e.target.name?this.setState(Object(n.a)({},e.target.name,!this.state[e.target.name])):this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"setChinaVira",value:function(e){var t=this.state.lumbersToSale,a=this.calcTotal(t),n=a.totalCash,l=(a.totalVolume,parseInt(e.target.value));l>0&&(n-=l),this.setState({totalCash:n,china_vira:l})}},{key:"preSave",value:function(){var e=this.state,t=e.lumbersToSale,a=e.loader,n=e.seller,l=e.bonus_kladman_label,c=e.bonus_kladman,r=e.delivery_fee,s=e.totalCash,o=e.totalVolume,m=e.client,u=e.china_vira,i=[];t.map((function(e){e.selling_total_cash>0&&e.quantity>0&&(i=Ee(i,e))}));var d={raw_records:i,date:null,loader:a,seller:n,bonus_kladman:l?c:null,client:m,delivery_fee:r,sale_cash:parseFloat(s),volume:parseFloat(o),china_vira:u};this.setState({dataToSave:d})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_SALE_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdSale:t.data.sale})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})}))}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,n=t.totalVolume,l=t.totalCash,r=t.createdSale,s=t.dataToSave,o=t.message;return c.a.createElement("div",{className:""},r?c.a.createElement(ut,{sale:r,message:o}):s?c.a.createElement(it,{sale:s,saveData:this.saveData,back:this.back,sellers:this.state.sellers}):c.a.createElement("div",null,c.a.createElement("div",{className:"content"},c.a.createElement("h3",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"),a.length>0&&a.map((function(t){return t&&c.a.createElement(st,{stockType:e.props.user.rama_type,lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowVolume:e.calcRowVolume,calcRoundRowQnty:e.calcRoundRowQnty,calcRoundRowVolume:e.calcRoundRowVolume,calcChinaRowQnty:e.calcChinaRowQnty,calcChinaRowVolume:e.calcChinaRowVolume,setRamaPrice:e.setRamaPrice,turnCalc:e.turnCalc,delLumber:e.delLumber,pineBrus:e.state.pineBrus,larchBrus:e.state.larchBrus,pineDoska:e.state.pineDoska,larchDoska:e.state.larchDoska})})),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"))),l>0&&c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("p",{className:"font-15 mb-0"},"\u041e\u0431\u044a\u0435\u043c: ",n," \u043c3"),c.a.createElement("p",{className:"font-15 mb-0"},"\u0418\u0442\u043e\u0433\u043e: ",l," \u0440")),c.a.createElement(ot,{setAddParams:this.setAddParams,sellers:this.state.sellers,seller:this.state.seller,bonus_kladman_label:this.state.bonus_kladman_label,loader:this.state.loader,client:this.state.client,delivery_fee:this.state.delivery_fee,china_vira:this.state.china_vira,setChinaVira:this.setChinaVira,preSave:this.preSave})))))}}]),a}(l.Component),ht=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,state:e}}),(function(e){return{}}))(dt);function bt(e){var t=e.sales,a=e.totals,n=e.deleteSale,l=e.rama;return console.log(l),c.a.createElement("table",{className:"table table-sm table-responsive"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430/\u041a\u043b\u0438\u0435\u043d\u0442"),c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430/\u041e\u0431\u044a\u0435\u043c"),c.a.createElement("th",{style:{lineHeight:"13px"}},"seller_kladman_same"===l.sale_type?"\u041f\u0440\u043e\u0434\u0430\u0432e\u0446 (\u043a\u043e\u043c\u0438\u0441\u0441\u0438\u044f \u043a\u043b\u0430\u0434\u043c\u044d\u043d\u0430 \u0438\u0437 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430)":"\u041f\u0440\u043e\u0434\u0430\u0432e\u0446"),c.a.createElement("th",null,"\u0433\u0440\u0443\u0437\u0447\u0438\u043a"),c.a.createElement("th",null,"\u043a\u043b\u0430\u0434\u043c\u044d\u043d"),c.a.createElement("th",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",{className:"text-nowrap"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",{style:{lineHeight:"15px"}},e.date,c.a.createElement("span",{className:"d-block"},e.note),c.a.createElement("span",{className:"font-13"},e.sale_type)),c.a.createElement("td",{className:"text-nowrap"},e.lumber_records.map((function(e){return c.a.createElement("span",{className:"d-block mb-2",style:{lineHeight:"14px"}},e.quantity,"\u0448\u0442 ",e.lumber,c.a.createElement("span",{className:"d-block font-italic"},e.wood_species),c.a.createElement("span",{className:"d-block font-italic"},"\u0440\u043e\u0437\u043d\u0438\u0446\u0430 \u043e\u0431\u0449 ",c.a.createElement("span",{className:"font-500"},e.selling_total_cash)),c.a.createElement("span",{className:"d-block font-italic"},"\u0440\u043e\u0437\u043d\u0438\u0446\u0430 1\u043c3 ",c.a.createElement("span",{className:"font-500"},e.selling_price)),c.a.createElement("span",{className:"d-block font-italic"},"\u043e\u043f\u0442 \u043e\u0431\u0449 ",c.a.createElement("span",{className:"font-500"},e.rama_total_cash)),c.a.createElement("span",{className:"d-block font-italic"},"\u043e\u043f\u0442 1\u043c3 ",c.a.createElement("span",{className:"font-500"},e.rama_price)))}))),c.a.createElement("td",null,c.a.createElement("span",null,e.selling_total_cash,"\u0440"),c.a.createElement("span",{className:"d-block"},e.volume," \u043c3")),c.a.createElement("td",{style:{lineHeight:"15px"}},"seller_kladman_same"===l.sale_type?c.a.createElement("span",{className:"d-block"},c.a.createElement("span",{className:"d-block"},e.seller_fee-e.kladman_fee),"(".concat(e.seller_fee,"  - ").concat(e.kladman_fee,")")):c.a.createElement("span",{className:"d-block"},e.seller_fee),e.seller_name&&c.a.createElement("span",{className:""},e.seller_name)),c.a.createElement("td",null,e.loader_fee),c.a.createElement("td",null,e.kladman_fee),c.a.createElement("td",null,e.delivery_fee),c.a.createElement("td",null,c.a.createElement("button",{className:"btn btn-xs bg-red1-light",value:e.id,onClick:n},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),c.a.createElement("tr",{className:"font-500 font-16"},c.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),c.a.createElement("td",null,"-"),c.a.createElement("td",null,a.total_selling_cash),c.a.createElement("td",null,"seller_kladman_same"===l.sale_type?c.a.createElement("span",null,c.a.createElement("span",{className:"d-block"},a.total_seller_fee-a.total_kladman_fee),"(".concat(a.total_seller_fee,"  - ").concat(a.total_kladman_fee,")")):a.total_seller_fee),c.a.createElement("td",null,a.total_loader_fee),c.a.createElement("td",null,a.total_kladman_fee),c.a.createElement("td",null,a.total_delivery_fee),c.a.createElement("td",null,a.total_add_expenses))))}var pt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={saleList:[],totals:{},startDate:"",endDate:"",message:null,error:null},n.deleteSale=n.deleteSale.bind(Object(F.a)(n)),n.setData=n.setData.bind(Object(F.a)(n)),n.showResults=n.showResults.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=new Date,n=ye(new Date),l=ye(a),c=me({rama:this.props.ramaToSee.id,date_before:l,date_after:n});g()({method:"get",url:_.SALES,params:c,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{saleList:t.data.sales,totals:t.data.totals,startDate:n,endDate:l}))}))}},{key:"deleteSale",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.manager_delete_sale(e.target.value),headers:{Authorization:"JWT ".concat(a)}}).then((function(e){t.setState(Object(re.a)(Object(re.a)({},t.state),{},{saleList:e.data.sales,totals:e.data.totals}))}))}},{key:"setData",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"showResults",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id,date_before:this.state.endDate,date_after:this.state.startDate});g()({method:"get",url:_.SALES,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){e.setState(Object(re.a)(Object(re.a)({},e.state),{},{saleList:t.data.sales,totals:t.data.totals}))}))}},{key:"render",value:function(){var e=this.state,t=e.saleList,a=e.totals;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement(Y,{startDate:this.state.startDate,endDate:this.state.endDate,setData:this.setData,showResults:this.showResults}))),c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 (",t.length,")"),t.length>0?c.a.createElement(bt,{sales:t,totals:a,deleteSale:this.deleteSale,rama:this.props.ramaToSee}):c.a.createElement("h5",null,"\u041d\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0436"))))}}]),a}(l.Component),Et=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(pt);function vt(e){var t=e.sales,a=e.sales_totals,n=e.sellers_fee;return c.a.createElement("div",null,c.a.createElement("table",{className:"table table-sm",style:{lineHeight:"17px"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),c.a.createElement("th",null,"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446"),c.a.createElement("th",null,"\u041a\u043b\u0430\u0434/\u0433\u0440\u0443\u0437"),c.a.createElement("th",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430")),c.a.createElement("tbody",null,t.length>0&&t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.client),c.a.createElement("span",null,e.selling_total_cash)),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.seller_name),c.a.createElement("span",null,e.seller_fee)),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},"\u041a ",e.kladman_fee),c.a.createElement("span",null,"\u0413 ",e.loader_fee)),c.a.createElement("td",null,c.a.createElement("span",null,e.delivery_fee)))})),a&&c.a.createElement("tr",null,c.a.createElement("td",{className:""},c.a.createElement("span",{className:"d-block font-15 "},"\u0418\u0442\u043e\u0433\u043e \u0434\u043e\u0445\u043e\u0434"),c.a.createElement("span",{className:"font-15 font-500 color-green2-light"},"+",a.total_selling_cash," \u0440")),c.a.createElement("td",null,n.length>0&&n.map((function(e){return e.total>0&&c.a.createElement("span",{className:"d-block"},e.name," ",e.total)}))),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},"\u041a ",a.total_kladman_fee),c.a.createElement("span",null,"\u0413 ",a.total_loader_fee)),c.a.createElement("td",null,c.a.createElement("span",null,a.total_delivery_fee))))))}function gt(e){var t=e.records;return c.a.createElement("div",null,c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),c.a.createElement("th",null,"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435")),c.a.createElement("tbody",null,t.length>0&&t.map((function(e){return c.a.createElement("tr",null,"withdraw_employee"==e.record_type&&c.a.createElement("td",{className:"text-nowrap color-red1-light"},"-",e.amount," \u0440"),"rama_expenses"==e.record_type&&c.a.createElement("td",{className:"text-nowrap color-red1-light"},"-",e.amount," \u0440"),"sale_income"==e.record_type&&c.a.createElement("td",{className:"text-nowrap color-green1-light"},"+",e.amount," \u0440"),c.a.createElement("td",{className:"text-nowrap"},e.note))})))))}var ft=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={createdExpense:null,expenses:[],incomes:[],sales:[],sellers_fee:[],allRecords:[],total:null,total_expenses:null,total_incomes:null,date:""},n.createExpense=n.createExpense.bind(Object(F.a)(n)),n.setData=n.setData.bind(Object(F.a)(n)),n.showResults=n.showResults.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=me({date:_e(),rama:this.props.ramaToSee.id});g()({method:"get",url:_.DAILY_REP,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({expenses:a.expense_records,total_expenses:a.expense_records_total,incomes:a.income_records,total_incomes:a.income_records_total,allRecords:a.records,total:a.records_total,sales:a.sales,sales_totals:a.sales_totals,sellers_fee:a.sales_sellers_fee,date:_e()})}))}},{key:"createExpense",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"post",url:_.KLADMAN_EXPENSE_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(e){t.setState({message:e.data.message,createdExpense:e.data.expense,allRecords:e.data.records,total:e.data.total})})).catch((function(e){t.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})}))}},{key:"setData",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"showResults",value:function(){var e=this,t=localStorage.getItem("token"),a=me({rama:this.props.ramaToSee.id,date:this.state.date});g()({method:"get",url:_.DAILY_REP,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(t){var a=t.data;e.setState({expenses:a.expense_records,total_expenses:a.expense_records_total,incomes:a.income_records,total_incomes:a.income_records_total,allRecords:a.records,total:a.records_total,sales:a.sales,sales_totals:a.sales_totals,sellers_fee:a.sales_sellers_fee})}))}},{key:"render",value:function(){var e=this.state,t=e.expenses,a=e.total_expenses,n=e.sales,l=e.sales_totals;return c.a.createElement("div",{className:"card card-style mt-2 mb-0"},c.a.createElement("div",{className:"content mb-0 "},c.a.createElement("h3",{className:""},"\u0414\u043d\u0435\u0432\u043d\u043e\u0439 \u043e\u0442\u0447\u0435\u0442")),c.a.createElement("div",{className:"content mt-0"},c.a.createElement(X,{date:this.state.date,setData:this.setData,showResults:this.showResults})),c.a.createElement("div",{className:"content mb-0 mt-0"},c.a.createElement("h5",{className:""},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"),c.a.createElement(vt,{sales:n,sales_totals:l,sellers_fee:this.state.sellers_fee})),c.a.createElement("div",{className:"content mt-0"},c.a.createElement("h5",{className:"mb-1"},"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u0437\u0430 \u0434\u0435\u043d\u044c"),a&&c.a.createElement("p",{className:"mb-1 font-15 color-black"},"\u0418\u0442\u043e\u0433\u043e \u0440\u0430\u0441\u0445\u043e\u0434:",c.a.createElement("span",{className:"font-500 color-red1-light"}," -",a,"\u0440")),c.a.createElement(gt,{records:t})))}}]),a}(l.Component),_t=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(ft);function yt(e){var t=e.expenses,a=e.user,n=e.deleteExpense;return c.a.createElement("div",null,c.a.createElement("table",{className:"table table-sm"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),c.a.createElement("th",null,"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435")),c.a.createElement("tbody",null,t.length>0&&t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.amount," \u0440\u0443\u0431"),c.a.createElement("td",null,e.note),a.is_manager&&c.a.createElement("td",null,c.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return n(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})))))}function kt(e){var t=Object(l.useState)(),a=Object(se.a)(t,2),n=a[0],r=a[1],s=Object(l.useState)(""),o=Object(se.a)(s,2),m=o[0],u=o[1];return c.a.createElement("div",{className:""},c.a.createElement(H.a,{className:"mb-2",id:"outlined-margin-dense",variant:"outlined",fullWidth:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",onChange:function(e){return r(e.target.value)},value:n}),c.a.createElement(H.a,{className:"mb-2",id:"outlined-margin-dense",variant:"outlined",fullWidth:!0,label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",type:"text",onChange:function(e){return u(e.target.value)},value:m}),c.a.createElement("button",{className:"btn btn-m bg-highlight mt-2",onClick:function(){return e.createExpense({amount:n,note:m})}},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"))}var Nt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={createExpense:null,expenses:[],total:null},n.createExpense=n.createExpense.bind(Object(F.a)(n)),n.deleteExpense=n.deleteExpense.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=me({created_at_after:_e()});g()({method:"get",url:_.MANAGER_CASH_RECORDS_LIST,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({expenses:a.records,total:a.total})}))}},{key:"createExpense",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_CASH_RECORDS_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(e){t.setState({message:e.data.message,createdExpense:e.data.expense,expenses:e.data.records,total:e.data.total})})).catch((function(e){t.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})}))}},{key:"deleteExpense",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.manager_delete_expense(e),headers:{Authorization:"JWT ".concat(a)}}).then((function(e){t.setState(Object(re.a)(Object(re.a)({},t.state),{},{expenses:e.data.records,total:e.data.totals,amount:0}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.expenses,n=t.createdExpense,l=t.total;return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content mb-0"},c.a.createElement("h3",{className:""},"\u0420\u0430\u0441\u0445\u043e\u0434\u044b")),c.a.createElement("div",{className:"content mb-0"},n?c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-m bg-highlight",onClick:function(){return e.setState({createdExpense:null})}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0435\u0449\u0435")):c.a.createElement(kt,{createExpense:this.createExpense})),c.a.createElement("div",{className:"content"},c.a.createElement("h3",{className:"mb-1"},"\u0417\u0430 \u0434\u0435\u043d\u044c"),l&&c.a.createElement("h5",{className:"mb-1"},"\u0418\u0442\u043e\u0433\u043e: ",l,"\u0440"),c.a.createElement(yt,{expenses:a,user:this.props.user,deleteExpense:this.deleteExpense})))}}]),a}(l.Component);Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(Nt);function St(e){var t=e.lumber,a=e.quantity,l=e.setLumber,r=e.pineBrus,s=e.pineDoska,o=e.larchBrus,m=e.larchDoska,u=e.label,i=e.lumber_input_label,d=i+"_quantity";return c.a.createElement("div",{className:""},c.a.createElement(z.a,{htmlFor:"grouped-native-select",className:"font-19 font-600 color-black"},u),c.a.createElement(G.a,Object(n.a)({native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t,onChange:l,name:i},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430"},r.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},o.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0441\u043d\u0430"},s.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),c.a.createElement(H.a,{className:"mt-3",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",name:d,onChange:l,value:a}))}function Tt(e){var t=e.resaw,a=e.message,n="mb-1 font-15 font-400 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.created_at),c.a.createElement("p",{className:n},"\u041f\u0435\u0440\u0435\u043f\u0435\u043b\u0438\u043b\u0438: ",t.lumber_in_quantity,"\u0448\u0442 ",t.lumber_in," "),c.a.createElement("p",{className:n},"\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438: ",t.lumber_out_quantity,"\u0448\u0442 ",t.lumber_out," ")),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function wt(e){var t=e.resaw,a=e.saveData,n=e.back,l=e.lumbers,r=ve(l,t.lumber_in),s=ve(l,t.lumber_out),o="mb-1 font-15 font-400 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:o},"\u041f\u0435\u0440\u0435\u043f\u0438\u043b\u0438\u0432\u0430\u0435\u043c : ",r.name," ",t.lumber_in_quantity," \u0448\u0442"),c.a.createElement("p",{className:o},"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c : ",s.name," ",t.lumber_out_quantity," \u0448\u0442")),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:n,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l mt-2"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Ot(e){var t=e.list,a=e.deleteResaw,n=e.user;return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("table",{className:"table table-sm",style:{lineHeight:"15px"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0434\u0430\u0442\u0430\\\u043a\u0442\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u043b"),c.a.createElement("th",null,"\u0447\u0442\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u043b\u0438\u0432\u0430\u043b\u0438"),c.a.createElement("th",null,"\u0432\u043e \u0447\u0442\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u043b\u0438\u043b\u0438")),c.a.createElement("tbody",null,t.length>0&&t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.created_at),c.a.createElement("span",{className:"font-600"},e.who)),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.lumber_in_quantity,"\u0448\u0442 ",e.lumber_in),c.a.createElement("span",{className:"font-italic"},e.lumber_in_wood_species)),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.lumber_out_quantity,"\u0448\u0442 ",e.lumber_out),c.a.createElement("span",{className:"font-italic"},e.lumber_out_wood_species)),(n.is_boss||n.is_capo)&&c.a.createElement("td",{className:"mr-3"},c.a.createElement("button",{className:"btn btn-s bg-red1-light mr-2 text-uppercase",onClick:function(){return a(e.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c")))}))))))}var Rt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumber_in:null,lumber_in_quantity:null,lumber_out:null,lumber_out_quantity:null,createdResaw:null,dataToSave:null,resawsList:[]},n.setLumber=n.setLumber.bind(Object(F.a)(n)),n.preSave=n.preSave.bind(Object(F.a)(n)),n.saveData=n.saveData.bind(Object(F.a)(n)),n.deleteResaw=n.deleteResaw.bind(Object(F.a)(n)),n.back=n.back.bind(Object(F.a)(n)),n}return Object(V.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_SALE_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,larchBrus:a.larch_brus_lumbers,pineDoska:a.pine_doska_lumbers,larchDoska:a.larch_doska_lumbers,lumbers:a.lumbers})})),g()({method:"get",url:_.RESAWS,headers:{Authorization:"JWT ".concat(t)},params:me({rama:this.props.ramaToSee.id})}).then((function(t){var a=t.data;e.setState({resawsList:a.results})}))}},{key:"setLumber",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value))}},{key:"preSave",value:function(){var e=this.state,t={lumber_in:e.lumber_in,lumber_in_quantity:e.lumber_in_quantity,lumber_out:e.lumber_out,lumber_out_quantity:e.lumber_out_quantity,rama:this.props.ramaToSee.id};this.setState({dataToSave:t})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.MANAGER_RESAW_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdResaw:t.data.created,resawsList:t.data.resaws})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})}))}},{key:"deleteResaw",value:function(e){var t=this,a=localStorage.getItem("token");g()({method:"delete",url:_.manager_delete_resaw(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(e){t.setState({resawsList:e.data.resaws})}))}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"render",value:function(){var e=this.state,t=e.createdResaw,a=e.dataToSave,n=e.message,l=e.resawsList,r=this.props,s=r.user;r.ramaToSee;return c.a.createElement("div",{className:""},t?c.a.createElement(Tt,{resaw:t,message:n}):a?c.a.createElement(wt,{resaw:a,saveData:this.saveData,back:this.back,lumbers:this.state.lumbers}):(s.is_boss||s.is_capo)&&c.a.createElement("div",{className:"card card-style mt-3"},c.a.createElement("div",{className:"content"},c.a.createElement(St,{lumber:this.state.lumber_in,quantity:this.state.lumber_in_quantity,setLumber:this.setLumber,pineBrus:this.state.pineBrus,pineDoska:this.state.pineDoska,larchBrus:this.state.larchBrus,larchDoska:this.state.larchDoska,label:"\u0427\u0442\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u043b\u0438\u0432\u0430\u0435\u043c?",lumber_input_label:"lumber_in"}),c.a.createElement("div",{className:"mt-3"},c.a.createElement(St,{lumber:this.state.lumber_out,quantity:this.state.lumber_out_quantity,setLumber:this.setLumber,pineBrus:this.state.pineBrus,pineDoska:this.state.pineDoska,larchBrus:this.state.larchBrus,larchDoska:this.state.larchDoska,label:"\u0427\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c?",lumber_input_label:"lumber_out"})),c.a.createElement("button",{className:"btn btn-l bg-highlight mt-3",onClick:this.preSave},"\u0414\u0430\u043b\u0435\u0435"))),c.a.createElement(Ot,{list:l,deleteResaw:this.deleteResaw,user:s}))}}]),a}(l.Component),jt=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,ramaToSee:e.auth.ramaToSee,state:e}}),(function(e){return{}}))(Rt);function Ct(e,t){var a=function(a){Object(q.a)(l,a);var n=Object(M.a)(l);function l(){return Object(L.a)(this,l),n.apply(this,arguments)}return Object(V.a)(l,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.checkToken(e)}},{key:"render",value:function(){var a=this.props.state.auth,n=a.fetching,l=a.user,r=!1;return this.props.isLoggedIn&&(t.includes("manager")&&l.is_manager&&(r=!0),t.includes("boss")&&l.is_boss&&(r=!0),t.includes("capo")&&l.is_capo&&(r=!0),t.includes("seller")&&l.is_seller&&(r=!0),t.includes("is_ramshik")&&l.is_ramshik&&(r=!0)),n?c.a.createElement("p",null,"Loading"):this.props.isLoggedIn?r?c.a.createElement(e,this.props):c.a.createElement("h4",{className:"text-center my-5"},"\u041d\u0435\u0442 \u043f\u0440\u0430\u0432"):c.a.createElement(m.a,{to:"/"})}}]),l}(c.a.Component);return Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,state:e}}),(function(e){return{checkToken:function(t){return e(k.default.checkTokenRequest(t))}}}))(a)}var xt=function(e){var t=Object(h.a)(),a=Object(i.createStore)(I,Object(d.composeWithDevTools)(Object(i.applyMiddleware)(t)));t.run(x);return a}();s.a.render(c.a.createElement(u.a,{store:xt},c.a.createElement(D.a,{maxSnack:3},c.a.createElement(o.a,null,c.a.createElement("div",Object(n.a)({className:"app",id:"page"},"className",""),c.a.createElement(ce,null),c.a.createElement("div",{className:"page-content header-clear"},c.a.createElement(m.d,null,c.a.createElement(m.b,{exact:!0,path:"/",component:ae}),c.a.createElement(m.b,{exact:!0,path:"/manager/ramshik_payments/",component:Ct(de,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/shift_list/",component:Ct(we,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/stock/",component:Ct(Ce,["manager","boss","capo","seller"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/sale_list/",component:Ct(Et,["manager","boss","capo","seller"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/shift/create_shift/",component:Ct(Xe,["manager"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/sales/create_sale/",component:Ct(ht,["manager"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/sales/calc/",component:Ct(nt,["manager","boss","capo","seller"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/expenses/",component:Ct(Nt,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/daily_report/",component:Ct(_t,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/resaws/create/",component:Ct(jt,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/rawstock/create_income/",component:Ct(Ve,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/rawstock/income_timbers/",component:Ct(Me,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/manager/quotas/overview/",component:Ct(Pe,["manager","boss","capo"])}),c.a.createElement(m.b,{exact:!0,path:"/ramshik/shift/list/",component:Ct(Ze,["is_ramshik"])}),c.a.createElement(m.b,{exact:!0,path:"/ramshik/main/",component:Ct(et,["is_ramshik"])}))))))),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.a19c6d49.chunk.js.map