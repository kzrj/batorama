{"version":3,"sources":["redux/redux-sauce/auth.js","redux/api/endpoints.js","redux/api/authApi.js","redux/sagas/authSagas.js","redux/sagas/index.js","redux/store/index.js","components/CommonForms.js","containers/Main.js","containers/HeaderContainer.js","containers/manager/RamshikPayments.js","redux/api/utils.js","containers/manager/Shifts.js","components/utils.js","containers/manager/Stock.js","components/ShiftCreateComponent.js","containers/ramshik/Shift.js","containers/ramshik/ShiftList.js","containers/ramshik/Payouts.js","components/kladman/SaleCreate.js","containers/kladman/SaleCreate.js","components/kladman/SaleCreateSchema1.js","containers/kladman/SaleCreateSchema1.js","components/kladman/SaleCreatePerekup.js","containers/kladman/SaleCreatePerekup.js","components/kladman/SaleCreateChina.js","containers/kladman/SaleCreateChina.js","components/kladman/SaleCalc.js","containers/kladman/SaleCalc.js","containers/kladman/SaleCreateCommon.js","containers/manager/SaleList.js","containers/AuthContainer.js","index.js"],"names":["createActions","loginRequest","loginSuccess","loginFailure","signupRequest","signupSuccess","signupFailure","logoutRequest","logoutSuccess","logoutFailure","checkTokenRequest","checkTokenSuccess","checkTokenFail","resetAuthErrors","restorePasswordRequest","restorePasswordSuccess","restorePasswordFailure","toggleModal","checkAuthRequest","checkAuthSuccess","checkAuthFail","Types","Creators","AuthTypes","INITIAL_STATE","Immutable","fetching","user","error","isLoggedIn","isLoggingIn","AuthSelectors","getUser","state","data","merge","action","signUpRequest","signUpSuccess","signUpFailure","isAuthModalOpen","payload","isLogginIn","reducer","createReducer","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_FAILURE","CHECK_TOKEN_REQUEST","CHECK_TOKEN_FAIL","CHECK_TOKEN_SUCCESS","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAILURE","TOGGLE_MODAL","RESET_AUTH_ERRORS","CHECK_AUTH_SUCCESS","apiUrl","JWT_AUTH","JWT_CHECK_TOKEN","RAMSHIK_SHIFT_CREATE_DATA","RAMSHIK_SHIFT_CREATE","RAMSHIK_SHIFT_LIST","RAMSHIK_PAYOUTS","EMPLOYEE_PAYOUT_INIT_DATA","EMPLOYEE_PAYOUT","MANAGER_SHIFT_LIST","MANAGER_STOCK","MANAGER_SALE_LIST","KLADMAN_SALE_INIT_DATA","KLADMAN_SALE_INIT_DATA_CHINA","KLADMAN_SALE_CREATE","KLADMAN_SALE_SCHEMA1_CREATE","KLADMAN_SALE_CHINA_CREATE","KLADMAN_SALE_CALC_DATA","logIn","username","password","axios","post","endpoints","then","response","status","Error","token","catch","err","Object","keys","localStorage","setItem","checkToken","logOut","removeItem","signUp","email","phone","SIGNUP","checkAuth","getItem","group","indexOf","message","api","put","AuthActions","call","root","authApi","AuthApi","all","takeEvery","reducers","combineReducers","auth","require","form","formReducer","renderTextField","label","placeholder","input","multiline","meta","touched","invalid","labelClass","custom","TextField","fullWidth","helperText","InputLabelProps","className","LoginForm","props","parentSubmit","pristine","submitting","reset","handleSubmit","eventFetching","eventError","onSubmit","Field","component","name","margin","type","disabled","MenuItem","history","useHistory","onClick","push","to","style","title","AfterLogin","logout","is_ramshik","is_senior_ramshik","is_manager","is_kladman","reduxForm","validate","values","errors","forEach","field","Main","login","bind","this","CircularProgress","Component","connect","routing","loginForm","dispatch","HeaderComp","histoty","Header","modalOpen","LastOperations","lastOperations","length","lineHeight","map","op","created_at","record_type","employee","amount","RamshikPayments","employees","activeEmployee","last_payouts","payout","get","res","initData","setState","formData","FormData","append","id","method","url","headers","errorObj","statusText","JSON","stringify","property","parseErrorData","nickname","cash","value","onChange","e","target","ShiftsTable","shiftList","shift","date","lumber_records","lumber","quantity","volume","rate","emp","employee_cash","toFixed","cash_per_employee","ManagerShiftList","results","lodashToggle","array","item","_","xor","getObjectbyId","list","obj","element","toggleArrayDictById","arr","alreadyIn","index","i","splice","replaceItemInDictArrayById","itemInList","slice","TrRow","showNull","changeMarketCost","show","current_stock_quantity","wood_species","woodSpeciesClass","current_stock_volume","market_cost","stock_total_cash","ManagerStock","lumbers","lumberId","parseInt","totalVolume","totalCash","Switch","checked","LumberTable","lumber_record","employee_rate","total_cash","ShiftToSave","saveData","back","rowClass","note","raw_records","employeesData","CreatedShift","back_calc_volume","back_calc_cash","back_calc_cash_per_employee","EmployeesBlock","activeEmployees","addEmployee","includes","aEmp","ShiftCreateComponent","initLumbers","totaCash","createdShift","dataToSave","calcRow","calcRowAndTotal","calcTotalVolume","calcTotalCash","preSave","qnty","moreThan10","volume_total","totalVolumeVar","totalCashVar","calcLumber","lmbr","idx","eIds","shift_type","key","RamshikShiftList","RamshikPayouts","ramshik","LumbersTable","SaleToCreate","sale","console","log","add_expenses","CreatedSale","AddNote","useState","open","setOpen","setNote","rowsMax","variant","LumberToSale","setLumberID","calcRowQnty","calcRowCash","setRowCash","pineBrus","larchBrus","pineDoska","larchDoska","InputLabel","htmlFor","Select","native","defaultValue","data-id","aria-label","pb","lb","pd","ld","AddExpensesComp","setAddExpenses","addExpenses","SaleCreateComponent","lumbersToSale","createdSale","setData","addLumberToSale","calcTotal","pine_brus_lumbers","larch_brus_lumbers","pine_doska_lumbers","larch_doska_lumbers","lumberData","parseFloat","clear","selling_price","selling_total_cash","SaleSchema1ToCreate","sellers","seller","sale_cash","loader","bonus_kladman","deliveryFee","seller_fee","loader_fee","kladman_fee","delivery_fee","calcRowRamaCash","calcRowVolume","calcRowCash1Pc","qnty_in_cube","selling_volume_total","rama_total_cash","rama_price","Schema1CheckList","checkLoader","bonusKladman","FormControlLabel","control","Checkbox","color","FormControl","s","SaleCreateSchema1Container","setDeliveryFee","kladmanId","kladman_id","selling_volume","selling_price_1","sale_type","SalePerekupToCreate","net_rama_cash","DeliveryFeeComp","SaleCreatePerekupContainer","china_name","china_volume","SaleCreateChinaContainer","LumberInputs","price","LumbersToSale","turnCalc","delLumber","calcRoundRowQnty","calcRoundRowVolume","calcChinaRowQnty","calcChinaRowVolume","lumberRef","useRef","ref","current","scrollIntoView","calcType","SaleCalcContainer","lumberToSale","round_volume","SaleCreateCommonContainer","SalesTable","sales","totals","seller_name","total_selling_cash","total_seller_fee","total_loader_fee","total_kladman_fee","total_delivery_fee","total_add_expenses","SaleList","saleList","params","requireAuthentication","AuthenticatedComponent","React","store","sagaMiddleware","createSagaMiddleware","createStore","composeWithDevTools","applyMiddleware","run","rootSaga","configureStore","ReactDOM","render","maxSnack","exact","path","ManagerRamshikPayments","document","getElementById"],"mappings":"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","file":"static/js/main.dcb521d7.chunk.js","sourcesContent":["import { createReducer, createActions } from 'reduxsauce'\nimport Immutable from 'seamless-immutable'\n\n/* ------------- Types and Action Creators ------------- */\n\nconst { Types, Creators } = createActions({\n  loginRequest: ['data'],\n  loginSuccess: ['user'],\n  loginFailure: ['error'],\n\n  signupRequest: ['data'],\n  signupSuccess: ['user'],\n  signupFailure: ['error'],\n\n  logoutRequest: null,\n  logoutSuccess: null,\n  logoutFailure: ['error'],\n\n  checkTokenRequest: ['payload'],\n  checkTokenSuccess: ['payload'],\n  checkTokenFail: ['error'],\n\n  resetAuthErrors: null,\n\n  restorePasswordRequest: ['data'],\n  restorePasswordSuccess: null,\n  restorePasswordFailure: ['error'],\n\n  toggleModal: ['isAuthModalOpen'],\n  \n  checkAuthRequest: ['payload'],\n  checkAuthSuccess: ['payload'],\n  checkAuthFail: null\n})\n\nexport const AuthTypes = Types\nexport default Creators\n\n/* ------------- Initial State ------------- */\n\nexport const INITIAL_STATE = Immutable({\n  fetching: false,\n  user: null,\n  error: '',\n  isLoggedIn: false,\n  isLoggingIn: false\n})\n\n/* ------------- Selectors ------------- */\n\nexport const AuthSelectors = {\n  getUser: state => state.user\n}\n\n/* ------------- Reducers ------------- */\n\n// login request\nexport const loginRequest = (state, { data }) => {\n  return state.merge({ fetching: true, user: null, isLoggingIn: true, isLoggedIn: false })\n}\n  \n\n// login success\nexport const loginSuccess = (state, { user }) => {\n  return state.merge({ fetching: false, error: null, user: user, isLoggedIn: true, isLoggingIn: false })\n}\n\n// login fail\nexport const loginFailure = (state, action) => {\n  const { error } = action\n  return state.merge({ fetching: false, error: error, user: null, isLoggedIn: false, isLoggingIn: false })\n}\n\n// register request\nexport const signUpRequest = (state, { data }) =>\n  state.merge({ fetching: true, user: {}, isLoggingIn: true, isLoggedIn: false })\n\n// register success\nexport const signUpSuccess = (state, { user }) => {\n  return state.merge({ fetching: false, error: null, user: user, isLoggingIn: false, isLoggedIn: true  })\n}\n\n// register fail\nexport const signUpFailure = (state, { error }) => {\n  return state.merge({ fetching: false, error: error, user: null, isLoggingIn: false, isLoggedIn: false  })\n}\n\n// logout request\nexport const logoutRequest = (state) => {\n  return state.merge({ fetching: true, isLoggingIn: true })\n}\n  \n\n// logout success\nexport const logoutSuccess = (state) => {\n  return state.merge({ fetching: false, error: null, user: null, isLoggingIn: false, isLoggedIn: false  })\n}\n\n// logout fail\nexport const logoutFailure = (state, { error }) => {\n  return state.merge({ fetching: false, error: error, isLoggingIn: false })\n}\n\nexport const resetAuthErrors = (state) => {\n  return state.merge({ fetching: false, error: null })\n}\n\n// auth modal toggle \n\nexport const toggleModal = (state, { isAuthModalOpen }) => {\n  return state.merge({ isAuthModalOpen, error: null })\n}\n  \nexport const checkTokenRequest = (state, { payload }) => {\n  return state.merge({ fetching: true })\n}\n\nexport const checkTokenSuccess = (state, { payload }) => {\n  return state.merge({ fetching: false, error: null, user: payload.user, isLoggedIn: true, isLoggingIn: false })\n}\n\nexport const checkTokenFail = (state, { error }) => {\n  return state.merge({ fetching: false, error: error, user: null, isLoggedIn: false, isLoggingIn: false })\n}\n\nexport const checkAuthSuccess = (state, { payload }) => {\n  return state.merge({ user: payload, isLoggedIn: true, isLogginIn: false })\n}\n\n/* ------------- Hookup Reducers To Types ------------- */\n\nexport const reducer = createReducer(INITIAL_STATE, {\n  [Types.LOGIN_REQUEST]: loginRequest,\n  [Types.LOGIN_SUCCESS]: loginSuccess,\n  [Types.LOGIN_FAILURE]: loginFailure,\n  [Types.SIGNUP_REQUEST]: signUpRequest,\n  [Types.SIGNUP_SUCCESS]: signUpSuccess,\n  [Types.SIGNUP_FAILURE]: signUpFailure,\n  [Types.CHECK_TOKEN_REQUEST]: checkTokenRequest,\n  [Types.CHECK_TOKEN_FAIL]: checkTokenFail,\n  [Types.CHECK_TOKEN_SUCCESS]: checkTokenSuccess,\n  [Types.LOGOUT_REQUEST]: logoutRequest,\n  [Types.LOGOUT_SUCCESS]: logoutSuccess,\n  [Types.LOGOUT_FAILURE]: logoutFailure,\n  [Types.TOGGLE_MODAL]: toggleModal,\n  [Types.RESET_AUTH_ERRORS]: resetAuthErrors,\n  [Types.CHECK_AUTH_SUCCESS]: checkAuthSuccess\n})\n","export const url = 'http://35.222.169.29';\r\nexport const apiUrl = `${url}/api`;\r\n\r\nexport default {\r\n    JWT_AUTH: `${apiUrl}/jwt/api-token-auth/`,\r\n    JWT_CHECK_TOKEN: `${apiUrl}/jwt/api-token-verify/`,\r\n\r\n    // ramshik api\r\n    RAMSHIK_SHIFT_CREATE_DATA: `${apiUrl}/ramshik/shifts/create/init_data/`,\r\n    RAMSHIK_SHIFT_CREATE: `${apiUrl}/ramshik/shifts/create/`,\r\n    RAMSHIK_SHIFT_LIST: `${apiUrl}/ramshik/shifts/list/`,\r\n    RAMSHIK_PAYOUTS: `${apiUrl}/ramshik/payouts/`,\r\n\r\n    // manager api\r\n    EMPLOYEE_PAYOUT_INIT_DATA: `${apiUrl}/manager/ramshik_payments/init_data/`,\r\n    EMPLOYEE_PAYOUT: `${apiUrl}/manager/ramshik_payments/ramshik_payout/`,\r\n    MANAGER_SHIFT_LIST: `${apiUrl}/manager/shift_list/`,\r\n    MANAGER_STOCK: `${apiUrl}/manager/stock/`,\r\n    MANAGER_SALE_LIST: `${apiUrl}/manager/sale_list/`,\r\n\r\n    // kladman api\r\n    KLADMAN_SALE_INIT_DATA: `${apiUrl}/kladman/sales/create/init_data/`,\r\n    KLADMAN_SALE_INIT_DATA_CHINA: `${apiUrl}/kladman/sales/create/init_data_china/`,\r\n    KLADMAN_SALE_CREATE: `${apiUrl}/kladman/sales/create/`,\r\n    KLADMAN_SALE_SCHEMA1_CREATE: `${apiUrl}/kladman/sales/create_schema1/`,\r\n    KLADMAN_SALE_CHINA_CREATE: `${apiUrl}/kladman/sales/create_china/`,\r\n    KLADMAN_SALE_CALC_DATA: `${apiUrl}/kladman/sales/calc_data/`,\r\n    // MANAGER_SHIFT_LIST: `${apiUrl}/manager/shift_list/`,\r\n}","// @flow\n\nimport axios from 'axios';\nimport endpoints from './endpoints';\n\n\nconst create = () => {\n  const logIn = (data: { username: string, password: string}): void => {\n    const { username, password } = data;\n    \n     return axios.post(endpoints.JWT_AUTH, { username, password })\n      .then(response => {\n        if (response.status < 200 || response.status >= 300) {\n            throw new Error(response);\n        }\n        return { token: response.data.token, user: response.data.user };\n      })\n      .catch(err => {\n        throw new Error(err.response.data[Object.keys(err.response.data)[0]][0])\n      })\n      .then((response) => {\n          localStorage.setItem('token', response.token);\n          return response.user;\n      })\n  }\n\n  const logOut = () => {\n    localStorage.removeItem('token');\n  }\n\n  const checkToken = (payload: string) => {\n    return axios.post(endpoints.JWT_CHECK_TOKEN, { token: payload })\n      .then(response => {\n        return { user: response.data.user }\n      })\n      .catch(err => {\n        throw new Error(err.response.data[Object.keys(err.response.data)[0]][0])\n      })\n  }\n\n  const signUp = (payload: { email: string, phone: string}) => {\n    const { email, phone } = payload;\n    return axios.post(endpoints.SIGNUP, { email, phone })\n      .then(response => {\n        return response.data\n      })\n      .catch(err => {\n        throw new Error(err.response.data[Object.keys(err.response.data)[0]])\n      })\n  }\n\n  const checkAuth = (payload: string ) => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('Нет доступа')\n    }\n    return axios.post(endpoints.JWT_CHECK_TOKEN, { token })\n      .then(({ data }) => {\n        const { user } = data;\n        const { group } = user;\n\n        // TODO - in response group is number (id), must be a string\n        if (payload.indexOf(group) === -1) {\n          throw new Error('Нет доступа')\n        }\n        return user\n      })\n      .catch(err => {\n        throw new Error(err.message)\n      })\n  }\n\n  return {\n    logIn,\n    checkToken,\n    logOut,\n    signUp,\n    checkAuth\n  }\n}\n\nexport default {\n  create\n}","import { put, call } from 'redux-saga/effects';\r\n// import { push } from 'react-router-redux';\r\n// import Notifications from 'react-notification-system-redux';\r\n\r\nimport AuthActions from '../redux-sauce/auth'\r\n\r\nexport function * logIn (api, action) {\r\n  const { data } = action;\r\n  yield put(AuthActions.resetAuthErrors())\r\n  try {\r\n    let response = yield call(api.logIn, data)\r\n    yield put(AuthActions.loginSuccess(response))\r\n    yield put(AuthActions.toggleModal(false))\r\n  } catch (e) {\r\n    yield put(AuthActions.loginFailure(e.message))\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n  }\r\n}\r\n\r\nexport function * signUp (api, action) {\r\n  const { data } = action\r\n  try {\r\n    let response = yield call(api.signUp, data);\r\n    yield put(AuthActions.signupSuccess(response));\r\n    // yield put(push('/'));\r\n  } catch (e) {\r\n    yield put(AuthActions.signupFailure(e.message))\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n  }\r\n}\r\n\r\nexport function * logOut (api, action) {\r\n  try {\r\n    yield call(api.logOut)\r\n    yield put(AuthActions.logoutSuccess())\r\n  } catch (e) {\r\n    yield put(AuthActions.logoutFailure(e.message))\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n  }\r\n}\r\n\r\nexport function* checkToken(api, action) {\r\n  const { payload } = action;\r\n  try {\r\n    let response = yield call(api.checkToken, payload);\r\n    yield put(AuthActions.checkTokenSuccess(response));\r\n  } catch (e) {\r\n    yield put(AuthActions.checkTokenFail(e.message))\r\n  }\r\n}\r\n\r\nexport function* checkAuth(api, action) {\r\n  const { payload } = action;\r\n  try {\r\n    const response = yield call(api.checkAuth, payload);\r\n    yield put(AuthActions.checkAuthSuccess(response));\r\n  } catch (e) {\r\n    // yield put(push('/'));\r\n    // yield put(Notifications.error({ title: 'Ошибка', message: e.message, position: 'tc' }));\r\n    yield put(AuthActions.checkAuthFail(e.message))\r\n  }\r\n}","import { takeEvery, all, takeLatest } from \"redux-saga/effects\";\r\n\r\n/* -------------- API -------------- */\r\nimport AuthApi from \"../api/authApi\";\r\n\r\n/* ------------- Types ------------- */\r\nimport { AuthTypes } from \"../redux-sauce/auth\";\r\n\r\n/* ------------- Sagas ------------- */\r\nimport { logIn, logOut, checkToken, partialUpdateUser } from \"./authSagas\";\r\n// import * as feedbacksSaga from './feedbacksSagas';\r\n\r\nconst authApi = AuthApi.create();\r\n\r\nexport default function* root() {\r\n  yield all([\r\n    takeEvery(AuthTypes.LOGIN_REQUEST, logIn, authApi),\r\n    takeEvery(AuthTypes.LOGOUT_REQUEST, logOut, authApi),\r\n    takeEvery(AuthTypes.CHECK_TOKEN_REQUEST, checkToken, authApi),\r\n  ]);\r\n}\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from '../sagas';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nexport const reducers = combineReducers({\r\n  auth: require('../redux-sauce/auth').reducer,\r\n  \r\n  form: formReducer,\r\n})\r\n\r\nexport default (history) => {\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const store = createStore(reducers, composeWithDevTools(\r\n    applyMiddleware(sagaMiddleware)\r\n  ));\r\n\r\n  let sagasManager = sagaMiddleware.run(rootSaga)\r\n\r\n  if (module.hot) {\r\n    module.hot.accept(() => {\r\n      const nextRootReducer = require('./').reducers\r\n      store.replaceReducer(nextRootReducer)\r\n\r\n      const newYieldedSagas = require('../sagas').default\r\n      sagasManager.cancel()\r\n      sagasManager.done.then(() => {\r\n        sagasManager = sagaMiddleware.run(newYieldedSagas)\r\n      })\r\n    })\r\n  }\r\n\r\n  return store\r\n}\r\n\r\n","import React, { Component, useState  } from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\n\r\n// import { getToday } from '../utils';\r\n// import { ErrorOrMessage } from '../CommonComponents';\r\n\r\nexport const renderFromHelper = ({ touched, error }) => {\r\n  if (!(touched && error)) {\r\n    return\r\n  } else {\r\n    return <FormHelperText>{touched && error}</FormHelperText>\r\n  }\r\n}\r\n\r\nexport const renderTextField = ({\r\n  label,\r\n  placeholder,\r\n  input,\r\n  multiline,\r\n  meta: { touched, invalid, error },\r\n  labelClass,\r\n  ...custom\r\n}) => (\r\n  <TextField\r\n    fullWidth={true}\r\n    label={label}\r\n    placeholder={placeholder}\r\n    error={touched && invalid}\r\n    helperText={touched && error}\r\n    {...input}\r\n    {...custom}\r\n    multiline={multiline}\r\n    InputLabelProps={{\r\n      className: labelClass,\r\n    }}\r\n  />\r\n)\r\n\r\nexport function renderSelectField ({\r\n  input,\r\n  label,\r\n  formClass,\r\n  labelClass,\r\n  meta: { touched, error },\r\n  children,\r\n  options,\r\n  menuItemClass,\r\n  ...custom\r\n}) {\r\n\r\n  return (\r\n  <FormControl error={touched && error} className={formClass} fullWidth={true}>\r\n    <InputLabel className={labelClass}>{label}</InputLabel>\r\n    <Select\r\n      {...input}\r\n      {...custom}\r\n      fullWidth={true}\r\n      // classes={{\r\n      //   root: itemClassF(input.value),\r\n      //   // label: classes.label, // class name, e.g. `classes-nesting-label-x`\r\n      // }}\r\n    >\r\n      {options.map(option =>\r\n          <MenuItem value={option.value} \r\n            // classes={{\r\n            //   root: itemClassF(option.value),\r\n            //   // label: classes.label, // class name, e.g. `classes-nesting-label-x`\r\n            // }}\r\n            >\r\n            {option.label}\r\n          </MenuItem>\r\n          )}\r\n    </Select>\r\n    {renderFromHelper({ touched, error })}\r\n  </FormControl>\r\n  )\r\n}\r\n\r\nexport const renderChildrenSelectField = ({\r\n  input,\r\n  label,\r\n  formClass,\r\n  labelClass,\r\n  meta: { touched, error },\r\n  children,\r\n  options,\r\n  ...custom\r\n}) => (\r\n  <FormControl error={touched && error} className={formClass} fullWidth={true}>\r\n    <InputLabel className={labelClass}>{label}</InputLabel>\r\n    <Select\r\n      {...input}\r\n      {...custom}\r\n      fullWidth={true}\r\n    >\r\n      {children}\r\n    </Select>\r\n    {renderFromHelper({ touched, error })}\r\n  </FormControl>\r\n)\r\n\r\nexport const renderChildrenSelectFieldStandard = ({\r\n  input,\r\n  label,\r\n  formClass,\r\n  labelClass,\r\n  meta: { touched, error },\r\n  children,\r\n  options,\r\n  ...custom\r\n}) => (\r\n  \r\n  <FormControl className={formClass}>\r\n    <InputLabel htmlFor=\"grouped-native-select\">Grouping</InputLabel>\r\n    <Select native defaultValue=\"\" id=\"grouped-native-select\">\r\n      <option aria-label=\"None\" value=\"\" />\r\n      <optgroup label=\"Category 1\">\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n      </optgroup>\r\n      <optgroup label=\"Category 2\">\r\n        <option value={3}>Option 3</option>\r\n        <option value={4}>Option 4</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n        <option value={1}>Option 1</option>\r\n        <option value={2}>Option 2</option>\r\n      </optgroup>\r\n    </Select>\r\n  </FormControl>\r\n  // <FormControl error={touched && error} className={formClass} fullWidth={true}>\r\n  //   <InputLabel className={labelClass}>{label}</InputLabel>\r\n  //   <input\r\n  //     type='select'\r\n  //   >\r\n  //     {children}\r\n  //   </input>\r\n  //   {renderFromHelper({ touched, error })}\r\n  // </FormControl>\r\n)\r\n\r\nexport const renderDateTimeField = ({\r\n  label,\r\n  placeholder,\r\n  input,\r\n  meta: { touched, invalid, error },\r\n  labelClass,\r\n  ...custom\r\n}) => (\r\n\r\n  <TextField\r\n    fullWidth={true}\r\n    label={label}\r\n    type=\"date\"\r\n    error={touched && invalid}\r\n    helperText={touched && error}\r\n    {...input}\r\n    {...custom}\r\n    InputLabelProps={{\r\n      className: labelClass,\r\n      shrink: true \r\n    }}\r\n  />\r\n)\r\n\r\nexport const renderSocials = ({ fields, meta: { error, submitFailed } }) => (\r\n  <div className=''>\r\n    <button className='btn btn-m mb-2 rounded-s text-uppercase font-900 shadow-s\r\n          bg-blue2 text-wrap' type=\"button\" onClick={() => fields.push({})}>\r\n      Добавить пиломатериал\r\n    </button>\r\n    {submitFailed && error && <span>{error}</span>}\r\n\r\n  {fields.map((lumber, index) => (\r\n    <div key={index} >\r\n      <Field\r\n        name={`${lumber}.lumber`}\r\n        type=\"text\"\r\n        // formClass='mx-1 align-middle w-25'\r\n        component={renderChildrenSelectFieldStandard}\r\n        \r\n      >\r\n        <option className='font-10' value='vk' >\r\n          vk\r\n        </option>\r\n        <option className='font-10' value='inst'>instagram</option>\r\n        <option className='font-10' value='web'>web</option>\r\n      </Field>\r\n      \r\n      <Field\r\n        name={`${lumber}.quantity`}\r\n        type=\"number\"\r\n        component={renderTextField}\r\n        label=\"количество\"\r\n        // style={{'width':'60%'}}\r\n        // placeholder='https://somewebsite.com'\r\n      />\r\n      <Field\r\n        name={`${lumber}.rate`}\r\n        type=\"number\"\r\n        component={renderTextField}\r\n        label=\"цена за 1м3\"\r\n      />\r\n\r\n      <p>asdasd{`${lumber}.quantity`}</p>\r\n\r\n      <span \r\n        className='btn btn-xxs ml-2 rounded-s font-900 shadow-s border-red2-dark bg-red2-light'\r\n        type=\"button\"\r\n        title=\"Remove Member\"\r\n        onClick={() => fields.remove(index)}>\r\n          X\r\n      </span>\r\n    </div>\r\n  ))}\r\n</div>\r\n)\r\n\r\nexport function LoginForm (props) {\r\n  const { parentSubmit, pristine, reset, submitting, handleSubmit, eventFetching, eventError, message }\r\n     = props\r\n  return (\r\n    <div className='card card-style'>\r\n      <div className='content'>\r\n        <form onSubmit={handleSubmit(parentSubmit)} className='' > \r\n          <Field \r\n            component={renderTextField}\r\n            label=\"Логин\" \r\n            name='username'\r\n            margin='dense'\r\n          />\r\n\r\n          <Field \r\n            component={renderTextField}\r\n            label=\"Пароль\" \r\n            name='password'\r\n            margin='dense'\r\n            type='password'\r\n          />\r\n\r\n          <button \r\n            className='btn btn-m mt-2 font-900 shadow-s bg-highlight text-wrap'\r\n            type=\"submit\"\r\n            disabled={pristine || submitting}>\r\n            Войти\r\n          </button>\r\n\r\n          {/* <ErrorOrMessage error={eventError} message={message} fetching={eventFetching}\r\n              className='mt-2 mb-0 mx-1 font-15' /> */}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst validateLoginForm = values => {\r\n  const errors = {}\r\n  const requiredFields = [\r\n    'username',\r\n    'password'\r\n  ]\r\n  \r\n  requiredFields.forEach(field => {\r\n    if (!values[field]) {\r\n      errors[field] = 'Обязательное поле'\r\n    }\r\n  })\r\n  return errors\r\n}\r\n\r\nLoginForm = reduxForm({\r\n  form: 'loginForm',\r\n  validate: validateLoginForm,\r\n})(LoginForm)\r\n"," import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { CircularProgress } from '@material-ui/core'\r\n\r\nimport AuthActions from '../redux/redux-sauce/auth';\r\n\r\nimport { LoginForm } from '../components/CommonForms';\r\n\r\n\r\nfunction MenuItem (props) {\r\n  let history = useHistory()\r\n\r\n  function handleClick() {\r\n    history.push(props.to);\r\n  }\r\n  return (\r\n    <div \r\n      className='card-style mx-0 my-1 pt-2'\r\n      onClick={handleClick}\r\n      style={{\r\n        'background': 'white',\r\n        // 'width': '510px',\r\n        // 'height': '100px',\r\n        'color': 'white',\r\n        'font-weight': 'bold',\r\n        'font-size': '1.5em',\r\n        'text-align': 'center',\r\n        'word-break': 'break-word',\r\n        'border-radius': '15px',\r\n        'line-height': '12px',\r\n      }}\r\n    >\r\n      <p>{props.title}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction AfterLogin (props) {\r\n  const { user, logout } = props\r\n  return (\r\n    user.is_ramshik ? \r\n      <div className=' '>\r\n        {/* <MenuItem title={'Смены список'} to={'/ramshik/shift/list/'}/> */}\r\n        {user.is_senior_ramshik &&\r\n          <MenuItem title={'Сдать смену'} to={'/ramshik/shift/create_shift/'}/>}\r\n        <MenuItem title={'Баланс и расчеты'} to={'/ramshik/payouts/'}/>\r\n      </div>\r\n    : user.is_manager ?\r\n      <div className=' '>\r\n        {/* <MenuItem title={'Склад. Текущие остатки'} to={'/manager/stock/'}/>\r\n        <MenuItem title={'Расчет рамщиков'} to={'/manager/ramshik_payments/'}/>\r\n        <MenuItem title={'Смены список'} to={'/manager/shift_list/'}/> */}\r\n        <MenuItem title={'Продажи список'} to={'/manager/sale_list/'}/>\r\n        {/* <MenuItem title={'Сдать смену'} to={'/manager/shift/create_shift/'}/> */}\r\n        <MenuItem title={'Создать продажу'} to={'/manager/sales/create_sale/'}/>\r\n        {/* <MenuItem title={'Создать схема1 продажу'} to={'/manager/sales/create_sale_schema1/'}/>\r\n        <MenuItem title={'Создать продажу перекуп'} to={'/manager/sales/create_sale_perekup/'}/>\r\n        <MenuItem title={'Создать продажу Китай'} to={'/manager/sales/create_sale_china/'}/> */}\r\n        <MenuItem title={'Калькулятор продавца'} to={'/manager/sales/calc/'}/>\r\n      </div>\r\n    : user.is_kladman && \r\n      <div className=' '>\r\n        <MenuItem title={'Склад. Текущие остатки'} to={'/kladman/stock/'}/>\r\n        <MenuItem title={'Создать продажу'} to={'/kladman/sales/create_sale/'}/>\r\n        <MenuItem title={'Продажи список'} to={'/kladman/sale_list/'}/>\r\n        <MenuItem title={'Смены список'} to={'/kladman/shift_list/'}/>\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\nclass Main extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n    }\r\n    this.login = this.login.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    \r\n  }\r\n\r\n  login () {\r\n    this.props.login(this.props.form.values)\r\n  }\r\n\r\n  render() {\r\n    const { isLoggedIn, fetching, user } = this.props.state.auth\r\n    return (\r\n      fetching \r\n        ? <CircularProgress />\r\n        : isLoggedIn \r\n            ? <AfterLogin user={user} logout={this.props.logout}/>\r\n            : <LoginForm parentSubmit={this.login} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  routing: state.routing,\r\n  state: state,\r\n  form: state.form.loginForm\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  login: (payload) => dispatch(AuthActions.loginRequest(payload)),\r\n  logout: (payload) => dispatch(AuthActions.logoutRequest(payload)),\r\n  checkToken: (token) => dispatch(AuthActions.checkTokenRequest(token)),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Main);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory  } from \"react-router-dom\";\r\n\r\n// actions\r\nimport AuthActions from '../redux/redux-sauce/auth';\r\n\r\n\r\nfunction HeaderComp (props) {\r\n  const histoty = useHistory()\r\n\r\n  function handleClickLogout () {\r\n    props.logout()\r\n    histoty.push('/')\r\n  }\r\n\r\n  function handleClickMenu () {\r\n    histoty.push('/')\r\n  }\r\n\r\n  return (\r\n    <div className='d-flex justify-content-between align-items-baseline px-3 py-2'>\r\n      <h4 onClick={handleClickMenu}>Рама</h4>\r\n      <button className='btn btn-sx bg-red1-light' onClick={handleClickLogout}>\r\n        выйти\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      modalOpen: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      this.props.checkToken(token);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { isLoggedIn, fetching, user } = this.props.auth\r\n\r\n    return (\r\n      user\r\n      ? <div className='header' >\r\n          <HeaderComp logout={this.props.logout}/>\r\n        </div>\r\n      : 'net login'\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  state: state,\r\n  auth: state.auth,\r\n  routing: state.routing,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  checkToken: (token) => dispatch(AuthActions.checkTokenRequest(token)),\r\n  logout: () => dispatch(AuthActions.logoutRequest()),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header);","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\n\r\nexport function LastOperations (props){\r\n  const { lastOperations } = props\r\n  return (\r\n    <div className='card card-style mt-0'>\r\n      <div className='content'>\r\n        <h4>Последние операции</h4>\r\n        {lastOperations.length > 0 \r\n        ? <table className='table table-sm table-responsive' style={{lineHeight: '16px'}}>\r\n            <thead className=''>\r\n              <th>Дата</th>\r\n              <th>Тип</th>\r\n              <th>Сотрудник</th>\r\n              <th>Сумма</th>\r\n            </thead>\r\n            <tbody>\r\n              {lastOperations.map(op => \r\n                <tr>\r\n                  <td className='text-nowrap'>{op.created_at}</td>\r\n                  <td>\r\n                    {op.record_type === 'withdraw_employee' \r\n                      ? 'Обнал рамщику' : 'Зачисление рамщику со смены'}\r\n                  </td>\r\n                  <td>{op.employee}</td>\r\n                  <td className={op.record_type === 'withdraw_employee' \r\n                      ? 'color-red1-light font-16' :'color-green1-light font-16'}>\r\n                    {op.record_type === 'withdraw_employee' ? '-' + op.amount : '+' + op.amount}\r\n                  </td>\r\n                </tr>\r\n                )}\r\n            </tbody>\r\n          </table>\r\n        : <div>Нет операции</div>\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default class RamshikPayments extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      employees: [],\r\n      activeEmployee: null,\r\n      amount: 0,\r\n\r\n      last_payouts: [],\r\n\r\n      message: null,\r\n      error: null,\r\n    }\r\n    this.payout = this.payout.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(endpoints.EMPLOYEE_PAYOUT_INIT_DATA)\r\n      .then(res => {\r\n        const initData = res.data;\r\n        this.setState({ ...this.state, employees: initData.employees, last_payouts: initData.last_payouts });\r\n      })\r\n  }\r\n\r\n  payout () {\r\n    const { activeEmployee, amount } = this.state\r\n    const token = localStorage.getItem('token');\r\n    const formData = new FormData();\r\n    formData.append(\"employee\", activeEmployee.id);\r\n    formData.append(\"amount\", amount);\r\n        \r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.EMPLOYEE_PAYOUT,\r\n      data: formData,\r\n      headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ ...this.state, message: response.data.message, employees: response.data.employees,\r\n        activeEmployee: null, last_payouts: response.data.last_payouts\r\n      });\r\n    })\r\n    .catch(err => {\r\n        const error = new Error(err);\r\n        error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        throw error;\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { employees, activeEmployee, amount, message, last_payouts } = this.state\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <h4 className='mb-2'>Расчет рамщиков</h4>\r\n            <div className='d-flex justify-content-start'>\r\n              {employees.length > 0 &&\r\n                <table className='table table-sm table-responsive w-75 mr-2'>\r\n                  <thead>\r\n                    <th>рамщик</th>\r\n                    <th>баланс</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    {employees.map(employee => \r\n                      <tr className={activeEmployee && activeEmployee.id === employee.id && 'bg-green1-light'}\r\n                        onClick={() => this.setState({...this.state, activeEmployee: employee, message: null})}>\r\n                        <td>{employee.nickname}</td>\r\n                        <td>{employee.cash} р</td>\r\n                      </tr>\r\n                      )}\r\n                  </tbody>\r\n                </table>\r\n              }\r\n              {activeEmployee && \r\n                <div>\r\n                  <span className='font-16 mr-3'>{activeEmployee.nickname}</span>\r\n                  <span className='font-16 font-600'>{activeEmployee.cash} р</span>\r\n                  <TextField type='number' className='my-1' value={amount}\r\n                    onChange={(e) => this.setState({...this.state, amount: e.target.value})} />\r\n                  <button className='d-block btn btn-m bg-green2-light mt-2'\r\n                    onClick={this.payout}>\r\n                    Выдать\r\n                  </button>\r\n                </div>\r\n              }\r\n              {message &&\r\n                <p className='color-dark text-center'>{message}</p>\r\n              }\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <LastOperations lastOperations={last_payouts} />\r\n      </div>\r\n    )\r\n  }\r\n}","\n// standart serializer field error. There are could be several fields\n// {\n//     \"birth_id\": [\"This field is required.\"]\n// }\n\n\nexport const parseErrorData = (error) => {\n\n    if (error && typeof error.response !== 'undefined') {\n        let errorObj = {\n            status: error.response.status, \n            statusText: error.response.statusText,\n            message: null,\n            response: error.response,\n        }\n        if ('message' in error.response.data) {\n            errorObj.message = JSON.stringify(error.response.data.message)\n        }\n        else {\n            let message = ''\n            for (const property in error.response.data) {\n                message = message + `${property}: ${error.response.data[property]}. `\n              }\n            errorObj.message = message\n\n        }\n        return errorObj\n\n    } else {\n        return { \n         status: 'Connection Error',\n         statusText: 'An error occurred while sending your data!',\n         message: 'An error occurred while sending your data!' }\n    }\n}\n\nexport const createUrlParamsFromFilters = (filters) => {\n    const params = new URLSearchParams()\n\n    if (filters != null) Object.keys(filters).forEach(key => {\n            if (filters[key] !== null && !(filters[key] instanceof Array)) \n                params.append(key, filters[key])\n            if (filters[key] !== null && filters[key] instanceof Array){\n                delete params[key]\n                filters[key].map(value => {\n                    if (value !== '')\n                        params.append(key, value)\n                    return null\n                })\n            }\n        })\n    return params\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\n\r\nexport function ShiftsTable (props) {\r\n  return (\r\n    <table className='table table-sm table-responsive'>\r\n      <thead>\r\n        <th>Дата</th>\r\n        <th>Пиломат</th>\r\n        <th>Общий обьем</th>\r\n        <th>Рамщики</th>\r\n        <th>за работу общ/на чела</th>\r\n      </thead>\r\n      <tbody>\r\n        {props.shiftList.map(shift => \r\n          <tr>\r\n            <td>{shift.date}</td>\r\n            <td>\r\n              {shift.lumber_records.map(lumber =>\r\n                <span className='d-block mb-2' style={{lineHeight: '16px'}}>\r\n                  <span className='mr-1 d-block'>{lumber.lumber}</span>\r\n                  <span className='mr-1'>{lumber.quantity}шт</span>\r\n                  <span className='mr-1'>{lumber.volume}м3</span>\r\n                  <span className=''>{lumber.rate}р</span>\r\n                </span>\r\n                )}\r\n            </td>\r\n            <td>{shift.volume}м3</td>\r\n            <td>\r\n              {/* <span className='d-block'>{shift.initiator}</span> */}\r\n              {shift.employees.length > 0 && shift.employees.map(emp =>\r\n                <span className='d-block'>{emp}</span>\r\n                )}\r\n            </td>\r\n            <td>\r\n              <span className='d-block'>{shift.employee_cash.toFixed(0)}р </span>\r\n              <span> {shift.cash_per_employee.toFixed(0)}р</span>\r\n            </td>\r\n          </tr>\r\n        )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\n\r\nexport default class ManagerShiftList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      shiftList: [],\r\n      \r\n      message: null,\r\n      error: null,\r\n    }\r\n    // this.getList = this.getList.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.MANAGER_SHIFT_LIST,\r\n      headers: {'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ ...this.state, shiftList: response.data.results });\r\n    })\r\n  }\r\n\r\n  // getList () {\r\n  //   const { activeEmployee, amount } = this.state\r\n  //   const token = localStorage.getItem('token');\r\n  //   const formData = new FormData();\r\n  //   formData.append(\"employee\", activeEmployee.id);\r\n  //   formData.append(\"amount\", amount);\r\n        \r\n  //   axios({\r\n  //     method: 'post',\r\n  //     url: endpoints.EMPLOYEE_PAYOUT,\r\n  //     data: formData,\r\n  //     headers: { 'content-type': 'multipart/form-data', 'Authorization': `JWT ${token}` }\r\n  //   })\r\n  //   .then(response => {\r\n  //     this.setState({ ...this.state, message: response.data.message, employees: response.data.employees,\r\n  //       activeEmployee: null, last_payouts: response.data.last_payouts\r\n  //     });\r\n  //   })\r\n  //   .catch(err => {\r\n  //       const error = new Error(err);\r\n  //       error.data = parseErrorData(err);\r\n  //       this.setState({ message: 'Ошибка' });\r\n  //       throw error;\r\n  //   })\r\n  // }\r\n\r\n  render() {\r\n    const { shiftList } = this.state\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <h4 className='mb-2'>Смены ({shiftList.length})</h4>\r\n            {shiftList.length > 0 \r\n              ? <ShiftsTable shiftList={shiftList} />\r\n              : <h5>Нет смен</h5>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import _ from 'lodash';\r\n\r\nexport const toggleArray = (arr: Array<String>, string: string) => {\r\n    if (arr.indexOf(string) === -1) {\r\n      return [...arr, string]\r\n    } else {\r\n      return arr.filter(item => item !== string)\r\n    }\r\n  }\r\n\r\nexport const lodashToggle = (array, item) => _.xor(array, [item])\r\n\r\nexport const toggleArrayLocations = (arr: Array<Object>, location: Object) => {\r\n  let alreadyIn = false;\r\n  let index = -1;\r\n  for (var i = 0; i < arr.length; i++){\r\n    if (_.isEqual(arr[i], location)){\r\n      alreadyIn = true;\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (alreadyIn){\r\n    arr.splice(index, 1);\r\n    return arr\r\n  } else {\r\n    return [...arr, location]\r\n  }\r\n}\r\n\r\nexport const addItemToArray = (arr: Array<String>, string: string) => {\r\n    return [...arr, string]\r\n  }\r\n\r\nexport const removeItemFromArray = (arr: Array<String>, string: string) => {\r\n    return arr.filter(item => item !== string)\r\n}\r\n\r\nexport const uniq = a => [...new Set(a)]\r\n\r\n\r\nexport const getObjectbyId = (list, id) => {\r\n  let obj = null\r\n  list.map(element => {\r\n    if (element['id'] == id)\r\n      obj = element\r\n  })\r\n  return obj\r\n}\r\n\r\nexport const getObjectInListbyFieldValue = (list, field, value) => {\r\n  let obj = null\r\n  list.map(element => {\r\n    if (element[field] == value)\r\n      obj = element\r\n  })\r\n  return obj\r\n}\r\n\r\nexport const toggleArrayDictById= (arr: Array<Object>, obj: Object) => {\r\n  let alreadyIn = false;\r\n  let index = -1;\r\n\r\n  for (var i = 0; i < arr.length; i++){\r\n    if (arr[i].id === obj.id){\r\n      alreadyIn = true;\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (alreadyIn){\r\n    arr.splice(index, 1);\r\n    return arr\r\n  } else {\r\n    return [...arr, obj]\r\n  }\r\n}\r\n\r\nexport function replaceItemInDictArrayById(list, item) {\r\n  const itemInList = getObjectbyId(list, item.id)\r\n  const index = list.indexOf(itemInList)\r\n  list = [\r\n    ...list.slice(0, index),\r\n    item,\r\n    ...list.slice(index + 1)\r\n  ]\r\n  return list\r\n}\r\n\r\nexport function getToday() {\r\n  let today = new Date();\r\n  let dd = String(today.getDate()).padStart(2, '0');\r\n  let mm = String(today.getMonth() + 1).padStart(2, '0');\r\n  let yyyy = today.getFullYear();\r\n\r\n  today = yyyy + '-' + mm + '-' + dd;\r\n  return today\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport Switch from '@material-ui/core/Switch';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, getObjectbyId } from '../../components/utils';\r\n\r\n\r\nfunction TrRow (props) {\r\n  let { lumber, showNull, changeMarketCost } = props\r\n  let show = true\r\n  if (lumber.current_stock_quantity == 0 && !showNull) {\r\n    show = false\r\n  }\r\n  let wood_species = lumber.wood_species === 'pine' ? 'сосна' : 'лиственница'\r\n  let woodSpeciesClass = wood_species === 'сосна' ? 'color-green1-light' : 'color-brown1-light'\r\n  return (\r\n    show &&\r\n      <tr>\r\n        <td>\r\n          {lumber.name}\r\n          <span className={'d-block font-italic font-500 ' + woodSpeciesClass}>{wood_species}</span>\r\n        </td>\r\n        <td>\r\n          <span className='font-16'>{lumber.current_stock_volume.toFixed(3)}</span>\r\n          <span className='d-block'>м3</span>\r\n        </td>\r\n        <td>\r\n          <span className='font-16'>{lumber.current_stock_quantity}</span>\r\n          шт\r\n        </td>\r\n        <td>\r\n          <TextField type='number' \r\n            className=''\r\n            value={lumber.market_cost > 0 && lumber.market_cost} \r\n            onChange={(e) => changeMarketCost(e, lumber.id)}/>\r\n        </td>\r\n        <td>\r\n          <span className='font-16'>\r\n            {lumber.stock_total_cash.toFixed(0)}</span>\r\n            р\r\n        </td>\r\n      </tr>\r\n  )\r\n}\r\n\r\nexport class ManagerStock extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lumbers: [],\r\n      showNull: false,\r\n\r\n      message: null,\r\n      error: null,\r\n    }\r\n    this.changeMarketCost = this.changeMarketCost.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.MANAGER_STOCK,\r\n      headers: {'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      this.setState({ lumbers: res.data.results });\r\n    })\r\n  }\r\n\r\n  changeMarketCost (e, lumberId) {\r\n    let { lumbers } = this.state\r\n    let lumber = getObjectbyId(lumbers, lumberId)\r\n    lumber.market_cost = parseInt(e.target.value) || 0\r\n    lumber.stock_total_cash = lumber.market_cost * lumber.current_stock_volume\r\n\r\n    lumbers = replaceItemInDictArrayById(lumbers, lumber)\r\n    this.setState({\r\n      lumbers: lumbers\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { lumbers, showNull } = this.state\r\n    let totalVolume = 0\r\n    let totalCash = 0\r\n    lumbers.map(lumber => {\r\n      totalVolume += lumber.current_stock_volume\r\n      totalCash += lumber.stock_total_cash\r\n    })\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <div className='d-flex justify-content-between'>\r\n              <h4 className='mb-2'>Склад</h4>\r\n              <div className='my-0'>\r\n                <label>Показать нулевые значения</label>\r\n                <Switch\r\n                  checked={this.state.showNull}\r\n                  onChange={() => this.setState({showNull: !this.state.showNull})}\r\n                  name=\"showNull\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className='d-flex justify-content-start'>\r\n              {lumbers.length > 0 &&\r\n                <table className='table table-sm table-responsive' style={{lineHeight: '17px'}}>\r\n                  <thead>\r\n                    <th>пиломат</th>\r\n                    <th>объем</th>\r\n                    <th>кол-во</th>\r\n                    <th>цена за 1м3</th>\r\n                    <th>стоимоcть общая</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    {lumbers.map(lumber =>\r\n                      <TrRow lumber={lumber} showNull={showNull} changeMarketCost={this.changeMarketCost}/>\r\n                      )}\r\n                    <tr>\r\n                      <td><span className='font-16 font-500'>Итого</span></td>\r\n                      <td>\r\n                        <span className='font-16 font-500'>{totalVolume.toFixed(3)}</span>\r\n                        <span className='d-block'>м3</span>\r\n                      </td>\r\n                      <td></td>\r\n                      <td></td>\r\n                      <td>\r\n                        <span className='font-16 font-500'>{totalCash.toFixed(0)}</span>\r\n                        <span className='d-block'>рублей</span>\r\n                        </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\n\r\n\r\nexport function LumberTable (props) {\r\n  const { lumbers } = props\r\n  return(\r\n    <table className='table table-sm table-responsive mt-2'>\r\n      <thead>\r\n        <th>\r\n          Пиломат\r\n        </th>\r\n        <th>\r\n          кол-во\r\n        </th>\r\n        <th>\r\n          объем\r\n        </th>\r\n        <th>\r\n          ставка\r\n        </th>\r\n        <th>\r\n          сумма\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {lumbers.map(lumber_record =>\r\n        <tr>\r\n          <td>{lumber_record.lumber}</td>\r\n          <td>{lumber_record.quantity} шт</td>\r\n          <td>{lumber_record.volume} м3</td>\r\n          <td>{lumber_record.rate || lumber_record.employee_rate} руб</td>\r\n          <td>{(lumber_record.total_cash || lumber_record.cash).toFixed(0)} руб</td>\r\n        </tr>\r\n          )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\n\r\nexport function ShiftToSave (props) {\r\n  const { shift, saveData, back } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style my-2'>\r\n      <div className='content'>\r\n      <h4>Проверяем данные</h4>\r\n      {shift &&\r\n          <div className=''>\r\n            <p className={rowClass}>\r\n              Объем общий: {shift.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>\r\n              Общая сумма за работу: {shift.employee_cash.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>\r\n              Сумма на одного человека: {shift.cash_per_employee.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>Примечание: {shift.note}</p>\r\n\r\n            <LumberTable lumbers={shift.raw_records}/>\r\n\r\n            {shift.employeesData && shift.employeesData.length > 0 &&\r\n              <div>\r\n                <h5>Кто работал?</h5>\r\n                {shift.employeesData.map(emp => \r\n                  <p className='mb-0'>{emp.nickname}</p>\r\n                  )}\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n        <div className='d-flex justify-content-around'>\r\n          <button onClick={back}\r\n            className='btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l'>\r\n            назад\r\n          </button>\r\n          <button onClick={saveData}\r\n            className='btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n              Сохранить данные\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport function CreatedShift (props) {\r\n  const { shift, message } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style my-2'>\r\n      <div className='content'>\r\n        <h4>Смена сохранена</h4>\r\n        {shift &&\r\n          <div className=''>\r\n            <p className={rowClass}>Дата: {shift.date}</p>\r\n            <p className={rowClass}>\r\n              Объем общий: {shift.volume.toFixed(2)}  ({shift.back_calc_volume.toFixed(2)}) м3</p>\r\n            <p className={rowClass}>\r\n              Общая сумма за работу: {shift.employee_cash.toFixed(1)} ({shift.back_calc_cash.toFixed(1)}) \r\n              рублей</p>\r\n            <p className={rowClass}>\r\n              Сумма на одного человека: {shift.cash_per_employee.toFixed(1)}\r\n              ({shift.back_calc_cash_per_employee.toFixed(1)}) рублей</p>\r\n            <p className={rowClass}>Примечание: {shift.note}</p>\r\n\r\n            <LumberTable lumbers={shift.lumber_records}/>\r\n            {shift.employees && shift.employees.length > 0 &&\r\n              <div>\r\n                <h5>Кто работал?</h5>\r\n                {shift.employees.map(emp => \r\n                  <p className='mb-0'>{emp}</p>\r\n                  )}\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n        {message &&\r\n          <h2 className='color-green1-light text-center'>Данные сохранены!</h2> \r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function EmployeesBlock (props) {\r\n  const { totalCash, employees, activeEmployees, addEmployee } = props\r\n  const empClass = ' rounded-xs px-2 py-2 '\r\n  return (\r\n    <div className='content'>\r\n      <h4>Кто работал? {activeEmployees.length > 0 && '(' + activeEmployees.length + ')'}</h4>\r\n      <div className='d-flex justify-content-between my-2'>\r\n        {employees.map(emp => \r\n          <div \r\n            className={activeEmployees.includes(emp) ? 'bg-green2-light' + empClass : 'bg-dark1-dark' + empClass }\r\n             onClick={() => addEmployee(emp)}>\r\n            {emp.nickname}\r\n          </div>\r\n          )}\r\n      </div>\r\n      {activeEmployees.length > 0 && \r\n        <div>\r\n          <div className='d-flex justify-content-start'>\r\n            {activeEmployees.map(aEmp => \r\n              <div className='mx-2'>\r\n                <span className='d-block font-16'>{aEmp.nickname}</span>\r\n                {totalCash > 0 && \r\n                  <span className='font-17 font-600'> {(totalCash / activeEmployees.length).toFixed(0)} руб</span>\r\n                }\r\n              </div>\r\n              )}\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, toggleArrayDictById, lodashToggle } from '../../components/utils';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\nimport { ShiftToSave, CreatedShift, EmployeesBlock } from '../../components/ShiftCreateComponent';\r\n\r\n\r\nexport class ShiftCreateComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lumbers: [],\r\n      initLumbers: [],\r\n      totalVolume: 0,\r\n      totaCash: 0,\r\n\r\n      createdShift: null,\r\n\r\n      employees: [],\r\n      activeEmployees: [],\r\n\r\n      dataToSave: null,\r\n\r\n      message: null,\r\n      error: null,\r\n    }\r\n    this.calcRow = this.calcRow.bind(this);\r\n    this.calcRowAndTotal = this.calcRowAndTotal.bind(this);\r\n    this.calcTotalVolume = this.calcTotalVolume.bind(this)\r\n    this.calcTotalCash = this.calcTotalCash.bind(this)\r\n    this.addEmployee = this.addEmployee.bind(this)\r\n    this.saveData = this.saveData.bind(this)\r\n    this.preSave = this.preSave.bind(this)\r\n    this.back = this.back.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(endpoints.RAMSHIK_SHIFT_CREATE_DATA)\r\n      .then(res => {\r\n        const initData = res.data;\r\n        this.setState({ lumbers: initData.lumbers, initLumbers: initData.lumbers, employees: initData.employees });\r\n      })\r\n  }\r\n\r\n  calcRow (lumber, qnty, moreThan10) {\r\n    let rate = lumber.employee_rate\r\n    if (moreThan10 && lumber.employee_rate == 600) rate = 650\r\n    if (!moreThan10 && lumber.employee_rate == 650) rate = 600\r\n    if (!moreThan10 && lumber.employee_rate == 600) rate = lumber.employee_rate\r\n\r\n    let calcLumber = {\r\n      ...lumber,\r\n      lumber: lumber.id,\r\n      quantity: qnty,\r\n      volume_total: qnty * lumber.volume,\r\n      cash: qnty * lumber.volume * rate,\r\n      employee_rate: rate\r\n    }\r\n    return calcLumber\r\n  }\r\n\r\n  calcTotalVolume (lumbers) {\r\n    let totalVolumeVar = 0\r\n\r\n    lumbers.map(lumber => {\r\n      totalVolumeVar = totalVolumeVar + lumber.volume_total\r\n    })\r\n\r\n    return totalVolumeVar\r\n  }\r\n\r\n  calcTotalCash (lumbers) {\r\n    let totalCashVar = 0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCashVar = totalCashVar + lumber.cash\r\n    })\r\n\r\n    return totalCashVar\r\n  }\r\n\r\n  calcRowAndTotal (e, lumber) {\r\n    let { lumbers } = this.state\r\n    let calcLumber = this.calcRow(lumber, e.target.value, false)\r\n    lumbers = replaceItemInDictArrayById(lumbers, calcLumber)\r\n\r\n    let totalVolume = this.calcTotalVolume(lumbers)\r\n    if (totalVolume >= 10) {\r\n      lumbers.map((lmbr, idx) => {\r\n        lumbers[idx] = this.calcRow(lmbr, lmbr.quantity, true)\r\n      })\r\n      totalVolume = this.calcTotalVolume(lumbers)\r\n    } else {\r\n      lumbers.map((lmbr, idx) => {\r\n        lumbers[idx] = this.calcRow(lmbr, lmbr.quantity, false)\r\n      })\r\n      totalVolume = this.calcTotalVolume(lumbers)\r\n    }\r\n\r\n    let totalCash = this.calcTotalCash(lumbers)\r\n    \r\n    this.setState({ \r\n        ...this.state,\r\n        lumbers: lumbers,\r\n        totalVolume: totalVolume,\r\n        totalCash: totalCash,\r\n        message: null\r\n        })\r\n  }\r\n\r\n  addEmployee (employee) {\r\n    let { activeEmployees } = this.state\r\n    activeEmployees = toggleArrayDictById(activeEmployees, employee)\r\n    this.setState({\r\n      ...this.state,\r\n      activeEmployees: activeEmployees\r\n    })\r\n  }\r\n\r\n  preSave () {\r\n    const { lumbers, totalCash, totalVolume, activeEmployees } = this.state\r\n    let eIds = []\r\n    activeEmployees.map(emp => eIds = lodashToggle(eIds, emp.id))\r\n    let raw_records = []\r\n    lumbers.map(lumber =>{\r\n      if (lumber.cash > 0 && lumber.quantity > 0) {\r\n        raw_records = lodashToggle(raw_records, lumber)\r\n      }\r\n    })\r\n    let data = {\r\n      shift_type: 'day',\r\n      date: null,\r\n      raw_records: raw_records,\r\n      employees: eIds,\r\n      employee_cash: totalCash,\r\n      volume: totalVolume,\r\n      employeesData: activeEmployees,\r\n      cash_per_employee: totalCash / eIds.length\r\n    }\r\n\r\n    this.setState({\r\n      ...this.state,\r\n      dataToSave: data,\r\n    })\r\n  }\r\n\r\n  saveData () {\r\n    const { dataToSave} = this.state\r\n    const token = localStorage.getItem('token');\r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.RAMSHIK_SHIFT_CREATE,\r\n      data: dataToSave,\r\n      headers: { 'content-type': 'application/JSON', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ message: 'Данные записаны.', createdShift: response.data });\r\n    })\r\n    .catch(err => {\r\n        // const error = new Error(err);\r\n        // error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        // throw error;\r\n    })\r\n\r\n    this.setState({\r\n      ...this.state,\r\n      activeEmployees: [],\r\n      lumbers: this.state.initLumbers,\r\n      totalVolume: 0,\r\n      totalCash: 0,\r\n      note: '',\r\n      dataToSave: null,\r\n    })\r\n  }\r\n\r\n  back () {\r\n    this.setState({dataToSave: null})\r\n  }\r\n\r\n  render() {\r\n    const { lumbers, totalVolume, totalCash, employees, activeEmployees, message, createdShift, dataToSave} \r\n      = this.state\r\n    return (\r\n      <div>\r\n        {createdShift\r\n          ? <CreatedShift shift={createdShift} message={message}/>\r\n          : dataToSave\r\n            ? <ShiftToSave shift={dataToSave} saveData={this.saveData} back={this.back}/>\r\n            : <div>\r\n                <div className='card card-style mb-1 mt-2'>\r\n                  <div className='content'>\r\n                    <h2>Смена</h2>\r\n                    {lumbers.length > 0 &&\r\n                      <table className='table table-sm table-responsive text-center' \r\n                        style={{'lineHeight': '17px', 'color': '#6c6c6c'}}>\r\n                        <thead>\r\n                          <th>Изделие</th>\r\n                          <th>Кол-во</th>\r\n                          <th>Обьем</th>\r\n                          <th>Ставка</th>\r\n                          <th>Сумма</th>\r\n                        </thead>\r\n                        <tbody>\r\n                        {lumbers.map((lumber, key) => \r\n                          <tr key={key}>\r\n                            <td>{lumber.name} {lumber.wood_species}</td>\r\n                            <td className='w-25'>\r\n                              <input style={{'color': '#6c6c6c'}}\r\n                              type='number' className='w-75' onChange={(e) => this.calcRowAndTotal(e, lumber)} \r\n                              value={lumber.quantity > 0 && lumber.quantity}/>\r\n                            </td>\r\n                            <td>{lumber.volume_total > 0 && lumber.volume_total.toFixed(4) + ' м3'}</td>\r\n                            <td>{lumber.employee_rate} руб</td>\r\n                            <td>{lumber.cash > 0 && lumber.cash.toFixed(0) + ' руб'}</td>\r\n                          </tr>\r\n                          )}\r\n                          <tr>\r\n                            <td>Итого</td>\r\n                            <td className='w-25'>\r\n                              -\r\n                            </td>\r\n                            <td>\r\n                              <span className='font-17 font-600'>\r\n                                {totalVolume > 0 && totalVolume.toFixed(4) + ' м3'}\r\n                              </span>\r\n                            </td>\r\n                            <td>-</td>\r\n                            <td>\r\n                              <span className='font-17 font-600'>\r\n                                {totalCash > 0 && totalCash.toFixed(0) + ' руб'}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <div className='card card-style mb-3'>\r\n                  <EmployeesBlock \r\n                    totalCash={totalCash} \r\n                    employees={employees} \r\n                    activeEmployees={activeEmployees} \r\n                    addEmployee={this.addEmployee}/>\r\n\r\n                </div>\r\n                {(activeEmployees.length > 0 && totalCash > 0) &&\r\n                  <button   \r\n                      onClick={this.preSave}\r\n                      className='btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n                      Далее\r\n                    </button>\r\n                }\r\n              </div>          \r\n          }\r\n      </div>\r\n    )\r\n  }\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\nimport { ShiftsTable } from '../manager/Shifts';\r\n\r\n\r\nexport class RamshikShiftList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      shiftList: [],\r\n      \r\n      message: null,\r\n      error: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    const { shiftList } = this.state\r\n    if (shiftList.length === 0) \r\n      axios({\r\n        method: 'get',\r\n        url: endpoints.RAMSHIK_SHIFT_LIST,\r\n        headers: {'Authorization': `JWT ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.setState({ ...this.state, shiftList: response.data.results });\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { shiftList } = this.state\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <h4 className='mb-2'>Смены  ({shiftList.length})</h4>\r\n            {shiftList.length > 0 \r\n              ? <ShiftsTable shiftList={shiftList} />\r\n              : <h5>Нет смен</h5>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\n\r\nimport { LastOperations } from '../manager/RamshikPayments';\r\n\r\n\r\nexport class RamshikPayouts extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      last_payouts: [],\r\n      ramshik: null,\r\n\r\n      message: null,\r\n      error: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.RAMSHIK_PAYOUTS,\r\n      headers: {'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ ...this.state, ramshik: initData.ramshik, last_payouts: initData.last_payouts });\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { ramshik, message, last_payouts } = this.state\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <h4 className='mb-2'>Текущий баланс {ramshik && ramshik.cash +  ' руб'}</h4>\r\n            \r\n          </div>\r\n        </div>\r\n        <LastOperations lastOperations={last_payouts} />\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component, useState  } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select'\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\n\r\nfunction LumbersTable (props) {\r\n  const { lumber_records } = props\r\n  return (\r\n    <table className='table table-sm table-responsive mt-2'>\r\n      <thead>\r\n        <th>\r\n          Пиломат\r\n        </th>\r\n        <th>\r\n          кол-во\r\n        </th>\r\n        <th>\r\n          объем\r\n        </th>\r\n        <th>\r\n          цена за 1м3\r\n        </th>\r\n        <th>\r\n          сумма\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {lumber_records.map(lumber_record =>\r\n        <tr>\r\n          <td>{lumber_record.lumber}</td>\r\n          <td>{lumber_record.quantity} шт</td>\r\n          <td>{lumber_record.volume} м3</td>\r\n          <td>{lumber_record.rate ||lumber_record.market_cost} руб</td>\r\n          <td>{lumber_record.total_cash || lumber_record.cash} руб</td>\r\n        </tr>\r\n          )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport function SaleToCreate (props) {\r\n  const { sale, saveData, back } = props\r\n  console.log(sale)\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Запись сохранена</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            {/* <p className={rowClass}>Дата: {sale.date}</p> */}\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма: {sale.cash.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses} рублей</p>\r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.raw_records}/>\r\n          </div>\r\n        }\r\n        <div className='d-flex justify-content-around'>\r\n          <button onClick={back}\r\n            className='btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l'>\r\n            назад\r\n          </button>\r\n          <button onClick={saveData}\r\n            className='btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n              Сохранить данные\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreatedSale (props) {\r\n  const { sale, message } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Запись сохранена</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            <p className={rowClass}>Дата: {sale.date}</p>\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)}  ({sale.back_calc_volume}) м3</p>\r\n            <p className={rowClass}>Сумма: {sale.cash.toFixed(1)} ({sale.back_calc_cash.toFixed(1)}) рублей</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses} рублей</p>\r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.lumber_records}/>\r\n          </div>\r\n        }\r\n        {message &&\r\n          <h2 className='color-green1-light text-center'>Данные сохранены!</h2> \r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function AddNote (props) {\r\n  const [open, setOpen] = useState(false)\r\n  const { note, setNote } = props\r\n  return (\r\n    <div >\r\n      <p className='my-2 btn btn-sm bg-teal-light' onClick={() => setOpen(!open)}>Добавить примечание</p>\r\n      {open &&\r\n        <TextField type='textarea' value={note} name='note' onChange={setNote} multiline={true} rowsMax={5}\r\n          id=\"standard\" variant=\"outlined\" className='d-block'\r\n        />}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function LumberToSale (props) {\r\n  const { lumber, setLumberID, calcRowQnty, calcRowCash, setRowCash, pineBrus, larchBrus, pineDoska,\r\n     larchDoska } = props\r\n  return (\r\n    <div className='mt-2 mb-3'>\r\n      <InputLabel htmlFor=\"grouped-native-select\" className='font-19 font-600'>\r\n        Пиломатериал {lumber.id + 1}\r\n      </InputLabel>\r\n      <Select \r\n        native \r\n        defaultValue=\"\" \r\n        id=\"grouped-native-select\" \r\n        className='color-dark1-light'\r\n        fullWidth\r\n        value={lumber.lumber} onChange={(e) =>setLumberID(e, lumber.id)}\r\n        name='lumber'\r\n        data-id={lumber.id}\r\n        defaultValue={null}\r\n        >\r\n        <option aria-label=\"None\" />\r\n        <optgroup label=\"Брус сосна\">\r\n          {pineBrus.map(pb =>\r\n            <option value={pb.id} >{`${pb.name} ${pb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Брус лиственница\">\r\n          {larchBrus.map(lb =>\r\n            <option value={lb.id} >{`${lb.name} ${lb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Доска сосна\">\r\n          {pineDoska.map(pd =>\r\n            <option value={pd.id} >{`${pd.name} ${pd.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Доска лиственница\">\r\n          {larchDoska.map(ld =>\r\n            <option value={ld.id} >{`${ld.name} ${ld.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n\r\n      </Select>\r\n      {lumber.lumber > 0 && \r\n      <div className='mt-3'>\r\n        <div className='d-flex'>\r\n          <TextField \r\n            className='mr-2'\r\n            id=\"outlined-margin-dense\" \r\n            variant=\"outlined\" \r\n            label='Количество штук'\r\n            onChange={(e) => calcRowQnty(e, lumber.id)} type='number'\r\n            value={lumber.quantity > 0 && lumber.quantity}/>\r\n            \r\n          <TextField \r\n            className='ml-2'\r\n            id=\"outlined-margin-dense\"\r\n            variant=\"outlined\" \r\n            label='Цена за 1м3'\r\n            onChange={(e) => calcRowCash(e, lumber.id)} type='number'\r\n            value={lumber.rate > 0 && lumber.rate}/>\r\n\r\n          <TextField \r\n            className='ml-2'\r\n            id=\"outlined-margin-dense\"\r\n            variant=\"outlined\" \r\n            label='Сумма руб'\r\n            onChange={(e) => setRowCash(e, lumber.id)} type='number'\r\n            value={lumber.cash > 0 && lumber.cash}/>\r\n\r\n        </div>\r\n        <div className='d-flex justify-content-between mt-2'>\r\n          <p className='font-16 color-dark mb-0'>Объем: \r\n            <span className='font-500'> {lumber.volume_total + ' м3'}</span>\r\n          </p>\r\n        </div>\r\n      </div>}\r\n      {lumber.lumber > 0 && \r\n        <div className='divider divider-margins bg-highlight mt-2'></div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function AddExpensesComp (props) {\r\n  const { setAddExpenses, addExpenses } = props\r\n\r\n  return (\r\n    <div className='my-3'>\r\n      <TextField \r\n        className=''\r\n        id=\"outlined-margin-dense\"\r\n        variant=\"outlined\" \r\n        label='доставка'\r\n        onChange={setAddExpenses} type='number'\r\n        value={addExpenses > 0 && addExpenses}/>\r\n    </div>\r\n  )\r\n} ","import axios from 'axios';\r\n\r\nimport React, { Component, useState  } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, lodashToggle, getObjectbyId } \r\n  from '../../components/utils';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\nimport { CreatedSale, AddNote, LumberToSale, AddExpensesComp, SaleToCreate } \r\n  from '../../components/kladman/SaleCreate';\r\n\r\n\r\nexport class SaleCreateComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pineBrus: [],\r\n      larchBrus: [],\r\n      pineDoska: [],\r\n      larchDoska: [],\r\n      lumbers: [],\r\n\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      note: '',\r\n      addExpenses: 0,\r\n\r\n      dataToSave: null,\r\n      \r\n      createdSale: null,\r\n      message: null,\r\n      error: null,\r\n    }\r\n\r\n    this.setData = this.setData.bind(this);\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.setRowCash = this.setRowCash.bind(this);\r\n    this.saveData = this.saveData.bind(this);\r\n    this.setNote = this.setNote.bind(this);\r\n    this.setAddExpenses = this.setAddExpenses.bind(this);\r\n    this.preSave = this.preSave.bind(this);\r\n    this.back = this.back.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(endpoints.KLADMAN_SALE_INIT_DATA)\r\n      .then(res => {\r\n        const initData = res.data;\r\n        this.setState({ \r\n          pineBrus: initData.pine_brus_lumbers,\r\n          larchBrus: initData.larch_brus_lumbers,\r\n          pineDoska: initData.pine_doska_lumbers,\r\n          larchDoska: initData.larch_doska_lumbers,\r\n          lumbers: initData.lumbers,\r\n         });\r\n      })\r\n  }\r\n\r\n  setData (e) {\r\n    this.setState({\r\n      ...this.state,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale, addExpenses } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.cash = (lumber.volume_total * lumber.rate).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale, addExpenses)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale, addExpenses } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.rate =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.cash = (lumber.volume_total * lumber.rate).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale, addExpenses)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  setRowCash (e, id) {\r\n    let { lumbersToSale, addExpenses } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.cash =  e.target.value ? parseInt(e.target.value) : 0\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale, addExpenses)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers, addExpenses) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    totalCash += parseFloat(addExpenses)\r\n\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  setNote (e) {\r\n    this.setState({\r\n      note: e.target.value\r\n    })\r\n  }\r\n\r\n  setAddExpenses (e) {\r\n    let { lumbersToSale } = this.state\r\n    const addExpenses = e.target.value ? parseInt(e.target.value) : 0\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale, addExpenses)\r\n    this.setState({\r\n      addExpenses: addExpenses,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  preSave () {\r\n    const { lumbersToSale, totalCash, totalVolume, addExpenses, note } = this.state\r\n    let raw_records = []\r\n    lumbersToSale.map(lumber =>{\r\n      if (lumber.cash > 0 && lumber.quantity > 0) {\r\n        raw_records = lodashToggle(raw_records, lumber)\r\n      }\r\n    })\r\n    let data = {\r\n      raw_records: raw_records,\r\n      date: null,\r\n      cash: parseFloat(totalCash),\r\n      volume: parseFloat(totalVolume),\r\n      note: note,\r\n      add_expenses: addExpenses,\r\n    }\r\n    this.setState({\r\n      dataToSave: data,\r\n    })\r\n  }\r\n\r\n  saveData () {\r\n    const { dataToSave } = this.state\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.KLADMAN_SALE_CREATE,\r\n      data: dataToSave,\r\n      headers: { 'content-type': 'application/JSON', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ message: response.data.message, createdSale: response.data.sale });\r\n    })\r\n    .catch(err => {\r\n        // const error = new Error(err);\r\n        // error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        // throw error;\r\n    })\r\n\r\n    this.setState({\r\n      dataToSave: null,\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      note: '',\r\n      addExpenses: 0,\r\n    })\r\n  }\r\n\r\n  back () {\r\n    this.setState({dataToSave: null})\r\n  }\r\n\r\n  render() {\r\n    const { lumbersToSale, createdSale, totalCash, totalVolume, note, addExpenses, dataToSave, message } \r\n      = this.state\r\n    return (\r\n      <div>\r\n        {createdSale \r\n          ? <CreatedSale sale={createdSale} message={message}/>\r\n          : dataToSave\r\n            ? <SaleToCreate sale={dataToSave} saveData={this.saveData} back={this.back}/>\r\n            : <div className='card card-style mb-1 mt-2 mx-1'>\r\n                <div className='content'>\r\n                  <div className='d-flex justify-content-between mb-2 text-center'>\r\n                    <h2>Что продаем?</h2>\r\n                    <button className='btn btn-sm bg-teal-light' onClick={this.clear}>Очистить </button>\r\n                  </div>\r\n                  \r\n                  {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n                    <LumberToSale \r\n                      lumber={lumber} \r\n                      setLumberID={this.setLumberID} \r\n                      calcRowQnty={this.calcRowQnty}\r\n                      calcRowCash={this.calcRowCash}\r\n                      setRowCash={this.setRowCash}\r\n                      pineBrus={this.state.pineBrus}\r\n                      larchBrus={this.state.larchBrus}\r\n                      pineDoska={this.state.pineDoska}\r\n                      larchDoska={this.state.larchDoska}\r\n                    />\r\n                  )}\r\n                  <button className='mt-1 btn btn-l bg-highlight' onClick={this.addLumberToSale}>\r\n                    Добавить пиломатериал\r\n                  </button>\r\n\r\n                  <AddExpensesComp addExpenses={addExpenses} setAddExpenses={this.setAddExpenses}/>\r\n                  \r\n                  {totalCash > 0 &&\r\n                    <div className='d-flex justify-content-between my-2'>\r\n                      <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                      <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n                    </div>\r\n                  }\r\n                  <AddNote note={note} setNote={this.setData}/>\r\n                  {totalCash > 0 &&\r\n                    <button\r\n                      onClick={this.preSave}\r\n                      className='btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r\n                        shadow-l mt-2'>\r\n                      Далее\r\n                    </button>\r\n                  }\r\n                </div>\r\n            </div>\r\n          }\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component, useState  } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select'\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\n\r\nimport { getObjectbyId } from '../utils';\r\n\r\n\r\nfunction LumbersTable (props) {\r\n  const { lumber_records } = props\r\n  return (\r\n    <table className='table table-sm table-responsive mt-2'>\r\n      <thead>\r\n        <th>\r\n          Пиломат\r\n        </th>\r\n        <th>\r\n          кол-во\r\n        </th>\r\n        <th>\r\n          объем\r\n        </th>\r\n        <th>\r\n          цена за 1м3\r\n        </th>\r\n        <th>\r\n          сумма продажи\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {lumber_records.map(lumber_record =>\r\n        <tr>\r\n          <td>{lumber_record.name}</td>\r\n          <td>{lumber_record.quantity} шт</td>\r\n          <td>{lumber_record.volume_total} м3</td>\r\n          <td>{lumber_record.selling_price} руб</td>\r\n          <td>{lumber_record.selling_total_cash} руб</td>\r\n        </tr>\r\n          )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport function SaleSchema1ToCreate (props) {\r\n  const { sale, saveData, back, sellers } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  let seller = null\r\n  if (sellers)\r\n    seller = getObjectbyId(sellers, sale.seller)\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Проверяем данные</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            {/* <p className={rowClass}>Дата: {sale.date}</p> */}\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма: {sale.sale_cash.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>Грузчик: {sale.loader ? 'да' : \"нет\"} </p>\r\n            <p className={rowClass}>Бонус складу: {sale.bonus_kladman ? 'да' : 'нет'}</p>\r\n            <p className={rowClass}>Продавец: {seller ? seller.nickname : 'нет'}</p>\r\n            <p className={rowClass}>Доставка: {sale.deliveryFee ? sale.deliveryFee + 'рублей' : 'нет'}</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses ? sale.add_expenses + 'рублей' : 'нет'}</p>\r\n            \r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.raw_records}/>\r\n          </div>\r\n        }\r\n        <div className='d-flex justify-content-around'>\r\n          <button onClick={back}\r\n            className='btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l'>\r\n            назад\r\n          </button>\r\n          <button onClick={saveData}\r\n            className='btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n              Рассчитать и сохранить данные\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreatedSale (props) {\r\n  const { sale, message } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Запись сохранена</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            <p className={rowClass}>Дата: {sale.date}</p>\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма продажи: {sale.selling_total_cash.toFixed(1)}  рублей</p>\r\n            <p className={rowClass}>Вознаграждение продавца: {sale.seller_fee} рублей</p>\r\n            {/* <p className={rowClass}>Сумма рамы (брутто): {sale.rama_total_cash.toFixed(1)}  рублей</p> */}\r\n            <p className={rowClass}>Вознаграждение грузчика: {sale.loader_fee} рублей</p>\r\n            <p className={rowClass}>Вознаграждение склада: {sale.kladman_fee} рублей</p>\r\n            <p className={rowClass}>Стоимость доставки: {sale.delivery_fee} рублей</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses} рублей</p>\r\n            {/* <p className={rowClass}>Сумма рамы (нетто): {sale.net_rama_cash.toFixed(1)}  рублей</p> */}\r\n            \r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.lumber_records}/>\r\n          </div>\r\n        }\r\n        {message &&\r\n          <h2 className='color-green1-light text-center'>Данные сохранены!</h2> \r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function AddNote (props) {\r\n  const { note, setNote } = props\r\n  return (\r\n    <TextField \r\n      className=''\r\n      type='textarea' value={note} name='note' onChange={setNote} multiline={true} rowsMax={5}\r\n      id=\"standard\" variant=\"outlined\" className='d-block' label='Примечание' placeholder='Данные заказчика и др'\r\n    />\r\n  )\r\n}\r\n\r\nexport function LumberToSale (props) {\r\n  const { lumber, setLumberID, calcRowQnty, calcRowCash, setRowCash, pineBrus, larchBrus, pineDoska,\r\n     larchDoska, calcRowRamaCash, calcRowVolume, calcRowCash1Pc } = props\r\n  console.log(lumber)\r\n  return (\r\n    <div className='mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border'>\r\n      <InputLabel htmlFor=\"grouped-native-select\" className='font-19 font-600 color-black'>\r\n        Пиломатериал {lumber.id + 1}\r\n      </InputLabel>\r\n      <Select \r\n        native \r\n        defaultValue=\"\" \r\n        id=\"grouped-native-select\" \r\n        className='color-dark1-light'\r\n        fullWidth\r\n        value={lumber.lumber} onChange={(e) =>setLumberID(e, lumber.id)}\r\n        name='lumber'\r\n        data-id={lumber.id}\r\n        defaultValue={null}\r\n        >\r\n        <option aria-label=\"None\" />\r\n        <optgroup label=\"Брус сосна\">\r\n          {pineBrus.map(pb =>\r\n            <option value={pb.id} >{`${pb.name} ${pb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Брус лиственница\">\r\n          {larchBrus.map(lb =>\r\n            <option value={lb.id} >{`${lb.name} ${lb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Доска сосна\">\r\n          {pineDoska.map(pd =>\r\n            <option value={pd.id} >{`${pd.name} ${pd.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n\r\n      </Select>\r\n      {lumber.lumber > 0 && \r\n        <p className='my-0'>\r\n          <span className='mr-2'>1шт = {lumber.volume} м3</span>\r\n          <span className='mr-2'>1м3 = {lumber.qnty_in_cube} шт</span>\r\n          <span className='mr-2'>2м3 = {lumber.qnty_in_cube * 2} шт</span>\r\n          <span className='mr-2'>3м3 = {(lumber.qnty_in_cube * 3).toFixed(3)} шт</span>\r\n        </p>\r\n      }\r\n      {lumber.lumber > 0 && \r\n        <div className=''>\r\n          <div className='my-2'>\r\n            <h5>Расчет для клиента:</h5>\r\n            <div className='d-flex justify-content-start '>\r\n              <TextField \r\n                className='pr-2'\r\n                id=\"outlined-margin-dense\" \r\n                variant=\"outlined\" \r\n                label='Количество'\r\n                onChange={(e) => calcRowQnty(e, lumber.id)} type='number'\r\n                value={lumber.quantity > 0 && lumber.quantity}/>\r\n\r\n              <TextField \r\n                className=''\r\n                id=\"outlined-margin-dense\" \r\n                variant=\"outlined\" \r\n                label='Объем'\r\n                onChange={(e) => calcRowVolume(e, lumber.id)}\r\n                type='number'\r\n                value={lumber.selling_volume_total > 0 && lumber.selling_volume_total}/>\r\n            </div>\r\n\r\n            <div className='d-flex justify-content-start mt-2'>\r\n              <TextField \r\n                className='pr-2'\r\n                id=\"outlined-margin-dense\"\r\n                variant=\"outlined\" \r\n                label='Цена за 1м3'\r\n                onChange={(e) => calcRowCash(e, lumber.id)} type='number'\r\n                value={lumber.selling_price > 0 && lumber.selling_price}/>\r\n\r\n              <TextField \r\n                className=''\r\n                id=\"outlined-margin-dense\"\r\n                variant=\"outlined\" \r\n                label='Сумма'\r\n                onChange={(e) => setRowCash(e, lumber.id)} type='number'\r\n                value={lumber.selling_total_cash > 0 && lumber.selling_total_cash}/>\r\n            </div>\r\n          </div>\r\n          <div className=''>\r\n            <h5>Расчет оптовый:</h5>\r\n            <div className='d-flex justify-content-start mt-1'>\r\n              <p className='font-16 color-dark mb-0 mr-4'>Объем: \r\n                <span className='font-500'> {lumber.volume_total + ' м3'}</span>\r\n              </p>\r\n              <p className='font-16 color-dark mb-0'>Сумма оптовая: \r\n                <span className='font-500'> {lumber.rama_total_cash > 0 && lumber.rama_total_cash + ' р'}</span>\r\n              </p>\r\n            </div>\r\n              <TextField \r\n                className=''\r\n                variant=\"outlined\" \r\n                label='Цена за 1м3'\r\n                onChange={(e) => calcRowRamaCash(e, lumber.id)} type='number'\r\n                value={lumber.rama_price > 0 && lumber.rama_price}\r\n                defaultValue={lumber.market_cost}\r\n                />\r\n          </div>\r\n        </div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DeliveryFeeComp (props) {\r\n  const { setDeliveryFee, deliveryFee } = props\r\n\r\n  return (\r\n    <div className='my-1'>\r\n      <TextField \r\n        className=''\r\n        id=\"outlined-margin-dense\"\r\n        variant=\"outlined\" \r\n        label='доставка'\r\n        onChange={setDeliveryFee} type='number'\r\n        value={deliveryFee > 0 && deliveryFee}/>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport function Schema1CheckList (props) {\r\n  const { loader, checkLoader, seller, bonusKladman, sellers } = props\r\n\r\n  return (\r\n    <div className='d-flex justify-content-between mb-1 '>\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={loader}\r\n            onChange={checkLoader}\r\n            color=\"blue2\"\r\n            name='loader'\r\n          />\r\n        }\r\n        label=\"Грузчик\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={bonusKladman}\r\n            onChange={checkLoader}\r\n            color=\"blue2\"\r\n            name='bonusKladman'\r\n          />\r\n        }\r\n        label=\"Склад бонус\"\r\n      />\r\n      <FormControl  className='pb-4'>\r\n        <InputLabel >Продавец</InputLabel>\r\n        <Select \r\n          native \r\n          defaultValue=\"\" \r\n          className='color-dark1-light'\r\n          value={seller} onChange={checkLoader}\r\n          name='seller'\r\n          defaultValue={null}\r\n          >\r\n          <option aria-label=\"None\" />\r\n          {sellers && sellers.length > 0 && sellers.map(s => \r\n            <option value={s.id} >{s.nickname} </option>\r\n          )}\r\n        </Select>\r\n      </FormControl>\r\n    </div>  \r\n    )\r\n}\r\n","import axios from 'axios';\r\n\r\nimport React, { Component, useState  } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, lodashToggle, getObjectbyId } \r\n  from '../../components/utils';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\nimport { CreatedSale, AddNote, LumberToSale, DeliveryFeeComp, SaleSchema1ToCreate, Schema1CheckList } \r\n  from '../../components/kladman/SaleCreateSchema1';\r\n\r\n\r\nexport class SaleCreateSchema1Container extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pineBrus: [],\r\n      larchBrus: [],\r\n      pineDoska: [],\r\n      larchDoska: [],\r\n      lumbers: [],\r\n\r\n      calcLumber: null,\r\n\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      \r\n      loader: true,\r\n      seller: null,\r\n      bonusKladman: true,      \r\n      \r\n      note: '',\r\n      addExpenses: 0,\r\n      deliveryFee: 0,\r\n\r\n      dataToSave: null,\r\n      \r\n      createdSale: null,\r\n      message: null,\r\n      error: null,\r\n    }\r\n\r\n    this.setData = this.setData.bind(this);\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    this.calcRowRamaCash = this.calcRowRamaCash.bind(this);\r\n    this.calcRowVolume = this.calcRowVolume.bind(this);\r\n    this.calcRowCash1Pc = this.calcRowCash1Pc.bind(this);\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.setRowCash = this.setRowCash.bind(this);\r\n    this.saveData = this.saveData.bind(this);\r\n    this.setNote = this.setNote.bind(this);\r\n    this.setDeliveryFee = this.setDeliveryFee.bind(this);\r\n    this.preSave = this.preSave.bind(this);\r\n    this.back = this.back.bind(this);\r\n    this.checkLoader = this.checkLoader.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.KLADMAN_SALE_INIT_DATA,\r\n      headers: { 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ \r\n        pineBrus: initData.pine_brus_lumbers,\r\n        larchBrus: initData.larch_brus_lumbers,\r\n        pineDoska: initData.pine_doska_lumbers,\r\n        larchDoska: initData.larch_doska_lumbers,\r\n        lumbers: initData.lumbers,\r\n        sellers: initData.sellers,\r\n        kladmanId: initData.kladman_id\r\n        });\r\n    })\r\n  }\r\n\r\n  setData (e) {\r\n    this.setState({\r\n      ...this.state,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id, selling_volume_total: 0, selling_volume: lumberData.volume }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n\r\n    lumber.selling_volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.selling_total_cash = (lumber.selling_volume_total * lumber.selling_price).toFixed(0)\r\n    lumber.selling_price_1 = (lumber.selling_total_cash / lumber.quantity).toFixed(0)\r\n    lumber.selling_volume = parseFloat(lumber.volume)\r\n\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.selling_volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.selling_total_cash = parseFloat(lumber.selling_volume_total * lumber.selling_price).toFixed(0)\r\n    lumber.selling_volume = parseFloat(lumber.selling_volume_total / lumber.quantity)\r\n    lumber.selling_price_1 = parseFloat(lumber.selling_total_cash / lumber.quantity).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.selling_price =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_total_cash = (lumber.selling_volume_total * lumber.selling_price).toFixed(0)\r\n    lumber.selling_price_1 = (lumber.selling_total_cash / lumber.quantity).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash1Pc (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.selling_price_1 =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_total_cash = (lumber.selling_price_1 * lumber.quantity).toFixed(0)\r\n    lumber.selling_volume_total =  (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.selling_volume = parseFloat(lumber.selling_volume_total / lumber.quantity)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowRamaCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.rama_price =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n    })\r\n  }\r\n\r\n  setRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.selling_total_cash =  e.target.value ? parseInt(e.target.value) : 0\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.selling_total_cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  setNote (e) {\r\n    this.setState({\r\n      note: e.target.value\r\n    })\r\n  }\r\n\r\n  setDeliveryFee (e) {\r\n    const deliveryFee = e.target.value ? parseInt(e.target.value) : 0\r\n    this.setState({\r\n      deliveryFee: deliveryFee,\r\n    })\r\n  }\r\n\r\n  preSave () {\r\n    const { lumbersToSale, loader, seller, bonusKladman, note, addExpenses, deliveryFee, totalCash, \r\n      totalVolume, kladmanId } = this.state\r\n    let raw_records = []\r\n    lumbersToSale.map(lumber =>{\r\n      if (lumber.selling_total_cash > 0 && lumber.quantity > 0) {\r\n        raw_records = lodashToggle(raw_records, lumber)\r\n      }\r\n    })\r\n\r\n    let data = {\r\n      raw_records: raw_records,\r\n      date: null,\r\n      loader: loader,\r\n      seller: seller,\r\n      bonus_kladman: bonusKladman ? kladmanId : null,\r\n      note: note,\r\n      add_expenses: addExpenses,\r\n      delivery_fee: deliveryFee,\r\n      sale_type: 'person',\r\n\r\n      sale_cash: parseFloat(totalCash),\r\n      volume: parseFloat(totalVolume),\r\n    }\r\n    this.setState({\r\n      dataToSave: data,\r\n    })\r\n  }\r\n\r\n  saveData () {\r\n    const { dataToSave } = this.state\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.KLADMAN_SALE_SCHEMA1_CREATE,\r\n      data: dataToSave,\r\n      headers: { 'content-type': 'application/JSON', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ message: response.data.message, createdSale: response.data.sale });\r\n    })\r\n    .catch(err => {\r\n        // const error = new Error(err);\r\n        // error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        // throw error;\r\n    })\r\n\r\n    this.setState({\r\n      dataToSave: null,\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      note: '',\r\n      addExpenses: 0,\r\n    })\r\n  }\r\n\r\n  back () {\r\n    this.setState({dataToSave: null})\r\n  }\r\n\r\n  checkLoader(e) {\r\n    if (e.target.name === 'seller')\r\n      this.setState({[e.target.name]: e.target.value})\r\n    else\r\n      this.setState({[e.target.name]: !this.state[e.target.name]})\r\n  }\r\n\r\n  render() {\r\n    const { lumbersToSale, createdSale, totalCash, totalVolume, note, addExpenses, dataToSave, message } \r\n      = this.state\r\n    return (\r\n      <div>\r\n        {createdSale \r\n          ? <CreatedSale sale={createdSale} message={message}/>\r\n          : dataToSave\r\n            ? <SaleSchema1ToCreate sale={dataToSave} saveData={this.saveData} back={this.back} \r\n              sellers={this.state.sellers}/>\r\n            : <div className='card card-style mb-1 mt-2 mx-1'>\r\n                <div className='content mb-0'>\r\n                  <div className='d-flex justify-content-between mb-2 text-center'>\r\n                    <h2>Что продаем?</h2>\r\n                    {/* <button className='btn btn-sm bg-teal-light' onClick={this.clear}>Очистить </button> */}\r\n                  </div>\r\n                </div>\r\n                <div className='content mt-0 mb-0'>\r\n                  {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n                    <LumberToSale \r\n                      lumber={lumber} \r\n                      setLumberID={this.setLumberID} \r\n                      calcRowQnty={this.calcRowQnty}\r\n                      calcRowCash={this.calcRowCash}\r\n                      calcRowRamaCash={this.calcRowRamaCash}\r\n                      calcRowVolume={this.calcRowVolume}\r\n                      calcRowCash1Pc={this.calcRowCash1Pc}\r\n                      setRowCash={this.setRowCash}\r\n                      pineBrus={this.state.pineBrus}\r\n                      larchBrus={this.state.larchBrus}\r\n                      pineDoska={this.state.pineDoska}\r\n                      larchDoska={this.state.larchDoska}\r\n                    />\r\n                  )}\r\n                  <button className='mt-1 btn btn-s bg-highlight' onClick={this.addLumberToSale}>\r\n                    Добавить пиломатериал\r\n                  </button>\r\n\r\n                </div>\r\n\r\n                <div className='content mt-0 px-2'>\r\n                  <Schema1CheckList loader={this.state.loader} checkLoader={this.checkLoader}\r\n                    seller={this.state.seller} bonusKladman={this.state.bonusKladman}\r\n                    sellers={this.state.sellers}\r\n                    />\r\n                  <AddNote note={note} setNote={this.setData}/>\r\n                 \r\n                  {totalCash > 0 &&\r\n                    <div className='d-flex justify-content-between mb-2'>\r\n                      <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                      <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n                    </div>\r\n                  }\r\n                  {totalCash > 0 &&\r\n                    <button\r\n                      onClick={this.preSave}\r\n                      className='btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r\n                        shadow-l mt-2'>\r\n                      Далее\r\n                    </button>\r\n                  }\r\n                </div>\r\n            </div>\r\n          }\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select'\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\n\r\n\r\nfunction LumbersTable (props) {\r\n  const { lumber_records } = props\r\n  console.log(lumber_records)\r\n  return (\r\n    <table className='table table-sm table-responsive mt-2'>\r\n      <thead>\r\n        <th>\r\n          Пиломат\r\n        </th>\r\n        <th>\r\n          кол-во\r\n        </th>\r\n        <th>\r\n          объем\r\n        </th>\r\n        <th>\r\n          цена за 1м3\r\n        </th>\r\n        <th>\r\n          сумма продажи\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {lumber_records.map(lumber_record =>\r\n        <tr>\r\n          <td>{lumber_record.name}</td>\r\n          <td>{lumber_record.quantity} шт</td>\r\n          <td>{lumber_record.volume_total} м3</td>\r\n          <td>{lumber_record.selling_price} руб</td>\r\n          <td>{lumber_record.selling_total_cash} руб</td>\r\n        </tr>\r\n          )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport function SalePerekupToCreate (props) {\r\n  const { sale, saveData, back } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  \r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Проверяем данные</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            {/* <p className={rowClass}>Дата: {sale.date}</p> */}\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма: {sale.sale_cash.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>Грузчик: {sale.loader ? 'да' : \"нет\"} </p>\r\n            <p className={rowClass}>Доставка: {sale.delivery_fee ? sale.delivery_fee + 'рублей' : 'нет'}</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses ? sale.add_expenses + 'рублей' : 'нет'}</p>           \r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.raw_records}/>\r\n          </div>\r\n        }\r\n        <div className='d-flex justify-content-around'>\r\n          <button onClick={back}\r\n            className='btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l'>\r\n            назад\r\n          </button>\r\n          <button onClick={saveData}\r\n            className='btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n              Рассчитать и сохранить данные\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreatedSale (props) {\r\n  const { sale, message } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Запись сохранена</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            <p className={rowClass}>Дата: {sale.date}</p>\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма продажи: {sale.selling_total_cash.toFixed(1)}  рублей</p>\r\n            <p className={rowClass}>Вознаграждение грузчика: {sale.loader_fee} рублей</p>\r\n            <p className={rowClass}>Стоимость доставки: {sale.delivery_fee} рублей</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses} рублей</p>\r\n            <p className={rowClass}>Сумма рамы (нетто): {sale.net_rama_cash.toFixed(1)}  рублей</p>\r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.lumber_records}/>\r\n          </div>\r\n        }\r\n        {message &&\r\n          <h2 className='color-green1-light text-center'>Данные сохранены!</h2> \r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function AddNote (props) {\r\n  const { note, setNote } = props\r\n  return (\r\n    <div className='ml-3 pt-1'>\r\n    <TextField \r\n      className=''\r\n      type='textarea' value={note} name='note' onChange={setNote} multiline={true} rowsMax={5}\r\n      id=\"standard\" variant=\"outlined\" className='d-block' label='Примечание' placeholder='Данные заказчика и др'\r\n    />   \r\n    </div>\r\n  )\r\n}\r\n\r\nexport function LumberToSale (props) {\r\n  const { lumber, setLumberID, calcRowQnty, calcRowCash, setRowCash, pineBrus, larchBrus, pineDoska,\r\n     larchDoska } = props\r\n  return (\r\n    <div className='mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border'>\r\n      <InputLabel htmlFor=\"grouped-native-select\" className='font-19 font-600'>\r\n        Пиломатериал {lumber.id + 1}\r\n      </InputLabel>\r\n      <Select \r\n        native \r\n        defaultValue=\"\" \r\n        id=\"grouped-native-select\" \r\n        className='color-dark1-light'\r\n        fullWidth\r\n        value={lumber.lumber} onChange={(e) =>setLumberID(e, lumber.id)}\r\n        name='lumber'\r\n        data-id={lumber.id}\r\n        defaultValue={null}\r\n        >\r\n        <option aria-label=\"None\" />\r\n        <optgroup label=\"Брус сосна\">\r\n          {pineBrus.map(pb =>\r\n            <option value={pb.id} >{`${pb.name} ${pb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Брус лиственница\">\r\n          {larchBrus.map(lb =>\r\n            <option value={lb.id} >{`${lb.name} ${lb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Доска сосна\">\r\n          {pineDoska.map(pd =>\r\n            <option value={pd.id} >{`${pd.name} ${pd.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n      </Select>\r\n      {lumber.lumber > 0 && \r\n        <div className='mt-3'>\r\n          <div className='d-flex justify-content-between align-items-center'>\r\n            <TextField \r\n              className='mr-2'\r\n              id=\"outlined-margin-dense\" \r\n              variant=\"outlined\" \r\n              label='Количество'\r\n              onChange={(e) => calcRowQnty(e, lumber.id)} type='number'\r\n              value={lumber.quantity > 0 && lumber.quantity}/>\r\n              \r\n            <TextField \r\n              className='ml-2'\r\n              id=\"outlined-margin-dense\"\r\n              variant=\"outlined\" \r\n              label='Цена за 1м3'\r\n              onChange={(e) => calcRowCash(e, lumber.id)} type='number'\r\n              value={lumber.rama_price > 0 && lumber.rama_price}\r\n              />\r\n\r\n            <TextField \r\n              className='ml-2'\r\n              id=\"outlined-margin-dense\"\r\n              variant=\"outlined\" \r\n              label='Сумма'\r\n              onChange={(e) => setRowCash(e, lumber.id)} type='number'\r\n              value={lumber.rama_total_cash > 0 && lumber.rama_total_cash}/>\r\n          </div>\r\n          <div className='d-flex mt-3 justify-content-between align-content-around'>\r\n            <p className='font-16 color-dark mb-0 mr-4'>Объем: \r\n              <span className='font-500 d-block'> {lumber.volume_total + ' м3'}</span>\r\n            </p>            \r\n          </div>\r\n        </div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DeliveryFeeComp (props) {\r\n  const { setDeliveryFee, deliveryFee } = props\r\n\r\n  return (\r\n    <div className='my-1'>\r\n      <TextField \r\n        className=''\r\n        id=\"outlined-margin-dense\"\r\n        variant=\"outlined\" \r\n        label='доставка'\r\n        onChange={setDeliveryFee} type='number'\r\n        value={deliveryFee > 0 && deliveryFee}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Schema1CheckList (props) {\r\n  const { loader, checkLoader, seller, bonusKladman, sellers } = props\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <Checkbox\r\n          checked={loader}\r\n          onChange={checkLoader}\r\n          color=\"blue2\"\r\n          name='loader'\r\n        />\r\n      }\r\n      label=\"Грузчик\"\r\n    />     \r\n  )\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component, useState  } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, lodashToggle, getObjectbyId } \r\n  from '../../components/utils';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\nimport { CreatedSale, AddNote, LumberToSale, DeliveryFeeComp, SalePerekupToCreate, Schema1CheckList } \r\n  from '../../components/kladman/SaleCreatePerekup';\r\n\r\n\r\nexport class SaleCreatePerekupContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pineBrus: [],\r\n      larchBrus: [],\r\n      pineDoska: [],\r\n      larchDoska: [],\r\n      lumbers: [],\r\n\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      \r\n      loader: true,\r\n      seller: null,\r\n      bonusKladman: false,      \r\n      \r\n      note: '',\r\n      addExpenses: 0,\r\n      deliveryFee: 0,\r\n\r\n      dataToSave: null,\r\n      \r\n      createdSale: null,\r\n      message: null,\r\n      error: null,\r\n    }\r\n\r\n    this.setData = this.setData.bind(this);\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.setRowCash = this.setRowCash.bind(this);\r\n    this.saveData = this.saveData.bind(this);\r\n    this.setNote = this.setNote.bind(this);\r\n    this.setDeliveryFee = this.setDeliveryFee.bind(this);\r\n    this.preSave = this.preSave.bind(this);\r\n    this.back = this.back.bind(this);\r\n    this.checkLoader = this.checkLoader.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.KLADMAN_SALE_INIT_DATA,\r\n      headers: { 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ \r\n        pineBrus: initData.pine_brus_lumbers,\r\n        larchBrus: initData.larch_brus_lumbers,\r\n        pineDoska: initData.pine_doska_lumbers,\r\n        larchDoska: initData.larch_doska_lumbers,\r\n        lumbers: initData.lumbers,\r\n        sellers: initData.sellers,\r\n        kladmanId: initData.kladman_id\r\n        });\r\n    })\r\n  }\r\n\r\n  setData (e) {\r\n    this.setState({\r\n      ...this.state,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_price = lumber.rama_price\r\n    lumber.volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.rama_price = e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_price = lumber.rama_price\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  setRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.rama_total_cash =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.rama_total_cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  setNote (e) {\r\n    this.setState({\r\n      note: e.target.value\r\n    })\r\n  }\r\n\r\n  setDeliveryFee (e) {\r\n    const deliveryFee = e.target.value ? parseInt(e.target.value) : 0\r\n    this.setState({\r\n      deliveryFee: deliveryFee,\r\n    })\r\n  }\r\n\r\n  preSave () {\r\n    const { lumbersToSale, loader, seller, bonusKladman, note, addExpenses, deliveryFee, totalCash, \r\n      totalVolume, kladmanId } = this.state\r\n    let raw_records = []\r\n    lumbersToSale.map(lumber =>{\r\n      if (lumber.rama_total_cash > 0 && lumber.quantity > 0) {\r\n        raw_records = lodashToggle(raw_records, lumber)\r\n      }\r\n    })\r\n\r\n    let data = {\r\n      raw_records: raw_records,\r\n      date: null,\r\n      loader: loader,\r\n      seller: seller,\r\n      bonus_kladman: null,\r\n      note: note,\r\n      add_expenses: addExpenses,\r\n      delivery_fee: deliveryFee,\r\n      sale_type: 'perekup',\r\n\r\n      sale_cash: parseFloat(totalCash),\r\n      volume: parseFloat(totalVolume),\r\n    }\r\n    this.setState({\r\n      dataToSave: data,\r\n    })\r\n  }\r\n\r\n  saveData () {\r\n    const { dataToSave } = this.state\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.KLADMAN_SALE_SCHEMA1_CREATE,\r\n      data: dataToSave,\r\n      headers: { 'content-type': 'application/JSON', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ message: response.data.message, createdSale: response.data.sale });\r\n    })\r\n    .catch(err => {\r\n        // const error = new Error(err);\r\n        // error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        // throw error;\r\n    })\r\n\r\n    this.setState({\r\n      dataToSave: null,\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      note: '',\r\n      addExpenses: 0,\r\n    })\r\n  }\r\n\r\n  back () {\r\n    this.setState({dataToSave: null})\r\n  }\r\n\r\n  checkLoader(e) {\r\n    if (e.target.name === 'seller')\r\n      this.setState({[e.target.name]: e.target.value})\r\n    else\r\n      this.setState({[e.target.name]: !this.state[e.target.name]})\r\n  }\r\n\r\n  render() {\r\n    const { lumbersToSale, createdSale, totalCash, totalVolume, note, addExpenses, dataToSave, message } \r\n      = this.state\r\n    return (\r\n      <div>\r\n        {createdSale \r\n          ? <CreatedSale sale={createdSale} message={message}/>\r\n          : dataToSave\r\n            ? <SalePerekupToCreate sale={dataToSave} saveData={this.saveData} back={this.back}/>\r\n            : <div className='card card-style mb-1 mt-2 mx-1'>\r\n                <div className='content mb-0'>\r\n                  <div className='d-flex justify-content-between mb-2 text-center'>\r\n                    <h2>Что продаем?</h2>\r\n                  </div>\r\n                </div>\r\n                <div className='content mt-0 mb-0'>\r\n                  {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n                    <LumberToSale \r\n                      lumber={lumber} \r\n                      setLumberID={this.setLumberID} \r\n                      calcRowQnty={this.calcRowQnty}\r\n                      calcRowCash={this.calcRowCash}\r\n                      setRowCash={this.setRowCash}\r\n                      pineBrus={this.state.pineBrus}\r\n                      larchBrus={this.state.larchBrus}\r\n                      pineDoska={this.state.pineDoska}\r\n                      larchDoska={this.state.larchDoska}\r\n                    />\r\n                  )}\r\n                  <button className='mt-1 btn btn-s bg-highlight' onClick={this.addLumberToSale}>\r\n                    Добавить пиломатериал\r\n                  </button>\r\n\r\n                </div>\r\n                \r\n                <div className='content mt-0'>\r\n                  <Schema1CheckList loader={this.state.loader} checkLoader={this.checkLoader}\r\n                    seller={this.state.seller} bonusKladman={this.state.bonusKladman}\r\n                    sellers={this.state.sellers}\r\n                    />\r\n                  <div className='d-flex justify-content-between my-2'>\r\n                    <DeliveryFeeComp deliveryFee={this.state.deliveryFee} setDeliveryFee={this.setDeliveryFee}/>\r\n                    <AddNote note={note} setNote={this.setData}/>\r\n                  </div>\r\n                  \r\n                  {totalCash > 0 &&\r\n                    <div className='d-flex justify-content-between my-2'>\r\n                      <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                      <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n                    </div>\r\n                  }\r\n                  {totalCash > 0 &&\r\n                    <button\r\n                      onClick={this.preSave}\r\n                      className='btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r\n                        shadow-l mt-2'>\r\n                      Далее\r\n                    </button>\r\n                  }\r\n                </div>\r\n            </div>\r\n          }\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select'\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\n\r\n\r\nfunction LumbersTable (props) {\r\n  const { lumber_records } = props\r\n\r\n  return (\r\n    <table className='table table-sm table-responsive mt-2'>\r\n      <thead>\r\n        <th>\r\n          Пиломат\r\n        </th>\r\n        <th>\r\n          кол-во\r\n        </th>\r\n        <th>\r\n          объем\r\n        </th>\r\n        <th>\r\n          цена за 1м3\r\n        </th>\r\n        <th>\r\n          сумма продажи\r\n        </th>\r\n      </thead>\r\n      <tbody>\r\n        {lumber_records.map(lumber_record =>\r\n        <tr>\r\n          <td>{lumber_record.name}</td>\r\n          <td>{lumber_record.quantity} шт</td>\r\n          <td>{lumber_record.volume_total} м3</td>\r\n          <td>{lumber_record.selling_price} руб</td>\r\n          <td>{lumber_record.selling_total_cash} руб</td>\r\n        </tr>\r\n          )}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport function SalePerekupToCreate (props) {\r\n  const { sale, saveData, back } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  \r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Проверяем данные</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            {/* <p className={rowClass}>Дата: {sale.date}</p> */}\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма: {sale.sale_cash.toFixed(1)} рублей</p>\r\n            <p className={rowClass}>Грузчик: {sale.loader ? 'да' : \"нет\"} </p>\r\n            <p className={rowClass}>Доставка: {sale.delivery_fee ? sale.delivery_fee + 'рублей' : 'нет'}</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses ? sale.add_expenses + 'рублей' : 'нет'}</p>           \r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.raw_records}/>\r\n          </div>\r\n        }\r\n        <div className='d-flex justify-content-around'>\r\n          <button onClick={back}\r\n            className='btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l'>\r\n            назад\r\n          </button>\r\n          <button onClick={saveData}\r\n            className='btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l'>\r\n              Рассчитать и сохранить данные\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreatedSale (props) {\r\n  const { sale, message } = props\r\n  const rowClass = 'mb-0 font-15 font-500 color-black'\r\n  return (\r\n    <div className='card card-style mt-2'>\r\n      <div className='content'>\r\n        <h4>Запись сохранена</h4>\r\n        {sale &&\r\n          <div className=''>\r\n            <p className={rowClass}>Дата: {sale.date}</p>\r\n            <p className={rowClass}>Объем: {sale.volume.toFixed(4)} м3</p>\r\n            <p className={rowClass}>Сумма продажи: {sale.selling_total_cash.toFixed(1)}  рублей</p>\r\n            <p className={rowClass}>Вознаграждение грузчика: {sale.loader_fee} рублей</p>\r\n            <p className={rowClass}>Стоимость доставки: {sale.delivery_fee} рублей</p>\r\n            <p className={rowClass}>Доп. расходы: {sale.add_expenses} рублей</p>\r\n            <p className={rowClass}>Сумма рамы (нетто): {sale.net_rama_cash.toFixed(1)}  рублей</p>\r\n            <p className={rowClass}>Примечание: {sale.note}</p>\r\n\r\n            <LumbersTable lumber_records={sale.lumber_records}/>\r\n          </div>\r\n        }\r\n        {message &&\r\n          <h2 className='color-green1-light text-center'>Данные сохранены!</h2> \r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function AddNote (props) {\r\n  const { note, setNote } = props\r\n  return (\r\n    <div className='ml-3 pt-1'>\r\n    <TextField \r\n      className=''\r\n      type='textarea' value={note} name='note' onChange={setNote} multiline={true} rowsMax={5}\r\n      id=\"standard\" variant=\"outlined\" className='d-block' label='Примечание' placeholder='Данные заказчика и др'\r\n    />   \r\n    </div>\r\n  )\r\n}\r\n\r\nexport function LumberToSale (props) {\r\n  const { lumber, setLumberID, calcRowQnty, calcRowCash, setRowCash, pineBrus, larchBrus, pineDoska,\r\n     larchDoska } = props\r\n  return (\r\n    <div className='mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border'>\r\n      <InputLabel htmlFor=\"grouped-native-select\" className='font-19 font-600'>\r\n        Пиломатериал {lumber.id + 1}\r\n      </InputLabel>\r\n      <Select \r\n        native \r\n        defaultValue=\"\" \r\n        id=\"grouped-native-select\" \r\n        className='color-dark1-light'\r\n        fullWidth\r\n        value={lumber.lumber} onChange={(e) =>setLumberID(e, lumber.id)}\r\n        name='lumber'\r\n        data-id={lumber.id}\r\n        defaultValue={null}\r\n        >\r\n        <option aria-label=\"None\" />\r\n        <optgroup label=\"Брус сосна Китай\">\r\n          {pineBrus.map(pb =>\r\n            <option value={pb.id} >{`${pb.china_name} ${pb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n      </Select>\r\n      <p className='my-0'>1шт = {lumber.china_volume}м3</p>\r\n      {lumber.lumber > 0 && \r\n        <div className='mt-3'>\r\n          <div className='d-flex justify-content-between align-items-center'>\r\n            <TextField \r\n              className='mr-2'\r\n              id=\"outlined-margin-dense\" \r\n              variant=\"outlined\" \r\n              label='Количество'\r\n              onChange={(e) => calcRowQnty(e, lumber.id)} type='number'\r\n              value={lumber.quantity > 0 && lumber.quantity}/>\r\n              \r\n            <TextField \r\n              className='ml-2'\r\n              id=\"outlined-margin-dense\"\r\n              variant=\"outlined\" \r\n              label='Цена за 1м3'\r\n              onChange={(e) => calcRowCash(e, lumber.id)} type='number'\r\n              value={lumber.rama_price > 0 && lumber.rama_price}\r\n              />\r\n\r\n            <TextField \r\n              className='ml-2'\r\n              id=\"outlined-margin-dense\"\r\n              variant=\"outlined\" \r\n              label='Сумма'\r\n              onChange={(e) => setRowCash(e, lumber.id)} type='number'\r\n              value={lumber.rama_total_cash > 0 && lumber.rama_total_cash}/>\r\n          </div>\r\n          <div className='d-flex mt-3 justify-content-between align-content-around'>\r\n            <p className='font-16 color-dark mb-0 mr-4'>Объем: \r\n              <span className='font-500 d-block'> {lumber.volume_total + ' м3'}</span>\r\n            </p>            \r\n          </div>\r\n        </div>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DeliveryFeeComp (props) {\r\n  const { setDeliveryFee, deliveryFee } = props\r\n\r\n  return (\r\n    <div className='my-1'>\r\n      <TextField \r\n        className=''\r\n        id=\"outlined-margin-dense\"\r\n        variant=\"outlined\" \r\n        label='доставка'\r\n        onChange={setDeliveryFee} type='number'\r\n        value={deliveryFee > 0 && deliveryFee}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function Schema1CheckList (props) {\r\n  const { loader, checkLoader, seller, bonusKladman, sellers } = props\r\n\r\n  return (\r\n    <FormControlLabel\r\n      control={\r\n        <Checkbox\r\n          checked={loader}\r\n          onChange={checkLoader}\r\n          color=\"blue2\"\r\n          name='loader'\r\n        />\r\n      }\r\n      label=\"Грузчик\"\r\n    />     \r\n  )\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component, useState  } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, lodashToggle, getObjectbyId } \r\n  from '../../components/utils';\r\nimport { parseErrorData } from '../../redux/api/utils';\r\n\r\nimport { CreatedSale, AddNote, LumberToSale, DeliveryFeeComp, SalePerekupToCreate, Schema1CheckList } \r\n  from '../../components/kladman/SaleCreateChina';\r\n\r\n\r\nexport class SaleCreateChinaContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      lumbers: [],\r\n\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      \r\n      loader: true,\r\n      \r\n      note: '',\r\n      addExpenses: 0,\r\n      deliveryFee: 0,\r\n\r\n      dataToSave: null,\r\n      \r\n      createdSale: null,\r\n      message: null,\r\n      error: null,\r\n    }\r\n\r\n    this.setData = this.setData.bind(this);\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.setRowCash = this.setRowCash.bind(this);\r\n    this.saveData = this.saveData.bind(this);\r\n    this.setNote = this.setNote.bind(this);\r\n    this.setDeliveryFee = this.setDeliveryFee.bind(this);\r\n    this.preSave = this.preSave.bind(this);\r\n    this.back = this.back.bind(this);\r\n    this.checkLoader = this.checkLoader.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.KLADMAN_SALE_INIT_DATA_CHINA,\r\n      headers: { 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ \r\n        pineBrus: initData.lumbers,\r\n        lumbers: initData.lumbers,\r\n        });\r\n    })\r\n  }\r\n\r\n  setData (e) {\r\n    this.setState({\r\n      ...this.state,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.china_volume * lumber.quantity).toFixed(6)\r\n\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n\r\n    lumber.selling_price = lumber.rama_price\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    \r\n    lumber.rama_price = e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.rama_total_cash = (lumber.volume_total * lumber.rama_price).toFixed(0)\r\n\r\n    lumber.selling_price = lumber.rama_price\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  setRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n\r\n    lumber.rama_total_cash =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.selling_total_cash = lumber.rama_total_cash\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.rama_total_cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  setNote (e) {\r\n    this.setState({\r\n      note: e.target.value\r\n    })\r\n  }\r\n\r\n  setDeliveryFee (e) {\r\n    const deliveryFee = e.target.value ? parseInt(e.target.value) : 0\r\n    this.setState({\r\n      deliveryFee: deliveryFee,\r\n    })\r\n  }\r\n\r\n  preSave () {\r\n    const { lumbersToSale, loader, note, addExpenses, deliveryFee, totalCash, totalVolume} = this.state\r\n    let raw_records = []\r\n    lumbersToSale.map(lumber =>{\r\n      if (lumber.rama_total_cash > 0 && lumber.quantity > 0) {\r\n        raw_records = lodashToggle(raw_records, lumber)\r\n      }\r\n    })\r\n\r\n    let data = {\r\n      raw_records: raw_records,\r\n      date: null,\r\n      loader: loader,\r\n      note: note,\r\n      seller: null,\r\n      bonus_kladman: null,\r\n      add_expenses: addExpenses,\r\n      delivery_fee: deliveryFee,\r\n      sale_type: 'china',\r\n\r\n      sale_cash: parseFloat(totalCash),\r\n      volume: parseFloat(totalVolume),\r\n    }\r\n    this.setState({\r\n      dataToSave: data,\r\n    })\r\n  }\r\n\r\n  saveData () {\r\n    const { dataToSave } = this.state\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'post',\r\n      url: endpoints.KLADMAN_SALE_CHINA_CREATE,\r\n      data: dataToSave,\r\n      headers: { 'content-type': 'application/JSON', 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ message: response.data.message, createdSale: response.data.sale });\r\n    })\r\n    .catch(err => {\r\n        // const error = new Error(err);\r\n        // error.data = parseErrorData(err);\r\n        this.setState({ message: 'Ошибка' });\r\n        // throw error;\r\n    })\r\n\r\n    this.setState({\r\n      dataToSave: null,\r\n      lumbersToSale: [],\r\n      totalVolume: 0.0,\r\n      totaCash: 0,\r\n      note: '',\r\n      addExpenses: 0,\r\n    })\r\n  }\r\n\r\n  back () {\r\n    this.setState({dataToSave: null})\r\n  }\r\n\r\n  checkLoader(e) {\r\n    if (e.target.name === 'seller')\r\n      this.setState({[e.target.name]: e.target.value})\r\n    else\r\n      this.setState({[e.target.name]: !this.state[e.target.name]})\r\n  }\r\n\r\n  render() {\r\n    const { lumbersToSale, createdSale, totalCash, totalVolume, note, addExpenses, dataToSave, message } \r\n      = this.state\r\n    return (\r\n      <div>\r\n        {createdSale \r\n          ? <CreatedSale sale={createdSale} message={message}/>\r\n          : dataToSave\r\n            ? <SalePerekupToCreate sale={dataToSave} saveData={this.saveData} back={this.back}/>\r\n            : <div className='card card-style mb-1 mt-2 mx-1'>\r\n                <div className='content mb-0'>\r\n                  <div className='d-flex justify-content-between mb-2 text-center'>\r\n                    <h2>Что продаем?</h2>\r\n                  </div>\r\n                </div>\r\n                <div className='content mt-0 mb-0'>\r\n                  {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n                    <LumberToSale \r\n                      lumber={lumber} \r\n                      setLumberID={this.setLumberID} \r\n                      calcRowQnty={this.calcRowQnty}\r\n                      calcRowCash={this.calcRowCash}\r\n                      setRowCash={this.setRowCash}\r\n                      pineBrus={this.state.pineBrus}\r\n                    />\r\n                  )}\r\n                  <button className='mt-1 btn btn-s bg-highlight' onClick={this.addLumberToSale}>\r\n                    Добавить пиломатериал\r\n                  </button>\r\n\r\n                </div>\r\n                \r\n                <div className='content mt-0'>\r\n                  <Schema1CheckList loader={this.state.loader} checkLoader={this.checkLoader}\r\n                    seller={this.state.seller} bonusKladman={this.state.bonusKladman}\r\n                    sellers={this.state.sellers}\r\n                    />\r\n                  <div className='d-flex justify-content-between my-2'>\r\n                    <DeliveryFeeComp deliveryFee={this.state.deliveryFee} setDeliveryFee={this.setDeliveryFee}/>\r\n                    <AddNote note={note} setNote={this.setData}/>\r\n                  </div>\r\n                  \r\n                  {totalCash > 0 &&\r\n                    <div className='d-flex justify-content-between my-2'>\r\n                      <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                      <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n                    </div>\r\n                  }\r\n                  {totalCash > 0 &&\r\n                    <button\r\n                      onClick={this.preSave}\r\n                      className='btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r\n                        shadow-l mt-2'>\r\n                      Далее\r\n                    </button>\r\n                  }\r\n                </div>\r\n            </div>\r\n          }\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component, useRef  } from 'react';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\n\r\n\r\nfunction LumberInputs (props) {\r\n  const { lumber, calcRowQnty, calcRowVolume, calcRowCash, label } = props\r\n  return (\r\n    <div className='my-2'>\r\n      <h5>{label}:</h5>\r\n      <div className='d-flex justify-content-start '>\r\n        <TextField \r\n          className='pr-2'\r\n          id=\"outlined-margin-dense\" \r\n          variant=\"outlined\" \r\n          label='Количество'\r\n          type='number'\r\n          onChange={(e) => calcRowQnty(e, lumber.id)}\r\n          value={lumber.quantity > 0 && lumber.quantity}/>\r\n\r\n        <TextField \r\n          className='pr-2'\r\n          id=\"outlined-margin-dense\"\r\n          variant=\"outlined\" \r\n          label='Объем'\r\n          type='number'\r\n          onChange={(e) => calcRowVolume(e, lumber.id)}\r\n          value={lumber.volume_total > 0 && lumber.volume_total}/>\r\n      </div>\r\n      <div className='d-flex justify-content-start mt-2'>\r\n        <TextField \r\n          className='pr-2'\r\n          id=\"outlined-margin-dense\"\r\n          variant=\"outlined\" \r\n          label='Цена за 1м3'\r\n          type='number'\r\n          onChange={(e) => calcRowCash(e, lumber.id)}\r\n          value={lumber.price > 0 && lumber.price}/>\r\n        <TextField \r\n          className='pr-2'\r\n          id=\"outlined-margin-dense\"\r\n          variant=\"outlined\" \r\n          disabled\r\n          label='Сумма'\r\n          type='number'\r\n          value={lumber.total_cash > 0 && lumber.total_cash}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport function LumbersToSale (props) {\r\n  const { lumber, setLumberID, calcRowQnty, calcRowCash, pineBrus,  pineDoska, turnCalc, delLumber,\r\n     calcRoundRowQnty, calcRowVolume, calcRoundRowVolume, calcChinaRowQnty, calcChinaRowVolume } = props\r\n\r\n  const lumberRef = useRef(null);\r\n  const executeScroll = () => lumberRef.current.scrollIntoView()\r\n\r\n  return (\r\n    <div className='mt-2 mb-3 px-2 py-3 bg-white rounded-m border' ref={lumberRef}>\r\n      <InputLabel htmlFor=\"grouped-native-select\" className='font-19 font-600 color-black'>\r\n        Пиломатериал {lumber.id + 1}\r\n      </InputLabel>\r\n      <Select \r\n        native \r\n        defaultValue=\"\" \r\n        id=\"grouped-native-select\" \r\n        className='color-dark1-light'\r\n        fullWidth\r\n        value={lumber.lumber} onChange={(e) =>setLumberID(e, lumber.id)}\r\n        name='lumber'\r\n        data-id={lumber.id}\r\n        defaultValue={null}\r\n        onClick={executeScroll}\r\n        >\r\n        <option aria-label=\"None\" />\r\n        <optgroup label=\"Брус\">\r\n          {pineBrus.map(pb =>\r\n            <option value={pb.id} >{`${pb.name} ${pb.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n        <optgroup label=\"Доска\">\r\n          {pineDoska.map(pd =>\r\n            <option value={pd.id} >{`${pd.name} ${pd.wood_species}`} </option>\r\n            )}\r\n        </optgroup>\r\n\r\n      </Select>\r\n      {lumber.lumber > 0 && \r\n        <div className='mt-2'>\r\n          <div className='d-flex justify-content-around'>\r\n            <button className={lumber.calcType === 'exact' ? 'btn btn-m bg-blue1-light' \r\n              : 'btn btn-m border'} \r\n              onClick={() => turnCalc(lumber.id, 'exact')}>\r\n              Точный счет\r\n            </button>\r\n            <button className={lumber.calcType === 'round' ? 'btn btn-m bg-blue1-light' \r\n              : 'btn btn-m border'}\r\n              onClick={() => turnCalc(lumber.id, 'round')}>\r\n              Округленный счет\r\n            </button>\r\n            {lumber.china_volume > 0 &&\r\n              <button className={lumber.calcType === 'china' ? 'btn btn-m bg-blue1-light' \r\n              : 'btn btn-m border'}\r\n              onClick={() => turnCalc(lumber.id, 'china')}>\r\n                Китайский счет\r\n            </button>\r\n            }\r\n          </div>\r\n          {lumber.calcType === 'exact' &&\r\n            <LumberInputs \r\n              lumber={lumber}\r\n              label={'Точный счет'} \r\n              calcRowQnty={calcRowQnty} \r\n              calcRowVolume={calcRowVolume}\r\n              calcRowCash={calcRowCash}\r\n            />\r\n          }\r\n          {lumber.calcType === 'round' &&\r\n            <LumberInputs \r\n              lumber={lumber}\r\n              label={'Округленный счет'} \r\n              calcRowQnty={calcRoundRowQnty} \r\n              calcRowVolume={calcRoundRowVolume}\r\n              calcRowCash={calcRowCash}\r\n            />            \r\n          }\r\n          {lumber.calcType === 'china' &&\r\n            <LumberInputs \r\n              lumber={lumber}\r\n              label={'Китайский счет'} \r\n              calcRowQnty={calcChinaRowQnty} \r\n              calcRowVolume={calcChinaRowVolume}\r\n              calcRowCash={calcRowCash}\r\n            />            \r\n          }\r\n        </div>}\r\n      {lumber.lumber > 0 && \r\n        <button className='btn btn-sm bg-red2-light mt-2 ' onClick={() => delLumber(lumber.id)}>удалить</button>\r\n      }\r\n    </div>\r\n  )\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, getObjectbyId, toggleArrayDictById } \r\n  from '../../components/utils';\r\n\r\nimport { LumbersToSale } from '../../components/kladman/SaleCalc';\r\n\r\n\r\nexport class SaleCalcContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pineBrus: [],\r\n      pineDoska: [],\r\n      lumbers: [],\r\n\r\n      lumberToSale: null,\r\n      lumbersToSale: [],\r\n\r\n      totalCash: 0,\r\n      totalVolume: 0\r\n    }\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.turnCalc = this.turnCalc.bind(this);\r\n\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowVolume = this.calcRowVolume.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    \r\n    this.calcRoundRowQnty = this.calcRoundRowQnty.bind(this);\r\n    this.calcRoundRowVolume = this.calcRoundRowVolume.bind(this);\r\n\r\n    this.calcChinaRowQnty = this.calcChinaRowQnty.bind(this);\r\n    this.calcChinaRowVolume = this.calcChinaRowVolume.bind(this);\r\n\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.delLumber = this.delLumber.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.KLADMAN_SALE_CALC_DATA,\r\n      headers: { 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ \r\n        pineBrus: initData.pine_brus_lumbers,\r\n        pineDoska: initData.pine_doska_lumbers,\r\n        lumbers: initData.lumbers,\r\n        });\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id, calcType: 'exact' }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.volume).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.price =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRoundRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.round_volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRoundRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.round_volume).toFixed(0)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcChinaRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.china_volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcChinaRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.china_volume).toFixed(0)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  turnCalc (id, calcType) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n\r\n    if (calcType === 'round') {\r\n      lumber.volume_total = (lumber.quantity * lumber.round_volume).toFixed(3)\r\n    } \r\n\r\n    if (calcType === 'exact') {\r\n      lumber.volume_total = (lumber.quantity * lumber.volume).toFixed(4)\r\n    }\r\n\r\n    if (calcType === 'china') {\r\n      lumber.volume_total = (lumber.quantity * lumber.china_volume).toFixed(4)\r\n      lumber.price = 0\r\n    }\r\n\r\n    lumber.calcType = calcType\r\n    lumber.total_cash = lumber.volume_total * lumber.price\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.total_cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  delLumber (id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumbersToSale = toggleArrayDictById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n \r\n  render() {\r\n    const { lumbersToSale, totalVolume, totalCash } = this.state\r\n    return (\r\n      <div className=''>\r\n        <div className='content'>\r\n          <h3>Калькулятор</h3> \r\n          {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n            <LumbersToSale \r\n              lumber={lumber} \r\n              setLumberID={this.setLumberID} \r\n\r\n              calcRowQnty={this.calcRowQnty}\r\n              calcRowCash={this.calcRowCash}\r\n              calcRowVolume={this.calcRowVolume}\r\n\r\n              calcRoundRowQnty={this.calcRoundRowQnty}\r\n              calcRoundRowVolume={this.calcRoundRowVolume}\r\n\r\n              calcChinaRowQnty={this.calcChinaRowQnty}\r\n              calcChinaRowVolume={this.calcChinaRowVolume}\r\n              \r\n              turnCalc={this.turnCalc}\r\n              delLumber={this.delLumber}\r\n              pineBrus={this.state.pineBrus}\r\n              pineDoska={this.state.pineDoska}\r\n            />\r\n          )}\r\n          <div className='d-flex justify-content-center'>\r\n            <button className='mt-1 btn btn-l bg-highlight' onClick={this.addLumberToSale}>\r\n              Добавить пиломатериал\r\n            </button>\r\n          </div>\r\n          {totalCash > 0 &&\r\n            <div className='card card-style mt-2'>\r\n              <div className='content d-flex justify-content-between mb-2 '>\r\n                <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { replaceItemInDictArrayById, getObjectbyId, toggleArrayDictById } \r\n  from '../../components/utils';\r\n\r\nimport { LumbersToSale } from '../../components/kladman/SaleCalc';\r\n\r\n\r\nexport class SaleCreateCommonContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      pineBrus: [],\r\n      pineDoska: [],\r\n      lumbers: [],\r\n\r\n      lumberToSale: null,\r\n      lumbersToSale: [],\r\n\r\n      totalCash: 0,\r\n      totalVolume: 0\r\n    }\r\n    this.addLumberToSale = this.addLumberToSale.bind(this);\r\n    this.setLumberID = this.setLumberID.bind(this);\r\n    this.turnCalc = this.turnCalc.bind(this);\r\n\r\n    this.calcRowQnty = this.calcRowQnty.bind(this);\r\n    this.calcRowVolume = this.calcRowVolume.bind(this);\r\n    this.calcRowCash = this.calcRowCash.bind(this);\r\n    \r\n    this.calcRoundRowQnty = this.calcRoundRowQnty.bind(this);\r\n    this.calcRoundRowVolume = this.calcRoundRowVolume.bind(this);\r\n\r\n    this.calcChinaRowQnty = this.calcChinaRowQnty.bind(this);\r\n    this.calcChinaRowVolume = this.calcChinaRowVolume.bind(this);\r\n\r\n    this.calcTotal = this.calcTotal.bind(this);\r\n    this.delLumber = this.delLumber.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.KLADMAN_SALE_CALC_DATA,\r\n      headers: { 'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(res => {\r\n      const initData = res.data;\r\n      this.setState({ \r\n        pineBrus: initData.pine_brus_lumbers,\r\n        pineDoska: initData.pine_doska_lumbers,\r\n        lumbers: initData.lumbers,\r\n        });\r\n    })\r\n  }\r\n\r\n  addLumberToSale () {\r\n    this.setState({\r\n      ...this.state,\r\n      lumbersToSale: [\r\n        ...this.state.lumbersToSale,\r\n        {id: this.state.lumbersToSale.length}\r\n      ]\r\n    })\r\n  }\r\n\r\n  setLumberID (e, id) {\r\n    let { lumbersToSale, lumbers } = this.state\r\n    let lumberData = getObjectbyId(lumbers, e.target.value)\r\n    lumberData = { ...lumberData, id: id, calcType: 'exact' }\r\n    \r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumberData)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale\r\n    })\r\n  }\r\n\r\n  calcRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.volume).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRowCash (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.price =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRoundRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.round_volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcRoundRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.round_volume).toFixed(0)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcChinaRowQnty (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.quantity =  e.target.value ? parseInt(e.target.value) : 0\r\n    lumber.volume_total = (lumber.china_volume * lumber.quantity).toFixed(4)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcChinaRowVolume (e, id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumber.volume_total =  e.target.value ? parseFloat(e.target.value) : 0\r\n    lumber.quantity = (lumber.volume_total / lumber.china_volume).toFixed(0)\r\n    lumber.total_cash = (lumber.volume_total * lumber.price).toFixed(0)\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n    \r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  turnCalc (id, calcType) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n\r\n    if (calcType === 'round') {\r\n      lumber.volume_total = (lumber.quantity * lumber.round_volume).toFixed(3)\r\n    } \r\n\r\n    if (calcType === 'exact') {\r\n      lumber.volume_total = (lumber.quantity * lumber.volume).toFixed(4)\r\n    }\r\n\r\n    if (calcType === 'china') {\r\n      lumber.volume_total = (lumber.quantity * lumber.china_volume).toFixed(4)\r\n      lumber.price = 0\r\n    }\r\n\r\n    lumber.calcType = calcType\r\n    lumber.total_cash = lumber.volume_total * lumber.price\r\n\r\n    lumbersToSale = replaceItemInDictArrayById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n\r\n  calcTotal (lumbers) {\r\n    let totalCash = 0\r\n    let totalVolume = 0.0\r\n\r\n    lumbers.map(lumber => {\r\n      totalCash += parseInt(lumber.total_cash)\r\n      totalVolume += parseFloat(lumber.volume_total)\r\n    })\r\n    return { totalCash: totalCash.toFixed(0), totalVolume: totalVolume.toFixed(4) }\r\n  }\r\n\r\n  delLumber (id) {\r\n    let { lumbersToSale } = this.state\r\n    let lumber = getObjectbyId(lumbersToSale, id)\r\n    lumbersToSale = toggleArrayDictById(lumbersToSale, lumber)\r\n    const { totalCash, totalVolume } = this.calcTotal(lumbersToSale)\r\n\r\n    this.setState({\r\n      lumbersToSale: lumbersToSale,\r\n      totalCash: totalCash,\r\n      totalVolume: totalVolume\r\n    })\r\n  }\r\n \r\n  render() {\r\n    const { lumbersToSale, totalVolume, totalCash } = this.state\r\n    return (\r\n      <div className=''>\r\n        <div className='content'>\r\n          <h3>Что продаем?</h3> \r\n          {lumbersToSale.length > 0  && lumbersToSale.map(lumber => lumber &&\r\n            <LumbersToSale \r\n              lumber={lumber} \r\n              setLumberID={this.setLumberID} \r\n              calcRowQnty={this.calcRowQnty}\r\n              calcRowCash={this.calcRowCash}\r\n              calcRowVolume={this.calcRowVolume}\r\n              calcRoundRowQnty={this.calcRoundRowQnty}\r\n              calcRoundRowVolume={this.calcRoundRowVolume}\r\n              turnCalc={this.turnCalc}\r\n              delLumber={this.delLumber}\r\n              pineBrus={this.state.pineBrus}\r\n              pineDoska={this.state.pineDoska}\r\n            />\r\n          )}\r\n          <div className='d-flex justify-content-center'>\r\n            <button className='mt-1 btn btn-l bg-highlight' onClick={this.addLumberToSale}>\r\n              Добавить пиломатериал\r\n            </button>\r\n          </div>\r\n          {totalCash > 0 &&\r\n            <div className='card card-style mt-2'>\r\n              <div className='content d-flex justify-content-between mb-2 '>\r\n                <p className='font-20'>Общий объем: {totalVolume} м3</p>\r\n                <p className='font-20'>Итого сумма: {totalCash} рублей</p>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import axios from 'axios';\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport endpoints from '../../redux/api/endpoints';\r\nimport { getToday } from '../../components/utils';\r\nimport { parseErrorData, createUrlParamsFromFilters } from '../../redux/api/utils';\r\n\r\n\r\nexport function SalesTable (props) {\r\n  const { sales, totals } = props\r\n\r\n  return (\r\n    <table className='table table-sm table-responsive'>\r\n      <thead>\r\n        <th>Дата/Клиент</th>\r\n        <th>Пиломат</th>\r\n        {/* <th>Обьем</th> */}\r\n        <th>Сумма</th>\r\n        <th>Продавeц</th>\r\n        {/* <th>Сумма рамы</th> */}\r\n        <th>грузчик</th>\r\n        <th>кладмэн</th>\r\n        <th>Доставка</th>\r\n        <th className='text-nowrap'>Доп. расходы</th>\r\n        {/* <th>Чистая прибыль</th> */}\r\n      </thead>\r\n      <tbody>\r\n        {sales.map(sale => \r\n          <tr>\r\n            <td style={{lineHeight: '15px'}}>\r\n              {sale.date}\r\n              <span className='d-block'>{sale.note}</span>\r\n              <span className='font-13'>{sale.sale_type}</span>\r\n            </td>\r\n            <td className='text-nowrap'>\r\n              {sale.lumber_records.map(lumber =>\r\n                <span className='d-block mb-2' style={{lineHeight: '14px'}}>\r\n                  {lumber.quantity}шт {lumber.lumber}\r\n                  {/* <span className='mr-1'>{lumber.quantity}шт</span> */}\r\n                  {/* <span className='mr-1'>{lumber.volume}м3</span>\r\n                  <span className=' d-block'>{lumber.selling_price}р</span> */}\r\n                </span>\r\n                )}\r\n            </td>\r\n            {/* <td>{sale.volume}</td> */}\r\n            <td>\r\n              {sale.selling_total_cash}\r\n            </td>\r\n            <td style={{lineHeight: '15px'}}>\r\n              <span className='d-block'>{sale.seller_fee}</span>\r\n              {sale.seller_name && <span className=''>{sale.seller_name}</span>}\r\n            </td>\r\n            {/* <td>\r\n              {sale.rama_total_cash}\r\n            </td> */}\r\n            <td>\r\n              {sale.loader_fee}\r\n            </td>\r\n            <td>\r\n              {sale.kladman_fee}\r\n            </td>\r\n            <td>\r\n              {sale.delivery_fee}\r\n            </td>\r\n            <td>\r\n              {sale.add_expenses}\r\n            </td>\r\n            {/* <td>\r\n              {sale.net_rama_cash}\r\n            </td> */}\r\n          </tr>\r\n        )}\r\n        <tr className='font-500 font-16'>\r\n          <td>Итого</td>\r\n          <td>-</td>\r\n          {/* <td>{totals.total_volume} </td> */}\r\n          <td>{totals.total_selling_cash}</td>\r\n          <td>{totals.total_seller_fee}</td>\r\n          {/* <td>{totals.total_rama_cash}</td> */}\r\n          <td>{totals.total_loader_fee}</td>\r\n          <td>{totals.total_kladman_fee}</td>\r\n          <td>{totals.total_delivery_fee}</td>\r\n          <td>{totals.total_add_expenses}</td>\r\n          {/* <td>{totals.total_net_rama_cash}</td> */}\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\n\r\nexport class SaleList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      saleList: [],\r\n      totals: {},\r\n      \r\n      message: null,\r\n      error: null,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem('token');\r\n    // const params = createUrlParamsFromFilters({date_after: getToday()});\r\n    const params = {}\r\n\r\n    axios({\r\n      method: 'get',\r\n      url: endpoints.MANAGER_SALE_LIST,\r\n      params: params,\r\n      headers: {'Authorization': `JWT ${token}` }\r\n    })\r\n    .then(response => {\r\n      this.setState({ ...this.state, saleList: response.data.sales, totals: response.data.totals });\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { saleList, totals } = this.state\r\n    return (\r\n      <div className='mt-2'>\r\n        <div className='card card-style mb-2'>\r\n          <div className='content'>\r\n            <h4 className='mb-2'>Продажи ({saleList.length})</h4>\r\n            {saleList.length > 0 \r\n              ? <SalesTable sales={saleList} totals={totals}/>\r\n              : <h5>Нет продаж</h5>\r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport AuthActions from '../redux/redux-sauce/auth'\r\n\r\nexport default function requireAuthentication(Component, group) {\r\n\r\n    class AuthenticatedComponent extends React.Component {\r\n        componentDidMount() {\r\n          const token = localStorage.getItem('token');\r\n          if (token) {\r\n            this.props.checkToken(token);\r\n          }\r\n        }\r\n\r\n        render() {\r\n          let { fetching, user } = this.props.state.auth\r\n          let access = false\r\n        //   if (this.props.isLoggedIn === true && (ws_numbers.includes(this.props.user.workshop_number) || \r\n        //     this.props.user.is_officer)) access = true\r\n        \r\n          if (this.props.isLoggedIn === true && !group) access = true\r\n          if (this.props.isLoggedIn && group === 'manager' && user.is_manager) access = true\r\n          if (this.props.isLoggedIn && group === 'senior_ramshik' && user.is_senior_ramshik) access = true\r\n          if (this.props.isLoggedIn && group === 'kladman' && user.is_kladman) access = true\r\n\r\n          return (\r\n            fetching \r\n              ? <p>Loading</p>\r\n              : this.props.isLoggedIn\r\n                ? <Component {...this.props} />\r\n                : null\r\n          )\r\n        }\r\n    }\r\n\r\n    const mapStateToProps = (state) => ({\r\n        isLoggedIn: state.auth.isLoggedIn,\r\n        user: state.auth.user,\r\n        state: state\r\n    });\r\n\r\n\r\n    const mapDispatchToProps = dispatch => ({\r\n        // checkAuth: (groups) => dispatch(authActions.checkAuthRequest(groups))\r\n        // auth\r\n        checkToken: (token) => dispatch(AuthActions.checkTokenRequest(token)),\r\n    })\r\n\r\n    return connect(mapStateToProps, mapDispatchToProps)(AuthenticatedComponent);\r\n}\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\nimport { Provider } from 'react-redux';\r\nimport configureStore from './redux/store/';\r\nimport { SnackbarProvider } from 'notistack';\r\n\r\n// Containers\r\nimport Main from './containers/Main';\r\nimport Header from './containers/HeaderContainer';\r\nimport  ManagerRamshikPayments  from './containers/manager/RamshikPayments';\r\nimport  ManagerShiftList  from './containers/manager/Shifts';\r\nimport { ManagerStock } from './containers/manager/Stock';\r\n\r\nimport { ShiftCreateComponent } from './containers/ramshik/Shift';\r\nimport { RamshikShiftList } from './containers/ramshik/ShiftList';\r\nimport { RamshikPayouts } from './containers/ramshik/Payouts';\r\n\r\nimport { SaleCreateComponent } from './containers/kladman/SaleCreate';\r\nimport { SaleCreateSchema1Container } from './containers/kladman/SaleCreateSchema1';\r\nimport { SaleCreatePerekupContainer } from './containers/kladman/SaleCreatePerekup';\r\nimport { SaleCreateChinaContainer } from './containers/kladman/SaleCreateChina';\r\nimport { SaleCalcContainer } from './containers/kladman/SaleCalc';\r\nimport { SaleCreateCommonContainer } from './containers/kladman/SaleCreateCommon';\r\nimport { SaleList } from './containers/manager/SaleList';\r\n\r\nimport requireAuthentication from './containers/AuthContainer';\r\n\r\nconst store = configureStore()\r\n \r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <SnackbarProvider maxSnack={3} \r\n      // classes={{\r\n      //   variantNeedToLogin: classes.needToLogin,\r\n      // }}\r\n    >\r\n      <Router>\r\n        <div className='app' id=\"page\" className=''>\r\n          <Header />\r\n          <div className=\"page-content header-clear\">\r\n            <Switch>\r\n              <Route exact path=\"/\" component={Main} />\r\n\r\n              {/* manager views */}\r\n              <Route exact path=\"/manager/ramshik_payments/\" \r\n                component={requireAuthentication(ManagerRamshikPayments, 'manager')} />\r\n              <Route exact path=\"/manager/shift_list/\" \r\n                component={requireAuthentication(ManagerShiftList, 'manager')} />\r\n              <Route exact path=\"/manager/stock/\" \r\n                component={requireAuthentication(ManagerStock, 'manager')} />\r\n              <Route exact path=\"/manager/sale_list/\" \r\n                component={requireAuthentication(SaleList, 'manager')} />\r\n              <Route exact path=\"/manager/shift/create_shift/\" \r\n                component={requireAuthentication(ShiftCreateComponent, 'manager')} />\r\n              <Route exact path=\"/manager/sales/create_sale/\" \r\n                component={requireAuthentication(SaleCreateCommonContainer, 'manager')} />\r\n              <Route exact path=\"/manager/sales/create_sale_schema1/\" \r\n                component={requireAuthentication(SaleCreateSchema1Container, 'manager')} />\r\n              <Route exact path=\"/manager/sales/create_sale_perekup/\" \r\n                component={requireAuthentication(SaleCreatePerekupContainer, 'manager')} />\r\n              <Route exact path=\"/manager/sales/create_sale_china/\" \r\n                component={requireAuthentication(SaleCreateChinaContainer, 'manager')} />\r\n              <Route exact path=\"/manager/sales/calc/\" \r\n                component={requireAuthentication(SaleCalcContainer, 'manager')} />\r\n\r\n              {/* ramshik views */}\r\n              <Route exact path=\"/ramshik/shift/create_shift/\" \r\n                component={requireAuthentication(ShiftCreateComponent, 'is_senior_ramshik')} />\r\n              <Route exact path=\"/ramshik/shift/list/\" \r\n                component={requireAuthentication(RamshikShiftList, 'is_ramshik')} />\r\n              <Route exact path=\"/ramshik/payouts/\" \r\n              component={requireAuthentication(RamshikPayouts, 'is_ramshik')} />     \r\n\r\n              {/* kladman views */}\r\n              <Route exact path=\"/kladman/sales/create_sale/\" \r\n                component={requireAuthentication(SaleCreateComponent, 'kladman')} />\r\n              <Route exact path=\"/kladman/stock/\" \r\n                component={requireAuthentication(ManagerStock, 'kladman')} />\r\n              <Route exact path=\"/kladman/sale_list/\" \r\n                component={requireAuthentication(SaleList, 'kladman')} />\r\n              <Route exact path=\"/kladman/shift_list/\" \r\n                component={requireAuthentication(ManagerShiftList, 'kladman')} />\r\n\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    </SnackbarProvider>\r\n  </Provider>, document.getElementById('root')\r\n);"],"sourceRoot":""}