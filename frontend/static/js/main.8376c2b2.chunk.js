(this.webpackJsonpdm=this.webpackJsonpdm||[]).push([[0],{206:function(e,t,a){e.exports=a(385)},24:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthTypes",(function(){return i})),a.d(t,"INITIAL_STATE",(function(){return d})),a.d(t,"AuthSelectors",(function(){return h})),a.d(t,"loginRequest",(function(){return b})),a.d(t,"loginSuccess",(function(){return v})),a.d(t,"loginFailure",(function(){return p})),a.d(t,"signUpRequest",(function(){return E})),a.d(t,"signUpSuccess",(function(){return g})),a.d(t,"signUpFailure",(function(){return f})),a.d(t,"logoutRequest",(function(){return _})),a.d(t,"logoutSuccess",(function(){return y})),a.d(t,"logoutFailure",(function(){return k})),a.d(t,"resetAuthErrors",(function(){return N})),a.d(t,"toggleModal",(function(){return S})),a.d(t,"checkTokenRequest",(function(){return T})),a.d(t,"checkTokenSuccess",(function(){return C})),a.d(t,"checkTokenFail",(function(){return O})),a.d(t,"checkAuthSuccess",(function(){return j})),a.d(t,"reducer",(function(){return w}));var l,n=a(10),c=a(136),s=a(186),r=a.n(s),o=Object(c.createActions)({loginRequest:["data"],loginSuccess:["user"],loginFailure:["error"],signupRequest:["data"],signupSuccess:["user"],signupFailure:["error"],logoutRequest:null,logoutSuccess:null,logoutFailure:["error"],checkTokenRequest:["payload"],checkTokenSuccess:["payload"],checkTokenFail:["error"],resetAuthErrors:null,restorePasswordRequest:["data"],restorePasswordSuccess:null,restorePasswordFailure:["error"],toggleModal:["isAuthModalOpen"],checkAuthRequest:["payload"],checkAuthSuccess:["payload"],checkAuthFail:null}),u=o.Types,m=o.Creators,i=u;t.default=m;var d=r()({fetching:!1,user:null,error:"",isLoggedIn:!1,isLoggingIn:!1}),h={getUser:function(e){return e.user}},b=function(e,t){t.data;return e.merge({fetching:!0,user:null,isLoggingIn:!0,isLoggedIn:!1})},v=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggedIn:!0,isLoggingIn:!1})},p=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},E=function(e,t){t.data;return e.merge({fetching:!0,user:{},isLoggingIn:!0,isLoggedIn:!1})},g=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggingIn:!1,isLoggedIn:!0})},f=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggingIn:!1,isLoggedIn:!1})},_=function(e){return e.merge({fetching:!0,isLoggingIn:!0})},y=function(e){return e.merge({fetching:!1,error:null,user:null,isLoggingIn:!1,isLoggedIn:!1})},k=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,isLoggingIn:!1})},N=function(e){return e.merge({fetching:!1,error:null})},S=function(e,t){var a=t.isAuthModalOpen;return e.merge({isAuthModalOpen:a,error:null})},T=function(e,t){t.payload;return e.merge({fetching:!0})},C=function(e,t){var a=t.payload;return e.merge({fetching:!1,error:null,user:a.user,isLoggedIn:!0,isLoggingIn:!1})},O=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},j=function(e,t){var a=t.payload;return e.merge({user:a,isLoggedIn:!0,isLogginIn:!1})},w=Object(c.createReducer)(d,(l={},Object(n.a)(l,u.LOGIN_REQUEST,b),Object(n.a)(l,u.LOGIN_SUCCESS,v),Object(n.a)(l,u.LOGIN_FAILURE,p),Object(n.a)(l,u.SIGNUP_REQUEST,E),Object(n.a)(l,u.SIGNUP_SUCCESS,g),Object(n.a)(l,u.SIGNUP_FAILURE,f),Object(n.a)(l,u.CHECK_TOKEN_REQUEST,T),Object(n.a)(l,u.CHECK_TOKEN_FAIL,O),Object(n.a)(l,u.CHECK_TOKEN_SUCCESS,C),Object(n.a)(l,u.LOGOUT_REQUEST,_),Object(n.a)(l,u.LOGOUT_SUCCESS,y),Object(n.a)(l,u.LOGOUT_FAILURE,k),Object(n.a)(l,u.TOGGLE_MODAL,S),Object(n.a)(l,u.RESET_AUTH_ERRORS,N),Object(n.a)(l,u.CHECK_AUTH_SUCCESS,j),l))},385:function(e,t,a){"use strict";a.r(t);var l=a(10),n=a(0),c=a.n(n),s=a(16),r=a.n(s),o=a(106),u=a(29),m=a(41),i=a(26),d=a(185),h=a(194),b=a(36),v=a.n(b),p=a(28),E=a(13),g=a.n(E),f="".concat("http://35.222.169.29","/api"),_={JWT_AUTH:"".concat(f,"/jwt/api-token-auth/"),JWT_CHECK_TOKEN:"".concat(f,"/jwt/api-token-verify/"),RAMSHIK_SHIFT_CREATE_DATA:"".concat(f,"/ramshik/shifts/create/init_data/"),RAMSHIK_SHIFT_CREATE:"".concat(f,"/ramshik/shifts/create/"),RAMSHIK_SHIFT_LIST:"".concat(f,"/ramshik/shifts/list/"),RAMSHIK_PAYOUTS:"".concat(f,"/ramshik/payouts/"),EMPLOYEE_PAYOUT_INIT_DATA:"".concat(f,"/manager/ramshik_payments/init_data/"),EMPLOYEE_PAYOUT:"".concat(f,"/manager/ramshik_payments/ramshik_payout/"),MANAGER_SHIFT_LIST:"".concat(f,"/manager/shift_list/"),MANAGER_STOCK:"".concat(f,"/manager/stock/"),MANAGER_SALE_LIST:"".concat(f,"/manager/sale_list/"),KLADMAN_SALE_INIT_DATA:"".concat(f,"/kladman/sales/create/init_data/"),KLADMAN_SALE_INIT_DATA_CHINA:"".concat(f,"/kladman/sales/create/init_data_china/"),KLADMAN_SALE_CREATE:"".concat(f,"/kladman/sales/create/"),KLADMAN_SALE_SCHEMA1_CREATE:"".concat(f,"/kladman/sales/create_schema1/"),KLADMAN_SALE_CHINA_CREATE:"".concat(f,"/kladman/sales/create_china/"),KLADMAN_SALE_CALC_DATA:"".concat(f,"/kladman/sales/calc_data/")},y=function(){return{logIn:function(e){var t=e.username,a=e.password;return g.a.post(_.JWT_AUTH,{username:t,password:a}).then((function(e){if(e.status<200||e.status>=300)throw new Error(e);return{token:e.data.token,user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])})).then((function(e){return localStorage.setItem("token",e.token),e.user}))},checkToken:function(e){return g.a.post(_.JWT_CHECK_TOKEN,{token:e}).then((function(e){return{user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])}))},logOut:function(){localStorage.removeItem("token")},signUp:function(e){var t=e.email,a=e.phone;return g.a.post(_.SIGNUP,{email:t,phone:a}).then((function(e){return e.data})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]])}))},checkAuth:function(e){var t=localStorage.getItem("token");if(!t)throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return g.a.post(_.JWT_CHECK_TOKEN,{token:t}).then((function(t){var a=t.data.user,l=a.group;if(-1===e.indexOf(l))throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return a})).catch((function(e){throw new Error(e.message)}))}}},k=a(24),N=v.a.mark(C),S=v.a.mark(O),T=v.a.mark(j);function C(e,t){var a,l;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.data,n.next=3,Object(p.c)(k.default.resetAuthErrors());case 3:return n.prev=3,n.next=6,Object(p.b)(e.logIn,a);case 6:return l=n.sent,n.next=9,Object(p.c)(k.default.loginSuccess(l));case 9:return n.next=11,Object(p.c)(k.default.toggleModal(!1));case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(3),n.next=17,Object(p.c)(k.default.loginFailure(n.t0.message));case 17:case"end":return n.stop()}}),N,null,[[3,13]])}function O(e,t){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.b)(e.logOut);case 3:return t.next=5,Object(p.c)(k.default.logoutSuccess());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(p.c)(k.default.logoutFailure(t.t0.message));case 11:case"end":return t.stop()}}),S,null,[[0,7]])}function j(e,t){var a,l;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.payload,n.prev=1,n.next=4,Object(p.b)(e.checkToken,a);case 4:return l=n.sent,n.next=7,Object(p.c)(k.default.checkTokenSuccess(l));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Object(p.c)(k.default.checkTokenFail(n.t0.message));case 13:case"end":return n.stop()}}),T,null,[[1,9]])}var w=v.a.mark(R),x=y();function R(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([Object(p.d)(k.AuthTypes.LOGIN_REQUEST,C,x),Object(p.d)(k.AuthTypes.LOGOUT_REQUEST,O,x),Object(p.d)(k.AuthTypes.CHECK_TOKEN_REQUEST,j,x)]);case 2:case"end":return e.stop()}}),w)}var L=a(436),F=Object(i.combineReducers)({auth:a(24).reducer,form:L.a}),D=a(192),I=a(17),A=a(18),V=a(3),q=a(20),M=a(19),Q=a(429),K=a(78),B=a(433),H=a(432),U=a(428),J=a(389),W=a(390),P=a(392),G=(a(386),a(437),function(e){var t=e.label,a=e.placeholder,l=e.input,n=e.multiline,s=e.meta,r=s.touched,o=s.invalid,u=s.error,m=e.labelClass,i=Object(K.a)(e,["label","placeholder","input","multiline","meta","labelClass"]);return c.a.createElement(U.a,Object.assign({fullWidth:!0,label:t,placeholder:a,error:r&&o,helperText:r&&u},l,i,{multiline:n,InputLabelProps:{className:m}}))});function z(e){var t=e.parentSubmit,a=e.pristine,l=(e.reset,e.submitting),n=e.handleSubmit;e.eventFetching,e.eventError,e.message;return c.a.createElement("div",{className:"card card-style"},c.a.createElement("div",{className:"content"},c.a.createElement("form",{onSubmit:n(t),className:""},c.a.createElement(B.a,{component:G,label:"\u041b\u043e\u0433\u0438\u043d",name:"username",margin:"dense"}),c.a.createElement(B.a,{component:G,label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",margin:"dense",type:"password"}),c.a.createElement("button",{className:"btn btn-m mt-2 font-900 shadow-s bg-highlight text-wrap",type:"submit",disabled:a||l},"\u0412\u043e\u0439\u0442\u0438"))))}function Y(e){var t=Object(u.f)();return c.a.createElement("div",{className:"card-style mx-0 my-1 pt-2",onClick:function(){t.push(e.to)},style:{background:"white",color:"white","font-weight":"bold","font-size":"1.5em","text-align":"center","word-break":"break-word","border-radius":"15px","line-height":"12px"}},c.a.createElement("p",null,e.title))}function X(e){var t=e.user;e.logout;return t.is_ramshik?c.a.createElement("div",{className:" "},t.is_senior_ramshik&&c.a.createElement(Y,{title:"\u0421\u0434\u0430\u0442\u044c \u0441\u043c\u0435\u043d\u0443",to:"/ramshik/shift/create_shift/"}),c.a.createElement(Y,{title:"\u0411\u0430\u043b\u0430\u043d\u0441 \u0438 \u0440\u0430\u0441\u0447\u0435\u0442\u044b",to:"/ramshik/payouts/"})):t.is_manager?c.a.createElement("div",{className:" "},c.a.createElement(Y,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/manager/sale_list/"}),c.a.createElement(Y,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443",to:"/manager/sales/create_sale/"}),c.a.createElement(Y,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0445\u0435\u043c\u04301 \u043f\u0440\u043e\u0434\u0430\u0436\u0443",to:"/manager/sales/create_sale_schema1/"}),c.a.createElement(Y,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443 \u043f\u0435\u0440\u0435\u043a\u0443\u043f",to:"/manager/sales/create_sale_perekup/"}),c.a.createElement(Y,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443 \u041a\u0438\u0442\u0430\u0439",to:"/manager/sales/create_sale_china/"}),c.a.createElement(Y,{title:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430",to:"/manager/sales/calc/"})):t.is_kladman&&c.a.createElement("div",{className:" "},c.a.createElement(Y,{title:"\u0421\u043a\u043b\u0430\u0434. \u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043e\u0441\u0442\u0430\u0442\u043a\u0438",to:"/kladman/stock/"}),c.a.createElement(Y,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443",to:"/kladman/sales/create_sale/"}),c.a.createElement(Y,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/kladman/sale_list/"}),c.a.createElement(Y,{title:"\u0421\u043c\u0435\u043d\u044b \u0441\u043f\u0438\u0441\u043e\u043a",to:"/kladman/shift_list/"}))}z=Object(H.a)({form:"loginForm",validate:function(e){var t={};return["username","password"].forEach((function(a){e[a]||(t[a]="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")})),t}})(z);var Z=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={username:"",password:""},l.login=l.login.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){}},{key:"login",value:function(){this.props.login(this.props.form.values)}},{key:"render",value:function(){var e=this.props.state.auth,t=e.isLoggedIn,a=e.fetching,l=e.user;return a?c.a.createElement(Q.a,null):t?c.a.createElement(X,{user:l,logout:this.props.logout}):c.a.createElement(z,{parentSubmit:this.login})}}]),a}(n.Component),$=Object(m.b)((function(e){return{routing:e.routing,state:e,form:e.form.loginForm}}),(function(e){return{login:function(t){return e(k.default.loginRequest(t))},logout:function(t){return e(k.default.logoutRequest(t))},checkToken:function(t){return e(k.default.checkTokenRequest(t))}}}))(Z);function ee(e){var t=Object(u.f)();return c.a.createElement("div",{className:"d-flex justify-content-between align-items-baseline px-3 py-2"},c.a.createElement("h4",{onClick:function(){t.push("/")}},"\u0420\u0430\u043c\u0430"),c.a.createElement("button",{className:"btn btn-sx bg-red1-light",onClick:function(){e.logout(),t.push("/")}},"\u0432\u044b\u0439\u0442\u0438"))}var te=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={modalOpen:!1},l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.checkToken(e)}},{key:"render",value:function(){var e=this.props.auth;e.isLoggedIn,e.fetching;return e.user?c.a.createElement("div",{className:"header"},c.a.createElement(ee,{logout:this.props.logout})):"net login"}}]),a}(n.Component),ae=Object(m.b)((function(e){return{state:e,auth:e.auth,routing:e.routing}}),(function(e){return{checkToken:function(t){return e(k.default.checkTokenRequest(t))},logout:function(){return e(k.default.logoutRequest())}}}))(te),le=a(8);function ne(e){var t=e.lastOperations;return c.a.createElement("div",{className:"card card-style mt-0"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),t.length>0?c.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"16px"}},c.a.createElement("thead",{className:""},c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),c.a.createElement("th",null,"\u0422\u0438\u043f"),c.a.createElement("th",null,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",{className:"text-nowrap"},e.created_at),c.a.createElement("td",null,"withdraw_employee"===e.record_type?"\u041e\u0431\u043d\u0430\u043b \u0440\u0430\u043c\u0449\u0438\u043a\u0443":"\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u043c\u0449\u0438\u043a\u0443 \u0441\u043e \u0441\u043c\u0435\u043d\u044b"),c.a.createElement("td",null,e.employee),c.a.createElement("td",{className:"withdraw_employee"===e.record_type?"color-red1-light font-16":"color-green1-light font-16"},"withdraw_employee"===e.record_type?"-"+e.amount:"+"+e.amount))})))):c.a.createElement("div",null,"\u041d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438")))}var ce=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={employees:[],activeEmployee:null,amount:0,last_payouts:[],message:null,error:null},l.payout=l.payout.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get(_.EMPLOYEE_PAYOUT_INIT_DATA).then((function(t){var a=t.data;e.setState(Object(le.a)(Object(le.a)({},e.state),{},{employees:a.employees,last_payouts:a.last_payouts}))}))}},{key:"payout",value:function(){var e=this,t=this.state,a=t.activeEmployee,l=t.amount,n=localStorage.getItem("token"),c=new FormData;c.append("employee",a.id),c.append("amount",l),g()({method:"post",url:_.EMPLOYEE_PAYOUT,data:c,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(n)}}).then((function(t){e.setState(Object(le.a)(Object(le.a)({},e.state),{},{message:t.data.message,employees:t.data.employees,activeEmployee:null,last_payouts:t.data.last_payouts}))})).catch((function(t){var a=new Error(t);throw a.data=function(e){if(e&&"undefined"!==typeof e.response){var t={status:e.response.status,statusText:e.response.statusText,message:null,response:e.response};if("message"in e.response.data)t.message=JSON.stringify(e.response.data.message);else{var a="";for(var l in e.response.data)a+="".concat(l,": ").concat(e.response.data[l],". ");t.message=a}return t}return{status:"Connection Error",statusText:"An error occurred while sending your data!",message:"An error occurred while sending your data!"}}(t),e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"}),a}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.employees,l=t.activeEmployee,n=t.amount,s=t.message,r=t.last_payouts;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u043c\u0449\u0438\u043a\u043e\u0432"),c.a.createElement("div",{className:"d-flex justify-content-start"},a.length>0&&c.a.createElement("table",{className:"table table-sm table-responsive w-75 mr-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0440\u0430\u043c\u0449\u0438\u043a"),c.a.createElement("th",null,"\u0431\u0430\u043b\u0430\u043d\u0441")),c.a.createElement("tbody",null,a.map((function(t){return c.a.createElement("tr",{className:l&&l.id===t.id&&"bg-green1-light",onClick:function(){return e.setState(Object(le.a)(Object(le.a)({},e.state),{},{activeEmployee:t,message:null}))}},c.a.createElement("td",null,t.nickname),c.a.createElement("td",null,t.cash," \u0440"))})))),l&&c.a.createElement("div",null,c.a.createElement("span",{className:"font-16 mr-3"},l.nickname),c.a.createElement("span",{className:"font-16 font-600"},l.cash," \u0440"),c.a.createElement(U.a,{type:"number",className:"my-1",value:n,onChange:function(t){return e.setState(Object(le.a)(Object(le.a)({},e.state),{},{amount:t.target.value}))}}),c.a.createElement("button",{className:"d-block btn btn-m bg-green2-light mt-2",onClick:this.payout},"\u0412\u044b\u0434\u0430\u0442\u044c")),s&&c.a.createElement("p",{className:"color-dark text-center"},s)))),c.a.createElement(ne,{lastOperations:r}))}}]),a}(n.Component);function se(e){return c.a.createElement("table",{className:"table table-sm table-responsive"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044c\u0435\u043c"),c.a.createElement("th",null,"\u0420\u0430\u043c\u0449\u0438\u043a\u0438"),c.a.createElement("th",null,"\u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u043e\u0431\u0449/\u043d\u0430 \u0447\u0435\u043b\u0430")),c.a.createElement("tbody",null,e.shiftList.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.date),c.a.createElement("td",null,e.lumber_records.map((function(e){return c.a.createElement("span",{className:"d-block mb-2",style:{lineHeight:"16px"}},c.a.createElement("span",{className:"mr-1 d-block"},e.lumber),c.a.createElement("span",{className:"mr-1"},e.quantity,"\u0448\u0442"),c.a.createElement("span",{className:"mr-1"},e.volume,"\u043c3"),c.a.createElement("span",{className:""},e.rate,"\u0440"))}))),c.a.createElement("td",null,e.volume,"\u043c3"),c.a.createElement("td",null,e.employees.length>0&&e.employees.map((function(e){return c.a.createElement("span",{className:"d-block"},e)}))),c.a.createElement("td",null,c.a.createElement("span",{className:"d-block"},e.employee_cash.toFixed(0),"\u0440 "),c.a.createElement("span",null," ",e.cash_per_employee.toFixed(0),"\u0440")))}))))}var re=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={shiftList:[],message:null,error:null},l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_SHIFT_LIST,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState(Object(le.a)(Object(le.a)({},e.state),{},{shiftList:t.data.results}))}))}},{key:"render",value:function(){var e=this.state.shiftList;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u0421\u043c\u0435\u043d\u044b (",e.length,")"),e.length>0?c.a.createElement(se,{shiftList:e}):c.a.createElement("h5",null,"\u041d\u0435\u0442 \u0441\u043c\u0435\u043d"))))}}]),a}(n.Component),oe=a(430),ue=a(31),me=a(141),ie=a.n(me),de=function(e,t){return ie.a.xor(e,[t])},he=function(e,t){var a=null;return e.map((function(e){e.id==t&&(a=e)})),a},be=function(e,t){for(var a=!1,l=-1,n=0;n<e.length;n++)if(e[n].id===t.id){a=!0,l=n;break}return a?(e.splice(l,1),e):[].concat(Object(ue.a)(e),[t])};function ve(e,t){var a=he(e,t.id),l=e.indexOf(a);return e=[].concat(Object(ue.a)(e.slice(0,l)),[t],Object(ue.a)(e.slice(l+1)))}function pe(e){var t=e.lumber,a=e.showNull,l=e.changeMarketCost,n=!0;0!=t.current_stock_quantity||a||(n=!1);var s="pine"===t.wood_species?"\u0441\u043e\u0441\u043d\u0430":"\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430",r="\u0441\u043e\u0441\u043d\u0430"===s?"color-green1-light":"color-brown1-light";return n&&c.a.createElement("tr",null,c.a.createElement("td",null,t.name,c.a.createElement("span",{className:"d-block font-italic font-500 "+r},s)),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.current_stock_volume.toFixed(3)),c.a.createElement("span",{className:"d-block"},"\u043c3")),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.current_stock_quantity),"\u0448\u0442"),c.a.createElement("td",null,c.a.createElement(U.a,{type:"number",className:"",value:t.market_cost>0&&t.market_cost,onChange:function(e){return l(e,t.id)}})),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16"},t.stock_total_cash.toFixed(0)),"\u0440"))}var Ee=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={lumbers:[],showNull:!1,message:null,error:null},l.changeMarketCost=l.changeMarketCost.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_STOCK,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState({lumbers:t.data.results})}))}},{key:"changeMarketCost",value:function(e,t){var a=this.state.lumbers,l=he(a,t);l.market_cost=parseInt(e.target.value)||0,l.stock_total_cash=l.market_cost*l.current_stock_volume,a=ve(a,l),this.setState({lumbers:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,l=t.showNull,n=0,s=0;return a.map((function(e){n+=e.current_stock_volume,s+=e.stock_total_cash})),c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("h4",{className:"mb-2"},"\u0421\u043a\u043b\u0430\u0434"),c.a.createElement("div",{className:"my-0"},c.a.createElement("label",null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0443\u043b\u0435\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"),c.a.createElement(oe.a,{checked:this.state.showNull,onChange:function(){return e.setState({showNull:!e.state.showNull})},name:"showNull"}))),c.a.createElement("div",{className:"d-flex justify-content-start"},a.length>0&&c.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"17px"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u043f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0442\u043e\u0438\u043c\u043ec\u0442\u044c \u043e\u0431\u0449\u0430\u044f")),c.a.createElement("tbody",null,a.map((function(t){return c.a.createElement(pe,{lumber:t,showNull:l,changeMarketCost:e.changeMarketCost})})),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},"\u0418\u0442\u043e\u0433\u043e")),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},n.toFixed(3)),c.a.createElement("span",{className:"d-block"},"\u043c3")),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,c.a.createElement("span",{className:"font-16 font-500"},s.toFixed(0)),c.a.createElement("span",{className:"d-block"},"\u0440\u0443\u0431\u043b\u0435\u0439")))))))))}}]),a}(n.Component);function ge(e){var t=e.lumbers;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0441\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.lumber),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume," \u043c3"),c.a.createElement("td",null,e.rate||e.employee_rate," \u0440\u0443\u0431"),c.a.createElement("td",null,(e.total_cash||e.cash).toFixed(0)," \u0440\u0443\u0431"))}))))}function fe(e){var t=e.shift,a=e.saveData,l=e.back,n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:n},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443: ",t.employee_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430: ",t.cash_per_employee.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(ge,{lumbers:t.raw_records}),t.employeesData&&t.employeesData.length>0&&c.a.createElement("div",null,c.a.createElement("h5",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b?"),t.employeesData.map((function(e){return c.a.createElement("p",{className:"mb-0"},e.nickname)})))),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:l,className:"btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function _e(e){var t=e.shift,a=e.message,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style my-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0421\u043c\u0435\u043d\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(2),"  (",t.back_calc_volume.toFixed(2),") \u043c3"),c.a.createElement("p",{className:l},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u0440\u0430\u0431\u043e\u0442\u0443: ",t.employee_cash.toFixed(1)," (",t.back_calc_cash.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430: ",t.cash_per_employee.toFixed(1),"(",t.back_calc_cash_per_employee.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(ge,{lumbers:t.lumber_records}),t.employees&&t.employees.length>0&&c.a.createElement("div",null,c.a.createElement("h5",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b?"),t.employees.map((function(e){return c.a.createElement("p",{className:"mb-0"},e)})))),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function ye(e){var t=e.totalCash,a=e.employees,l=e.activeEmployees,n=e.addEmployee;return c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041a\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u043b? ",l.length>0&&"("+l.length+")"),c.a.createElement("div",{className:"d-flex justify-content-between my-2"},a.map((function(e){return c.a.createElement("div",{className:l.includes(e)?"bg-green2-light rounded-xs px-2 py-2 ":"bg-dark1-dark rounded-xs px-2 py-2 ",onClick:function(){return n(e)}},e.nickname)}))),l.length>0&&c.a.createElement("div",null,c.a.createElement("div",{className:"d-flex justify-content-start"},l.map((function(e){return c.a.createElement("div",{className:"mx-2"},c.a.createElement("span",{className:"d-block font-16"},e.nickname),t>0&&c.a.createElement("span",{className:"font-17 font-600"}," ",(t/l.length).toFixed(0)," \u0440\u0443\u0431"))})))))}var ke=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={lumbers:[],initLumbers:[],totalVolume:0,totaCash:0,createdShift:null,employees:[],activeEmployees:[],dataToSave:null,message:null,error:null},l.calcRow=l.calcRow.bind(Object(V.a)(l)),l.calcRowAndTotal=l.calcRowAndTotal.bind(Object(V.a)(l)),l.calcTotalVolume=l.calcTotalVolume.bind(Object(V.a)(l)),l.calcTotalCash=l.calcTotalCash.bind(Object(V.a)(l)),l.addEmployee=l.addEmployee.bind(Object(V.a)(l)),l.saveData=l.saveData.bind(Object(V.a)(l)),l.preSave=l.preSave.bind(Object(V.a)(l)),l.back=l.back.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get(_.RAMSHIK_SHIFT_CREATE_DATA).then((function(t){var a=t.data;e.setState({lumbers:a.lumbers,initLumbers:a.lumbers,employees:a.employees})}))}},{key:"calcRow",value:function(e,t,a){var l=e.employee_rate;return a&&600==e.employee_rate&&(l=650),a||650!=e.employee_rate||(l=600),a||600!=e.employee_rate||(l=e.employee_rate),Object(le.a)(Object(le.a)({},e),{},{lumber:e.id,quantity:t,volume_total:t*e.volume,cash:t*e.volume*l,employee_rate:l})}},{key:"calcTotalVolume",value:function(e){var t=0;return e.map((function(e){t+=e.volume_total})),t}},{key:"calcTotalCash",value:function(e){var t=0;return e.map((function(e){t+=e.cash})),t}},{key:"calcRowAndTotal",value:function(e,t){var a=this,l=this.state.lumbers,n=this.calcRow(t,e.target.value,!1);l=ve(l,n);var c=this.calcTotalVolume(l);c>=10?(l.map((function(e,t){l[t]=a.calcRow(e,e.quantity,!0)})),c=this.calcTotalVolume(l)):(l.map((function(e,t){l[t]=a.calcRow(e,e.quantity,!1)})),c=this.calcTotalVolume(l));var s=this.calcTotalCash(l);this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbers:l,totalVolume:c,totalCash:s,message:null}))}},{key:"addEmployee",value:function(e){var t=this.state.activeEmployees;t=be(t,e),this.setState(Object(le.a)(Object(le.a)({},this.state),{},{activeEmployees:t}))}},{key:"preSave",value:function(){var e=this.state,t=e.lumbers,a=e.totalCash,l=e.totalVolume,n=e.activeEmployees,c=[];n.map((function(e){return c=de(c,e.id)}));var s=[];t.map((function(e){e.cash>0&&e.quantity>0&&(s=de(s,e))}));var r={shift_type:"day",date:null,raw_records:s,employees:c,employee_cash:a,volume:l,employeesData:n,cash_per_employee:a/c.length};this.setState(Object(le.a)(Object(le.a)({},this.state),{},{dataToSave:r}))}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.RAMSHIK_SHIFT_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b.",createdShift:t.data})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState(Object(le.a)(Object(le.a)({},this.state),{},{activeEmployees:[],lumbers:this.state.initLumbers,totalVolume:0,totalCash:0,note:"",dataToSave:null}))}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,l=t.totalVolume,n=t.totalCash,s=t.employees,r=t.activeEmployees,o=t.message,u=t.createdShift,m=t.dataToSave;return c.a.createElement("div",null,u?c.a.createElement(_e,{shift:u,message:o}):m?c.a.createElement(fe,{shift:m,saveData:this.saveData,back:this.back}):c.a.createElement("div",null,c.a.createElement("div",{className:"card card-style mb-1 mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h2",null,"\u0421\u043c\u0435\u043d\u0430"),a.length>0&&c.a.createElement("table",{className:"table table-sm table-responsive text-center",style:{lineHeight:"17px",color:"#6c6c6c"}},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0418\u0437\u0434\u0435\u043b\u0438\u0435"),c.a.createElement("th",null,"\u041a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u041e\u0431\u044c\u0435\u043c"),c.a.createElement("th",null,"\u0421\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,a.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,t.name," ",t.wood_species),c.a.createElement("td",{className:"w-25"},c.a.createElement("input",{style:{color:"#6c6c6c"},type:"number",className:"w-75",onChange:function(a){return e.calcRowAndTotal(a,t)},value:t.quantity>0&&t.quantity})),c.a.createElement("td",null,t.volume_total>0&&t.volume_total.toFixed(4)+" \u043c3"),c.a.createElement("td",null,t.employee_rate," \u0440\u0443\u0431"),c.a.createElement("td",null,t.cash>0&&t.cash.toFixed(0)+" \u0440\u0443\u0431"))})),c.a.createElement("tr",null,c.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),c.a.createElement("td",{className:"w-25"},"-"),c.a.createElement("td",null,c.a.createElement("span",{className:"font-17 font-600"},l>0&&l.toFixed(4)+" \u043c3")),c.a.createElement("td",null,"-"),c.a.createElement("td",null,c.a.createElement("span",{className:"font-17 font-600"},n>0&&n.toFixed(0)+" \u0440\u0443\u0431"))))))),c.a.createElement("div",{className:"card card-style mb-3"},c.a.createElement(ye,{totalCash:n,employees:s,activeEmployees:r,addEmployee:this.addEmployee})),r.length>0&&n>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0414\u0430\u043b\u0435\u0435")))}}]),a}(n.Component),Ne=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={shiftList:[],message:null,error:null},l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");0===this.state.shiftList.length&&g()({method:"get",url:_.RAMSHIK_SHIFT_LIST,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState(Object(le.a)(Object(le.a)({},e.state),{},{shiftList:t.data.results}))}))}},{key:"render",value:function(){var e=this.state.shiftList;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u0421\u043c\u0435\u043d\u044b  (",e.length,")"),e.length>0?c.a.createElement(se,{shiftList:e}):c.a.createElement("h5",null,"\u041d\u0435\u0442 \u0441\u043c\u0435\u043d"))))}}]),a}(n.Component),Se=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={last_payouts:[],ramshik:null,message:null,error:null},l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.RAMSHIK_PAYOUTS,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState(Object(le.a)(Object(le.a)({},e.state),{},{ramshik:a.ramshik,last_payouts:a.last_payouts}))}))}},{key:"render",value:function(){var e=this.state,t=e.ramshik,a=(e.message,e.last_payouts);return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441 ",t&&t.cash+" \u0440\u0443\u0431"))),c.a.createElement(ne,{lastOperations:a}))}}]),a}(n.Component),Te=a(193);function Ce(e){var t=e.lumber_records;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.lumber),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume," \u043c3"),c.a.createElement("td",null,e.rate||e.market_cost," \u0440\u0443\u0431"),c.a.createElement("td",null,e.total_cash||e.cash," \u0440\u0443\u0431"))}))))}function Oe(e){var t=e.sale,a=e.saveData,l=e.back;console.log(t);var n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:n},"\u0421\u0443\u043c\u043c\u0430: ",t.cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ce,{lumber_records:t.raw_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:l,className:"btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function je(e){var t=e.sale,a=e.message,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4),"  (",t.back_calc_volume,") \u043c3"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430: ",t.cash.toFixed(1)," (",t.back_calc_cash.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ce,{lumber_records:t.lumber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function we(e){var t=Object(n.useState)(!1),a=Object(Te.a)(t,2),l=a[0],s=a[1],r=e.note,o=e.setNote;return c.a.createElement("div",null,c.a.createElement("p",{className:"my-2 btn btn-sm bg-teal-light",onClick:function(){return s(!l)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),l&&c.a.createElement(U.a,{type:"textarea",value:r,name:"note",onChange:o,multiline:!0,rowsMax:5,id:"standard",variant:"outlined",className:"d-block"}))}function xe(e){var t=e.lumber,a=e.setLumberID,n=e.calcRowQnty,s=e.calcRowCash,r=e.setRowCash,o=e.pineBrus,u=e.larchBrus,m=e.pineDoska,i=e.larchDoska;return c.a.createElement("div",{className:"mt-2 mb-3"},c.a.createElement(P.a,{htmlFor:"grouped-native-select",className:"font-19 font-600"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",t.id+1),c.a.createElement(W.a,Object(l.a)({native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t.lumber,onChange:function(e){return a(e,t.id)},name:"lumber","data-id":t.id},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430"},o.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0441\u043d\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},i.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),t.lumber>0&&c.a.createElement("div",{className:"mt-3"},c.a.createElement("div",{className:"d-flex"},c.a.createElement(U.a,{className:"mr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0448\u0442\u0443\u043a",onChange:function(e){return n(e,t.id)},type:"number",value:t.quantity>0&&t.quantity}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",onChange:function(e){return s(e,t.id)},type:"number",value:t.rate>0&&t.rate}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0421\u0443\u043c\u043c\u0430 \u0440\u0443\u0431",onChange:function(e){return r(e,t.id)},type:"number",value:t.cash>0&&t.cash})),c.a.createElement("div",{className:"d-flex justify-content-between mt-2"},c.a.createElement("p",{className:"font-16 color-dark mb-0"},"\u041e\u0431\u044a\u0435\u043c:",c.a.createElement("span",{className:"font-500"}," ",t.volume_total+" \u043c3")))),t.lumber>0&&c.a.createElement("div",{className:"divider divider-margins bg-highlight mt-2"}))}function Re(e){var t=e.setAddExpenses,a=e.addExpenses;return c.a.createElement("div",{className:"my-3"},c.a.createElement(U.a,{className:"",id:"outlined-margin-dense",variant:"outlined",label:"\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430",onChange:t,type:"number",value:a>0&&a}))}var Le=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumbers:[],lumbersToSale:[],totalVolume:0,totaCash:0,note:"",addExpenses:0,dataToSave:null,createdSale:null,message:null,error:null},l.setData=l.setData.bind(Object(V.a)(l)),l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.setRowCash=l.setRowCash.bind(Object(V.a)(l)),l.saveData=l.saveData.bind(Object(V.a)(l)),l.setNote=l.setNote.bind(Object(V.a)(l)),l.setAddExpenses=l.setAddExpenses.bind(Object(V.a)(l)),l.preSave=l.preSave.bind(Object(V.a)(l)),l.back=l.back.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get(_.KLADMAN_SALE_INIT_DATA).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,larchBrus:a.larch_brus_lumbers,pineDoska:a.pine_doska_lumbers,larchDoska:a.larch_doska_lumbers,lumbers:a.lumbers})}))}},{key:"setData",value:function(e){this.setState(Object(le.a)(Object(le.a)({},this.state),{},Object(l.a)({},e.target.name,e.target.value)))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.addExpenses,c=he(l,t);c.quantity=e.target.value?parseInt(e.target.value):0,c.volume_total=(c.volume*c.quantity).toFixed(4),c.cash=(c.volume_total*c.rate).toFixed(0),l=ve(l,c);var s=this.calcTotal(l,n),r=s.totalCash,o=s.totalVolume;this.setState({lumbersToSale:l,totalCash:r,totalVolume:o})}},{key:"calcRowCash",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.addExpenses,c=he(l,t);c.rate=e.target.value?parseInt(e.target.value):0,c.cash=(c.volume_total*c.rate).toFixed(0),l=ve(l,c);var s=this.calcTotal(l,n),r=s.totalCash,o=s.totalVolume;this.setState({lumbersToSale:l,totalCash:r,totalVolume:o})}},{key:"setRowCash",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.addExpenses,c=he(l,t);c.cash=e.target.value?parseInt(e.target.value):0,l=ve(l,c);var s=this.calcTotal(l,n),r=s.totalCash,o=s.totalVolume;this.setState({lumbersToSale:l,totalCash:r,totalVolume:o})}},{key:"calcTotal",value:function(e,t){var a=0,l=0;return e.map((function(e){a+=parseInt(e.cash),l+=parseFloat(e.volume_total)})),{totalCash:(a+=parseFloat(t)).toFixed(0),totalVolume:l.toFixed(4)}}},{key:"setNote",value:function(e){this.setState({note:e.target.value})}},{key:"setAddExpenses",value:function(e){var t=this.state.lumbersToSale,a=e.target.value?parseInt(e.target.value):0,l=this.calcTotal(t,a),n=l.totalCash,c=l.totalVolume;this.setState({addExpenses:a,totalCash:n,totalVolume:c})}},{key:"preSave",value:function(){var e=this.state,t=e.lumbersToSale,a=e.totalCash,l=e.totalVolume,n=e.addExpenses,c=e.note,s=[];t.map((function(e){e.cash>0&&e.quantity>0&&(s=de(s,e))}));var r={raw_records:s,date:null,cash:parseFloat(a),volume:parseFloat(l),note:c,add_expenses:n};this.setState({dataToSave:r})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.KLADMAN_SALE_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdSale:t.data.sale})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState({dataToSave:null,lumbersToSale:[],totalVolume:0,totaCash:0,note:"",addExpenses:0})}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.createdSale,n=t.totalCash,s=t.totalVolume,r=t.note,o=t.addExpenses,u=t.dataToSave,m=t.message;return c.a.createElement("div",null,l?c.a.createElement(je,{sale:l,message:m}):u?c.a.createElement(Oe,{sale:u,saveData:this.saveData,back:this.back}):c.a.createElement("div",{className:"card card-style mb-1 mt-2 mx-1"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"d-flex justify-content-between mb-2 text-center"},c.a.createElement("h2",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"),c.a.createElement("button",{className:"btn btn-sm bg-teal-light",onClick:this.clear},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c ")),a.length>0&&a.map((function(t){return t&&c.a.createElement(xe,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,setRowCash:e.setRowCash,pineBrus:e.state.pineBrus,larchBrus:e.state.larchBrus,pineDoska:e.state.pineDoska,larchDoska:e.state.larchDoska})})),c.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"),c.a.createElement(Re,{addExpenses:o,setAddExpenses:this.setAddExpenses}),n>0&&c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",s," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")),c.a.createElement(we,{note:r,setNote:this.setData}),n>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-2"},"\u0414\u0430\u043b\u0435\u0435"))))}}]),a}(n.Component),Fe=a(435),De=a(438);function Ie(e){var t=e.lumber_records;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume_total," \u043c3"),c.a.createElement("td",null,e.selling_price," \u0440\u0443\u0431"),c.a.createElement("td",null,e.selling_total_cash," \u0440\u0443\u0431"))}))))}function Ae(e){var t=e.sale,a=e.saveData,l=e.back,n=e.sellers,s="mb-0 font-15 font-500 color-black",r=null;return n&&(r=he(n,t.seller)),c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:s},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:s},"\u0421\u0443\u043c\u043c\u0430: ",t.sale_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:s},"\u0413\u0440\u0443\u0437\u0447\u0438\u043a: ",t.loader?"\u0434\u0430":"\u043d\u0435\u0442"," "),c.a.createElement("p",{className:s},"\u0411\u043e\u043d\u0443\u0441 \u0441\u043a\u043b\u0430\u0434\u0443: ",t.bonus_kladman?"\u0434\u0430":"\u043d\u0435\u0442"),c.a.createElement("p",{className:s},"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446: ",r?r.nickname:"\u043d\u0435\u0442"),c.a.createElement("p",{className:s},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",t.deliveryFee?t.deliveryFee+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:s},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses?t.add_expenses+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:s},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ie,{lumber_records:t.raw_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:l,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Ve(e){var t=e.sale,a=e.message,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",t.selling_total_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430: ",t.seller_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0430: ",t.loader_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0441\u043a\u043b\u0430\u0434\u0430: ",t.kladman_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: ",t.delivery_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ie,{lumber_records:t.lumber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function qe(e){var t,a=e.note,n=e.setNote;return c.a.createElement(U.a,(t={className:"",type:"textarea",value:a,name:"note",onChange:n,multiline:!0,rowsMax:5,id:"standard",variant:"outlined"},Object(l.a)(t,"className","d-block"),Object(l.a)(t,"label","\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),Object(l.a)(t,"placeholder","\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 \u0438 \u0434\u0440"),t))}function Me(e){var t=e.lumber,a=e.setLumberID,n=e.calcRowQnty,s=e.calcRowCash,r=e.setRowCash,o=e.pineBrus,u=e.larchBrus,m=e.pineDoska,i=(e.larchDoska,e.calcRowRamaCash),d=e.calcRowVolume;e.calcRowCash1Pc;return console.log(t),c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border"},c.a.createElement(P.a,{htmlFor:"grouped-native-select",className:"font-19 font-600 color-black"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",t.id+1),c.a.createElement(W.a,Object(l.a)({native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t.lumber,onChange:function(e){return a(e,t.id)},name:"lumber","data-id":t.id},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430"},o.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0441\u043d\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),t.lumber>0&&c.a.createElement("p",{className:"my-0"},c.a.createElement("span",{className:"mr-2"},"1\u0448\u0442 = ",t.volume," \u043c3"),c.a.createElement("span",{className:"mr-2"},"1\u043c3 = ",t.qnty_in_cube," \u0448\u0442"),c.a.createElement("span",{className:"mr-2"},"2\u043c3 = ",2*t.qnty_in_cube," \u0448\u0442"),c.a.createElement("span",{className:"mr-2"},"3\u043c3 = ",(3*t.qnty_in_cube).toFixed(3)," \u0448\u0442")),t.lumber>0&&c.a.createElement("div",{className:""},c.a.createElement("div",{className:"my-2"},c.a.createElement("h5",null,"\u0420\u0430\u0441\u0447\u0435\u0442 \u0434\u043b\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430:"),c.a.createElement("div",{className:"d-flex justify-content-start "},c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(e){return n(e,t.id)},type:"number",value:t.quantity>0&&t.quantity}),c.a.createElement(U.a,{className:"",id:"outlined-margin-dense",variant:"outlined",label:"\u041e\u0431\u044a\u0435\u043c",onChange:function(e){return d(e,t.id)},type:"number",value:t.selling_volume_total>0&&t.selling_volume_total})),c.a.createElement("div",{className:"d-flex justify-content-start mt-2"},c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",onChange:function(e){return s(e,t.id)},type:"number",value:t.selling_price>0&&t.selling_price}),c.a.createElement(U.a,{className:"",id:"outlined-margin-dense",variant:"outlined",label:"\u0421\u0443\u043c\u043c\u0430",onChange:function(e){return r(e,t.id)},type:"number",value:t.selling_total_cash>0&&t.selling_total_cash}))),c.a.createElement("div",{className:""},c.a.createElement("h5",null,"\u0420\u0430\u0441\u0447\u0435\u0442 \u043e\u043f\u0442\u043e\u0432\u044b\u0439:"),c.a.createElement("div",{className:"d-flex justify-content-start mt-1"},c.a.createElement("p",{className:"font-16 color-dark mb-0 mr-4"},"\u041e\u0431\u044a\u0435\u043c:",c.a.createElement("span",{className:"font-500"}," ",t.volume_total+" \u043c3")),c.a.createElement("p",{className:"font-16 color-dark mb-0"},"\u0421\u0443\u043c\u043c\u0430 \u043e\u043f\u0442\u043e\u0432\u0430\u044f:",c.a.createElement("span",{className:"font-500"}," ",t.rama_total_cash>0&&t.rama_total_cash+" \u0440"))),c.a.createElement(U.a,{className:"",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",onChange:function(e){return i(e,t.id)},type:"number",value:t.rama_price>0&&t.rama_price,defaultValue:t.market_cost}))))}function Qe(e){var t=e.loader,a=e.checkLoader,n=e.seller,s=e.bonusKladman,r=e.sellers;return c.a.createElement("div",{className:"d-flex justify-content-between mb-1 "},c.a.createElement(De.a,{control:c.a.createElement(Fe.a,{checked:t,onChange:a,color:"blue2",name:"loader"}),label:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a"}),c.a.createElement(De.a,{control:c.a.createElement(Fe.a,{checked:s,onChange:a,color:"blue2",name:"bonusKladman"}),label:"\u0421\u043a\u043b\u0430\u0434 \u0431\u043e\u043d\u0443\u0441"}),c.a.createElement(J.a,{className:"pb-4"},c.a.createElement(P.a,null,"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446"),c.a.createElement(W.a,Object(l.a)({native:!0,defaultValue:"",className:"color-dark1-light",value:n,onChange:a,name:"seller"},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),r&&r.length>0&&r.map((function(e){return c.a.createElement("option",{value:e.id},e.nickname," ")})))))}var Ke=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumbers:[],calcLumber:null,lumbersToSale:[],totalVolume:0,totaCash:0,loader:!0,seller:null,bonusKladman:!0,note:"",addExpenses:0,deliveryFee:0,dataToSave:null,createdSale:null,message:null,error:null},l.setData=l.setData.bind(Object(V.a)(l)),l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcRowRamaCash=l.calcRowRamaCash.bind(Object(V.a)(l)),l.calcRowVolume=l.calcRowVolume.bind(Object(V.a)(l)),l.calcRowCash1Pc=l.calcRowCash1Pc.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.setRowCash=l.setRowCash.bind(Object(V.a)(l)),l.saveData=l.saveData.bind(Object(V.a)(l)),l.setNote=l.setNote.bind(Object(V.a)(l)),l.setDeliveryFee=l.setDeliveryFee.bind(Object(V.a)(l)),l.preSave=l.preSave.bind(Object(V.a)(l)),l.back=l.back.bind(Object(V.a)(l)),l.checkLoader=l.checkLoader.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.KLADMAN_SALE_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,larchBrus:a.larch_brus_lumbers,pineDoska:a.pine_doska_lumbers,larchDoska:a.larch_doska_lumbers,lumbers:a.lumbers,sellers:a.sellers,kladmanId:a.kladman_id})}))}},{key:"setData",value:function(e){this.setState(Object(le.a)(Object(le.a)({},this.state),{},Object(l.a)({},e.target.name,e.target.value)))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t,selling_volume_total:0,selling_volume:c.volume})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.volume*l.quantity).toFixed(4),l.selling_volume_total=(l.volume*l.quantity).toFixed(4),l.selling_total_cash=(l.selling_volume_total*l.selling_price).toFixed(0),l.selling_price_1=(l.selling_total_cash/l.quantity).toFixed(0),l.selling_volume=parseFloat(l.volume),l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.selling_volume_total=e.target.value?parseFloat(e.target.value):0,l.selling_total_cash=parseFloat(l.selling_volume_total*l.selling_price).toFixed(0),l.selling_volume=parseFloat(l.selling_volume_total/l.quantity),l.selling_price_1=parseFloat(l.selling_total_cash/l.quantity).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.selling_price=e.target.value?parseInt(e.target.value):0,l.selling_total_cash=(l.selling_volume_total*l.selling_price).toFixed(0),l.selling_price_1=(l.selling_total_cash/l.quantity).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash1Pc",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.selling_price_1=e.target.value?parseInt(e.target.value):0,l.selling_total_cash=(l.selling_price_1*l.quantity).toFixed(0),l.selling_volume_total=(l.volume*l.quantity).toFixed(4),l.selling_volume=parseFloat(l.selling_volume_total/l.quantity),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowRamaCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.rama_price=e.target.value?parseInt(e.target.value):0,l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),a=ve(a,l),this.setState({lumbersToSale:a})}},{key:"setRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.selling_total_cash=e.target.value?parseInt(e.target.value):0,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.selling_total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"setNote",value:function(e){this.setState({note:e.target.value})}},{key:"setDeliveryFee",value:function(e){var t=e.target.value?parseInt(e.target.value):0;this.setState({deliveryFee:t})}},{key:"preSave",value:function(){var e=this.state,t=e.lumbersToSale,a=e.loader,l=e.seller,n=e.bonusKladman,c=e.note,s=e.addExpenses,r=e.deliveryFee,o=e.totalCash,u=e.totalVolume,m=e.kladmanId,i=[];t.map((function(e){e.selling_total_cash>0&&e.quantity>0&&(i=de(i,e))}));var d={raw_records:i,date:null,loader:a,seller:l,bonus_kladman:n?m:null,note:c,add_expenses:s,delivery_fee:r,sale_type:"person",sale_cash:parseFloat(o),volume:parseFloat(u)};this.setState({dataToSave:d})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.KLADMAN_SALE_SCHEMA1_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdSale:t.data.sale})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState({dataToSave:null,lumbersToSale:[],totalVolume:0,totaCash:0,note:"",addExpenses:0})}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"checkLoader",value:function(e){"seller"===e.target.name?this.setState(Object(l.a)({},e.target.name,e.target.value)):this.setState(Object(l.a)({},e.target.name,!this.state[e.target.name]))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.createdSale,n=t.totalCash,s=t.totalVolume,r=t.note,o=(t.addExpenses,t.dataToSave),u=t.message;return c.a.createElement("div",null,l?c.a.createElement(Ve,{sale:l,message:u}):o?c.a.createElement(Ae,{sale:o,saveData:this.saveData,back:this.back,sellers:this.state.sellers}):c.a.createElement("div",{className:"card card-style mb-1 mt-2 mx-1"},c.a.createElement("div",{className:"content mb-0"},c.a.createElement("div",{className:"d-flex justify-content-between mb-2 text-center"},c.a.createElement("h2",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"))),c.a.createElement("div",{className:"content mt-0 mb-0"},a.length>0&&a.map((function(t){return t&&c.a.createElement(Me,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowRamaCash:e.calcRowRamaCash,calcRowVolume:e.calcRowVolume,calcRowCash1Pc:e.calcRowCash1Pc,setRowCash:e.setRowCash,pineBrus:e.state.pineBrus,larchBrus:e.state.larchBrus,pineDoska:e.state.pineDoska,larchDoska:e.state.larchDoska})})),c.a.createElement("button",{className:"mt-1 btn btn-s bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),c.a.createElement("div",{className:"content mt-0 px-2"},c.a.createElement(Qe,{loader:this.state.loader,checkLoader:this.checkLoader,seller:this.state.seller,bonusKladman:this.state.bonusKladman,sellers:this.state.sellers}),c.a.createElement(qe,{note:r,setNote:this.setData}),n>0&&c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",s," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")),n>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-2"},"\u0414\u0430\u043b\u0435\u0435"))))}}]),a}(n.Component);function Be(e){var t=e.lumber_records;return console.log(t),c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume_total," \u043c3"),c.a.createElement("td",null,e.selling_price," \u0440\u0443\u0431"),c.a.createElement("td",null,e.selling_total_cash," \u0440\u0443\u0431"))}))))}function He(e){var t=e.sale,a=e.saveData,l=e.back,n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:n},"\u0421\u0443\u043c\u043c\u0430: ",t.sale_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0413\u0440\u0443\u0437\u0447\u0438\u043a: ",t.loader?"\u0434\u0430":"\u043d\u0435\u0442"," "),c.a.createElement("p",{className:n},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",t.delivery_fee?t.delivery_fee+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:n},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses?t.add_expenses+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Be,{lumber_records:t.raw_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:l,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Ue(e){var t=e.sale,a=e.message,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",t.selling_total_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0430: ",t.loader_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: ",t.delivery_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u0440\u0430\u043c\u044b (\u043d\u0435\u0442\u0442\u043e): ",t.net_rama_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Be,{lumber_records:t.lumber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function Je(e){var t,a=e.note,n=e.setNote;return c.a.createElement("div",{className:"ml-3 pt-1"},c.a.createElement(U.a,(t={className:"",type:"textarea",value:a,name:"note",onChange:n,multiline:!0,rowsMax:5,id:"standard",variant:"outlined"},Object(l.a)(t,"className","d-block"),Object(l.a)(t,"label","\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),Object(l.a)(t,"placeholder","\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 \u0438 \u0434\u0440"),t)))}function We(e){var t=e.lumber,a=e.setLumberID,n=e.calcRowQnty,s=e.calcRowCash,r=e.setRowCash,o=e.pineBrus,u=e.larchBrus,m=e.pineDoska;e.larchDoska;return c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border"},c.a.createElement(P.a,{htmlFor:"grouped-native-select",className:"font-19 font-600"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",t.id+1),c.a.createElement(W.a,Object(l.a)({native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t.lumber,onChange:function(e){return a(e,t.id)},name:"lumber","data-id":t.id},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430"},o.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0441\u043d\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),t.lumber>0&&c.a.createElement("div",{className:"mt-3"},c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement(U.a,{className:"mr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(e){return n(e,t.id)},type:"number",value:t.quantity>0&&t.quantity}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",onChange:function(e){return s(e,t.id)},type:"number",value:t.rama_price>0&&t.rama_price}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0421\u0443\u043c\u043c\u0430",onChange:function(e){return r(e,t.id)},type:"number",value:t.rama_total_cash>0&&t.rama_total_cash})),c.a.createElement("div",{className:"d-flex mt-3 justify-content-between align-content-around"},c.a.createElement("p",{className:"font-16 color-dark mb-0 mr-4"},"\u041e\u0431\u044a\u0435\u043c:",c.a.createElement("span",{className:"font-500 d-block"}," ",t.volume_total+" \u043c3")))))}function Pe(e){var t=e.setDeliveryFee,a=e.deliveryFee;return c.a.createElement("div",{className:"my-1"},c.a.createElement(U.a,{className:"",id:"outlined-margin-dense",variant:"outlined",label:"\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430",onChange:t,type:"number",value:a>0&&a}))}function Ge(e){var t=e.loader,a=e.checkLoader;e.seller,e.bonusKladman,e.sellers;return c.a.createElement(De.a,{control:c.a.createElement(Fe.a,{checked:t,onChange:a,color:"blue2",name:"loader"}),label:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a"})}var ze=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumbers:[],lumbersToSale:[],totalVolume:0,totaCash:0,loader:!0,seller:null,bonusKladman:!1,note:"",addExpenses:0,deliveryFee:0,dataToSave:null,createdSale:null,message:null,error:null},l.setData=l.setData.bind(Object(V.a)(l)),l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.setRowCash=l.setRowCash.bind(Object(V.a)(l)),l.saveData=l.saveData.bind(Object(V.a)(l)),l.setNote=l.setNote.bind(Object(V.a)(l)),l.setDeliveryFee=l.setDeliveryFee.bind(Object(V.a)(l)),l.preSave=l.preSave.bind(Object(V.a)(l)),l.back=l.back.bind(Object(V.a)(l)),l.checkLoader=l.checkLoader.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.KLADMAN_SALE_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,larchBrus:a.larch_brus_lumbers,pineDoska:a.pine_doska_lumbers,larchDoska:a.larch_doska_lumbers,lumbers:a.lumbers,sellers:a.sellers,kladmanId:a.kladman_id})}))}},{key:"setData",value:function(e){this.setState(Object(le.a)(Object(le.a)({},this.state),{},Object(l.a)({},e.target.name,e.target.value)))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.selling_price=l.rama_price,l.volume_total=(l.volume*l.quantity).toFixed(4),l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.rama_price=e.target.value?parseInt(e.target.value):0,l.selling_price=l.rama_price,l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"setRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.rama_total_cash=e.target.value?parseInt(e.target.value):0,l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.rama_total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"setNote",value:function(e){this.setState({note:e.target.value})}},{key:"setDeliveryFee",value:function(e){var t=e.target.value?parseInt(e.target.value):0;this.setState({deliveryFee:t})}},{key:"preSave",value:function(){var e=this.state,t=e.lumbersToSale,a=e.loader,l=e.seller,n=(e.bonusKladman,e.note),c=e.addExpenses,s=e.deliveryFee,r=e.totalCash,o=e.totalVolume,u=(e.kladmanId,[]);t.map((function(e){e.rama_total_cash>0&&e.quantity>0&&(u=de(u,e))}));var m={raw_records:u,date:null,loader:a,seller:l,bonus_kladman:null,note:n,add_expenses:c,delivery_fee:s,sale_type:"perekup",sale_cash:parseFloat(r),volume:parseFloat(o)};this.setState({dataToSave:m})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.KLADMAN_SALE_SCHEMA1_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdSale:t.data.sale})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState({dataToSave:null,lumbersToSale:[],totalVolume:0,totaCash:0,note:"",addExpenses:0})}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"checkLoader",value:function(e){"seller"===e.target.name?this.setState(Object(l.a)({},e.target.name,e.target.value)):this.setState(Object(l.a)({},e.target.name,!this.state[e.target.name]))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.createdSale,n=t.totalCash,s=t.totalVolume,r=t.note,o=(t.addExpenses,t.dataToSave),u=t.message;return c.a.createElement("div",null,l?c.a.createElement(Ue,{sale:l,message:u}):o?c.a.createElement(He,{sale:o,saveData:this.saveData,back:this.back}):c.a.createElement("div",{className:"card card-style mb-1 mt-2 mx-1"},c.a.createElement("div",{className:"content mb-0"},c.a.createElement("div",{className:"d-flex justify-content-between mb-2 text-center"},c.a.createElement("h2",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"))),c.a.createElement("div",{className:"content mt-0 mb-0"},a.length>0&&a.map((function(t){return t&&c.a.createElement(We,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,setRowCash:e.setRowCash,pineBrus:e.state.pineBrus,larchBrus:e.state.larchBrus,pineDoska:e.state.pineDoska,larchDoska:e.state.larchDoska})})),c.a.createElement("button",{className:"mt-1 btn btn-s bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),c.a.createElement("div",{className:"content mt-0"},c.a.createElement(Ge,{loader:this.state.loader,checkLoader:this.checkLoader,seller:this.state.seller,bonusKladman:this.state.bonusKladman,sellers:this.state.sellers}),c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement(Pe,{deliveryFee:this.state.deliveryFee,setDeliveryFee:this.setDeliveryFee}),c.a.createElement(Je,{note:r,setNote:this.setData})),n>0&&c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",s," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")),n>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-2"},"\u0414\u0430\u043b\u0435\u0435"))))}}]),a}(n.Component);function Ye(e){var t=e.lumber_records;return c.a.createElement("table",{className:"table table-sm table-responsive mt-2"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),c.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),c.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),c.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity," \u0448\u0442"),c.a.createElement("td",null,e.volume_total," \u043c3"),c.a.createElement("td",null,e.selling_price," \u0440\u0443\u0431"),c.a.createElement("td",null,e.selling_total_cash," \u0440\u0443\u0431"))}))))}function Xe(e){var t=e.sale,a=e.saveData,l=e.back,n="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:n},"\u0421\u0443\u043c\u043c\u0430: ",t.sale_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:n},"\u0413\u0440\u0443\u0437\u0447\u0438\u043a: ",t.loader?"\u0434\u0430":"\u043d\u0435\u0442"," "),c.a.createElement("p",{className:n},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",t.delivery_fee?t.delivery_fee+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:n},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses?t.add_expenses+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),c.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ye,{lumber_records:t.raw_records})),c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{onClick:l,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),c.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Ze(e){var t=e.sale,a=e.message,l="mb-0 font-15 font-500 color-black";return c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&c.a.createElement("div",{className:""},c.a.createElement("p",{className:l},"\u0414\u0430\u0442\u0430: ",t.date),c.a.createElement("p",{className:l},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",t.selling_total_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0430: ",t.loader_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: ",t.delivery_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b: ",t.add_expenses," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u0421\u0443\u043c\u043c\u0430 \u0440\u0430\u043c\u044b (\u043d\u0435\u0442\u0442\u043e): ",t.net_rama_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("p",{className:l},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),c.a.createElement(Ye,{lumber_records:t.lumber_records})),a&&c.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function $e(e){var t,a=e.note,n=e.setNote;return c.a.createElement("div",{className:"ml-3 pt-1"},c.a.createElement(U.a,(t={className:"",type:"textarea",value:a,name:"note",onChange:n,multiline:!0,rowsMax:5,id:"standard",variant:"outlined"},Object(l.a)(t,"className","d-block"),Object(l.a)(t,"label","\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435"),Object(l.a)(t,"placeholder","\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 \u0438 \u0434\u0440"),t)))}function et(e){var t=e.lumber,a=e.setLumberID,n=e.calcRowQnty,s=e.calcRowCash,r=e.setRowCash,o=e.pineBrus;e.larchBrus,e.pineDoska,e.larchDoska;return c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white-dark rounded-m border"},c.a.createElement(P.a,{htmlFor:"grouped-native-select",className:"font-19 font-600"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",t.id+1),c.a.createElement(W.a,Object(l.a)({native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t.lumber,onChange:function(e){return a(e,t.id)},name:"lumber","data-id":t.id},"defaultValue",null),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441 \u0441\u043e\u0441\u043d\u0430 \u041a\u0438\u0442\u0430\u0439"},o.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.china_name," ").concat(e.wood_species)," ")})))),c.a.createElement("p",{className:"my-0"},"1\u0448\u0442 = ",t.china_volume,"\u043c3"),t.lumber>0&&c.a.createElement("div",{className:"mt-3"},c.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},c.a.createElement(U.a,{className:"mr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",onChange:function(e){return n(e,t.id)},type:"number",value:t.quantity>0&&t.quantity}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",onChange:function(e){return s(e,t.id)},type:"number",value:t.rama_price>0&&t.rama_price}),c.a.createElement(U.a,{className:"ml-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0421\u0443\u043c\u043c\u0430",onChange:function(e){return r(e,t.id)},type:"number",value:t.rama_total_cash>0&&t.rama_total_cash})),c.a.createElement("div",{className:"d-flex mt-3 justify-content-between align-content-around"},c.a.createElement("p",{className:"font-16 color-dark mb-0 mr-4"},"\u041e\u0431\u044a\u0435\u043c:",c.a.createElement("span",{className:"font-500 d-block"}," ",t.volume_total+" \u043c3")))))}function tt(e){var t=e.setDeliveryFee,a=e.deliveryFee;return c.a.createElement("div",{className:"my-1"},c.a.createElement(U.a,{className:"",id:"outlined-margin-dense",variant:"outlined",label:"\u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430",onChange:t,type:"number",value:a>0&&a}))}function at(e){var t=e.loader,a=e.checkLoader;e.seller,e.bonusKladman,e.sellers;return c.a.createElement(De.a,{control:c.a.createElement(Fe.a,{checked:t,onChange:a,color:"blue2",name:"loader"}),label:"\u0413\u0440\u0443\u0437\u0447\u0438\u043a"})}var lt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={lumbers:[],lumbersToSale:[],totalVolume:0,totaCash:0,loader:!0,note:"",addExpenses:0,deliveryFee:0,dataToSave:null,createdSale:null,message:null,error:null},l.setData=l.setData.bind(Object(V.a)(l)),l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.setRowCash=l.setRowCash.bind(Object(V.a)(l)),l.saveData=l.saveData.bind(Object(V.a)(l)),l.setNote=l.setNote.bind(Object(V.a)(l)),l.setDeliveryFee=l.setDeliveryFee.bind(Object(V.a)(l)),l.preSave=l.preSave.bind(Object(V.a)(l)),l.back=l.back.bind(Object(V.a)(l)),l.checkLoader=l.checkLoader.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.KLADMAN_SALE_INIT_DATA_CHINA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.lumbers,lumbers:a.lumbers})}))}},{key:"setData",value:function(e){this.setState(Object(le.a)(Object(le.a)({},this.state),{},Object(l.a)({},e.target.name,e.target.value)))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.china_volume*l.quantity).toFixed(6),l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),l.selling_price=l.rama_price,l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.rama_price=e.target.value?parseInt(e.target.value):0,l.rama_total_cash=(l.volume_total*l.rama_price).toFixed(0),l.selling_price=l.rama_price,l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"setRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.rama_total_cash=e.target.value?parseInt(e.target.value):0,l.selling_total_cash=l.rama_total_cash,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.rama_total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"setNote",value:function(e){this.setState({note:e.target.value})}},{key:"setDeliveryFee",value:function(e){var t=e.target.value?parseInt(e.target.value):0;this.setState({deliveryFee:t})}},{key:"preSave",value:function(){var e=this.state,t=e.lumbersToSale,a=e.loader,l=e.note,n=e.addExpenses,c=e.deliveryFee,s=e.totalCash,r=e.totalVolume,o=[];t.map((function(e){e.rama_total_cash>0&&e.quantity>0&&(o=de(o,e))}));var u={raw_records:o,date:null,loader:a,note:l,seller:null,bonus_kladman:null,add_expenses:n,delivery_fee:c,sale_type:"china",sale_cash:parseFloat(s),volume:parseFloat(r)};this.setState({dataToSave:u})}},{key:"saveData",value:function(){var e=this,t=this.state.dataToSave,a=localStorage.getItem("token");g()({method:"post",url:_.KLADMAN_SALE_CHINA_CREATE,data:t,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(a)}}).then((function(t){e.setState({message:t.data.message,createdSale:t.data.sale})})).catch((function(t){e.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"})})),this.setState({dataToSave:null,lumbersToSale:[],totalVolume:0,totaCash:0,note:"",addExpenses:0})}},{key:"back",value:function(){this.setState({dataToSave:null})}},{key:"checkLoader",value:function(e){"seller"===e.target.name?this.setState(Object(l.a)({},e.target.name,e.target.value)):this.setState(Object(l.a)({},e.target.name,!this.state[e.target.name]))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.createdSale,n=t.totalCash,s=t.totalVolume,r=t.note,o=(t.addExpenses,t.dataToSave),u=t.message;return c.a.createElement("div",null,l?c.a.createElement(Ze,{sale:l,message:u}):o?c.a.createElement(Xe,{sale:o,saveData:this.saveData,back:this.back}):c.a.createElement("div",{className:"card card-style mb-1 mt-2 mx-1"},c.a.createElement("div",{className:"content mb-0"},c.a.createElement("div",{className:"d-flex justify-content-between mb-2 text-center"},c.a.createElement("h2",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"))),c.a.createElement("div",{className:"content mt-0 mb-0"},a.length>0&&a.map((function(t){return t&&c.a.createElement(et,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,setRowCash:e.setRowCash,pineBrus:e.state.pineBrus})})),c.a.createElement("button",{className:"mt-1 btn btn-s bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),c.a.createElement("div",{className:"content mt-0"},c.a.createElement(at,{loader:this.state.loader,checkLoader:this.checkLoader,seller:this.state.seller,bonusKladman:this.state.bonusKladman,sellers:this.state.sellers}),c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement(tt,{deliveryFee:this.state.deliveryFee,setDeliveryFee:this.setDeliveryFee}),c.a.createElement($e,{note:r,setNote:this.setData})),n>0&&c.a.createElement("div",{className:"d-flex justify-content-between my-2"},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",s," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")),n>0&&c.a.createElement("button",{onClick:this.preSave,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-2"},"\u0414\u0430\u043b\u0435\u0435"))))}}]),a}(n.Component);function nt(e){var t=e.lumber,a=e.calcRowQnty,l=e.calcRowVolume,n=e.calcRowCash,s=e.label;return c.a.createElement("div",{className:"my-2"},c.a.createElement("h5",null,s,":"),c.a.createElement("div",{className:"d-flex justify-content-start "},c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",onChange:function(e){return a(e,t.id)},value:t.quantity>0&&t.quantity}),c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041e\u0431\u044a\u0435\u043c",type:"number",onChange:function(e){return l(e,t.id)},value:t.volume_total>0&&t.volume_total})),c.a.createElement("div",{className:"d-flex justify-content-start mt-2"},c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",type:"number",onChange:function(e){return n(e,t.id)},value:t.price>0&&t.price}),c.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",disabled:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",value:t.total_cash>0&&t.total_cash})))}function ct(e){var t,a=e.lumber,s=e.setLumberID,r=e.calcRowQnty,o=e.calcRowCash,u=e.pineBrus,m=e.pineDoska,i=e.turnCalc,d=e.delLumber,h=e.calcRoundRowQnty,b=e.calcRowVolume,v=e.calcRoundRowVolume,p=e.calcChinaRowQnty,E=e.calcChinaRowVolume,g=Object(n.useRef)(null);return c.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white rounded-m border",ref:g},c.a.createElement(P.a,{htmlFor:"grouped-native-select",className:"font-19 font-600 color-black"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",a.id+1),c.a.createElement(W.a,(t={native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:a.lumber,onChange:function(e){return s(e,a.id)},name:"lumber","data-id":a.id},Object(l.a)(t,"defaultValue",null),Object(l.a)(t,"onClick",(function(){return g.current.scrollIntoView()})),t),c.a.createElement("option",{"aria-label":"None"}),c.a.createElement("optgroup",{label:"\u0411\u0440\u0443\u0441"},u.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")}))),c.a.createElement("optgroup",{label:"\u0414\u043e\u0441\u043a\u0430"},m.map((function(e){return c.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))),a.lumber>0&&c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"d-flex justify-content-around"},c.a.createElement("button",{className:"exact"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"exact")}},"\u0422\u043e\u0447\u043d\u044b\u0439 \u0441\u0447\u0435\u0442"),c.a.createElement("button",{className:"round"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"round")}},"\u041e\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0447\u0435\u0442"),a.china_volume>0&&c.a.createElement("button",{className:"china"===a.calcType?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return i(a.id,"china")}},"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442")),"exact"===a.calcType&&c.a.createElement(nt,{lumber:a,label:"\u0422\u043e\u0447\u043d\u044b\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:r,calcRowVolume:b,calcRowCash:o}),"round"===a.calcType&&c.a.createElement(nt,{lumber:a,label:"\u041e\u043a\u0440\u0443\u0433\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:h,calcRowVolume:v,calcRowCash:o}),"china"===a.calcType&&c.a.createElement(nt,{lumber:a,label:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:p,calcRowVolume:E,calcRowCash:o})),a.lumber>0&&c.a.createElement("button",{className:"btn btn-sm bg-red2-light mt-2 ",onClick:function(){return d(a.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"))}var st=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={pineBrus:[],pineDoska:[],lumbers:[],lumberToSale:null,lumbersToSale:[],totalCash:0,totalVolume:0},l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.turnCalc=l.turnCalc.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowVolume=l.calcRowVolume.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcRoundRowQnty=l.calcRoundRowQnty.bind(Object(V.a)(l)),l.calcRoundRowVolume=l.calcRoundRowVolume.bind(Object(V.a)(l)),l.calcChinaRowQnty=l.calcChinaRowQnty.bind(Object(V.a)(l)),l.calcChinaRowVolume=l.calcChinaRowVolume.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.delLumber=l.delLumber.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.KLADMAN_SALE_CALC_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,pineDoska:a.pine_doska_lumbers,lumbers:a.lumbers})}))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t,calcType:"exact"})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.volume).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.price=e.target.value?parseInt(e.target.value):0,l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRoundRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.round_volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRoundRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.round_volume).toFixed(0),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcChinaRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.china_volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcChinaRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.china_volume).toFixed(0),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"turnCalc",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,e);"round"===t&&(l.volume_total=(l.quantity*l.round_volume).toFixed(3)),"exact"===t&&(l.volume_total=(l.quantity*l.volume).toFixed(4)),"china"===t&&(l.volume_total=(l.quantity*l.china_volume).toFixed(4),l.price=0),l.calcType=t,l.total_cash=l.volume_total*l.price,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"delLumber",value:function(e){var t=this.state.lumbersToSale,a=he(t,e);t=be(t,a);var l=this.calcTotal(t),n=l.totalCash,c=l.totalVolume;this.setState({lumbersToSale:t,totalCash:n,totalVolume:c})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.totalVolume,n=t.totalCash;return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"content"},c.a.createElement("h3",null,"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"),a.length>0&&a.map((function(t){return t&&c.a.createElement(ct,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowVolume:e.calcRowVolume,calcRoundRowQnty:e.calcRoundRowQnty,calcRoundRowVolume:e.calcRoundRowVolume,calcChinaRowQnty:e.calcChinaRowQnty,calcChinaRowVolume:e.calcChinaRowVolume,turnCalc:e.turnCalc,delLumber:e.delLumber,pineBrus:e.state.pineBrus,pineDoska:e.state.pineDoska})})),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),n>0&&c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content d-flex justify-content-between mb-2 "},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",l," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")))))}}]),a}(n.Component),rt=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={pineBrus:[],pineDoska:[],lumbers:[],lumberToSale:null,lumbersToSale:[],totalCash:0,totalVolume:0},l.addLumberToSale=l.addLumberToSale.bind(Object(V.a)(l)),l.setLumberID=l.setLumberID.bind(Object(V.a)(l)),l.turnCalc=l.turnCalc.bind(Object(V.a)(l)),l.calcRowQnty=l.calcRowQnty.bind(Object(V.a)(l)),l.calcRowVolume=l.calcRowVolume.bind(Object(V.a)(l)),l.calcRowCash=l.calcRowCash.bind(Object(V.a)(l)),l.calcRoundRowQnty=l.calcRoundRowQnty.bind(Object(V.a)(l)),l.calcRoundRowVolume=l.calcRoundRowVolume.bind(Object(V.a)(l)),l.calcChinaRowQnty=l.calcChinaRowQnty.bind(Object(V.a)(l)),l.calcChinaRowVolume=l.calcChinaRowVolume.bind(Object(V.a)(l)),l.calcTotal=l.calcTotal.bind(Object(V.a)(l)),l.delLumber=l.delLumber.bind(Object(V.a)(l)),l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.KLADMAN_SALE_CALC_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({pineBrus:a.pine_brus_lumbers,pineDoska:a.pine_doska_lumbers,lumbers:a.lumbers})}))}},{key:"addLumberToSale",value:function(){this.setState(Object(le.a)(Object(le.a)({},this.state),{},{lumbersToSale:[].concat(Object(ue.a)(this.state.lumbersToSale),[{id:this.state.lumbersToSale.length}])}))}},{key:"setLumberID",value:function(e,t){var a=this.state,l=a.lumbersToSale,n=a.lumbers,c=he(n,e.target.value);l=ve(l,c=Object(le.a)(Object(le.a)({},c),{},{id:t,calcType:"exact"})),this.setState({lumbersToSale:l})}},{key:"calcRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.volume).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRowCash",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.price=e.target.value?parseInt(e.target.value):0,l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRoundRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.round_volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcRoundRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.round_volume).toFixed(0),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcChinaRowQnty",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.china_volume*l.quantity).toFixed(4),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcChinaRowVolume",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.china_volume).toFixed(0),l.total_cash=(l.volume_total*l.price).toFixed(0),a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"turnCalc",value:function(e,t){var a=this.state.lumbersToSale,l=he(a,e);"round"===t&&(l.volume_total=(l.quantity*l.round_volume).toFixed(3)),"exact"===t&&(l.volume_total=(l.quantity*l.volume).toFixed(4)),"china"===t&&(l.volume_total=(l.quantity*l.china_volume).toFixed(4),l.price=0),l.calcType=t,l.total_cash=l.volume_total*l.price,a=ve(a,l);var n=this.calcTotal(a),c=n.totalCash,s=n.totalVolume;this.setState({lumbersToSale:a,totalCash:c,totalVolume:s})}},{key:"calcTotal",value:function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}}},{key:"delLumber",value:function(e){var t=this.state.lumbersToSale,a=he(t,e);t=be(t,a);var l=this.calcTotal(t),n=l.totalCash,c=l.totalVolume;this.setState({lumbersToSale:t,totalCash:n,totalVolume:c})}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,l=t.totalVolume,n=t.totalCash;return c.a.createElement("div",{className:""},c.a.createElement("div",{className:"content"},c.a.createElement("h3",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"),a.length>0&&a.map((function(t){return t&&c.a.createElement(ct,{lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowVolume:e.calcRowVolume,calcRoundRowQnty:e.calcRoundRowQnty,calcRoundRowVolume:e.calcRoundRowVolume,turnCalc:e.turnCalc,delLumber:e.delLumber,pineBrus:e.state.pineBrus,pineDoska:e.state.pineDoska})})),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b")),n>0&&c.a.createElement("div",{className:"card card-style mt-2"},c.a.createElement("div",{className:"content d-flex justify-content-between mb-2 "},c.a.createElement("p",{className:"font-20"},"\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",l," \u043c3"),c.a.createElement("p",{className:"font-20"},"\u0418\u0442\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0430: ",n," \u0440\u0443\u0431\u043b\u0435\u0439")))))}}]),a}(n.Component);function ot(e){var t=e.sales,a=e.totals;return c.a.createElement("table",{className:"table table-sm table-responsive"},c.a.createElement("thead",null,c.a.createElement("th",null,"\u0414\u0430\u0442\u0430/\u041a\u043b\u0438\u0435\u043d\u0442"),c.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),c.a.createElement("th",null,"\u041f\u0440\u043e\u0434\u0430\u0432e\u0446"),c.a.createElement("th",null,"\u0433\u0440\u0443\u0437\u0447\u0438\u043a"),c.a.createElement("th",null,"\u043a\u043b\u0430\u0434\u043c\u044d\u043d"),c.a.createElement("th",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"),c.a.createElement("th",{className:"text-nowrap"},"\u0414\u043e\u043f. \u0440\u0430\u0441\u0445\u043e\u0434\u044b")),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",{style:{lineHeight:"15px"}},e.date,c.a.createElement("span",{className:"d-block"},e.note),c.a.createElement("span",{className:"font-13"},e.sale_type)),c.a.createElement("td",{className:"text-nowrap"},e.lumber_records.map((function(e){return c.a.createElement("span",{className:"d-block mb-2",style:{lineHeight:"14px"}},e.quantity,"\u0448\u0442 ",e.lumber)}))),c.a.createElement("td",null,e.selling_total_cash),c.a.createElement("td",{style:{lineHeight:"15px"}},c.a.createElement("span",{className:"d-block"},e.seller_fee),e.seller_name&&c.a.createElement("span",{className:""},e.seller_name)),c.a.createElement("td",null,e.loader_fee),c.a.createElement("td",null,e.kladman_fee),c.a.createElement("td",null,e.delivery_fee),c.a.createElement("td",null,e.add_expenses))})),c.a.createElement("tr",{className:"font-500 font-16"},c.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),c.a.createElement("td",null,"-"),c.a.createElement("td",null,a.total_selling_cash),c.a.createElement("td",null,a.total_seller_fee),c.a.createElement("td",null,a.total_loader_fee),c.a.createElement("td",null,a.total_kladman_fee),c.a.createElement("td",null,a.total_delivery_fee),c.a.createElement("td",null,a.total_add_expenses))))}var ut=function(e){Object(q.a)(a,e);var t=Object(M.a)(a);function a(e){var l;return Object(I.a)(this,a),(l=t.call(this,e)).state={saleList:[],totals:{},message:null,error:null},l}return Object(A.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");g()({method:"get",url:_.MANAGER_SALE_LIST,params:{},headers:{Authorization:"JWT ".concat(t)}}).then((function(t){e.setState(Object(le.a)(Object(le.a)({},e.state),{},{saleList:t.data.sales,totals:t.data.totals}))}))}},{key:"render",value:function(){var e=this.state,t=e.saleList,a=e.totals;return c.a.createElement("div",{className:"mt-2"},c.a.createElement("div",{className:"card card-style mb-2"},c.a.createElement("div",{className:"content"},c.a.createElement("h4",{className:"mb-2"},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 (",t.length,")"),t.length>0?c.a.createElement(ot,{sales:t,totals:a}):c.a.createElement("h5",null,"\u041d\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0436"))))}}]),a}(n.Component);function mt(e,t){var a=function(a){Object(q.a)(n,a);var l=Object(M.a)(n);function n(){return Object(I.a)(this,n),l.apply(this,arguments)}return Object(A.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.checkToken(e)}},{key:"render",value:function(){var a=this.props.state.auth,l=a.fetching,n=a.user;return!0!==this.props.isLoggedIn||t||!0,this.props.isLoggedIn&&"manager"===t&&n.is_manager&&!0,this.props.isLoggedIn&&"senior_ramshik"===t&&n.is_senior_ramshik&&!0,this.props.isLoggedIn&&"kladman"===t&&n.is_kladman&&!0,l?c.a.createElement("p",null,"Loading"):this.props.isLoggedIn?c.a.createElement(e,this.props):null}}]),n}(c.a.Component);return Object(m.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,state:e}}),(function(e){return{checkToken:function(t){return e(k.default.checkTokenRequest(t))}}}))(a)}var it=function(e){var t=Object(h.a)(),a=Object(i.createStore)(F,Object(d.composeWithDevTools)(Object(i.applyMiddleware)(t)));t.run(R);return a}();r.a.render(c.a.createElement(m.a,{store:it},c.a.createElement(D.a,{maxSnack:3},c.a.createElement(o.a,null,c.a.createElement("div",Object(l.a)({className:"app",id:"page"},"className",""),c.a.createElement(ae,null),c.a.createElement("div",{className:"page-content header-clear"},c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:$}),c.a.createElement(u.a,{exact:!0,path:"/manager/ramshik_payments/",component:mt(ce,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/shift_list/",component:mt(re,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/stock/",component:mt(Ee,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sale_list/",component:mt(ut,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/shift/create_shift/",component:mt(ke,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sales/create_sale/",component:mt(rt,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sales/create_sale_schema1/",component:mt(Ke,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sales/create_sale_perekup/",component:mt(ze,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sales/create_sale_china/",component:mt(lt,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/manager/sales/calc/",component:mt(st,"manager")}),c.a.createElement(u.a,{exact:!0,path:"/ramshik/shift/create_shift/",component:mt(ke,"is_senior_ramshik")}),c.a.createElement(u.a,{exact:!0,path:"/ramshik/shift/list/",component:mt(Ne,"is_ramshik")}),c.a.createElement(u.a,{exact:!0,path:"/ramshik/payouts/",component:mt(Se,"is_ramshik")}),c.a.createElement(u.a,{exact:!0,path:"/kladman/sales/create_sale/",component:mt(Le,"kladman")}),c.a.createElement(u.a,{exact:!0,path:"/kladman/stock/",component:mt(Ee,"kladman")}),c.a.createElement(u.a,{exact:!0,path:"/kladman/sale_list/",component:mt(ut,"kladman")}),c.a.createElement(u.a,{exact:!0,path:"/kladman/shift_list/",component:mt(re,"kladman")}))))))),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.8376c2b2.chunk.js.map